(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();function Eo(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const ae={},zs=[],xt=()=>{},Sc=()=>!1,tr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ao=t=>t.startsWith("onUpdate:"),Ee=Object.assign,Co=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Mh=Object.prototype.hasOwnProperty,ie=(t,e)=>Mh.call(t,e),W=Array.isArray,Vs=t=>Ji(t)==="[object Map]",sr=t=>Ji(t)==="[object Set]",da=t=>Ji(t)==="[object Date]",V=t=>typeof t=="function",ye=t=>typeof t=="string",St=t=>typeof t=="symbol",ce=t=>t!==null&&typeof t=="object",kc=t=>(ce(t)||V(t))&&V(t.then)&&V(t.catch),Tc=Object.prototype.toString,Ji=t=>Tc.call(t),Dh=t=>Ji(t).slice(8,-1),Oc=t=>Ji(t)==="[object Object]",Po=t=>ye(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,xi=Eo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ir=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},jh=/-\w/g,ts=ir(t=>t.replace(jh,e=>e.slice(1).toUpperCase())),$h=/\B([A-Z])/g,Es=ir(t=>t.replace($h,"-$1").toLowerCase()),Ec=ir(t=>t.charAt(0).toUpperCase()+t.slice(1)),Sr=ir(t=>t?`on${Ec(t)}`:""),Xt=(t,e)=>!Object.is(t,e),Tn=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Ac=(t,e,s,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:s})},nr=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let fa;const rr=()=>fa||(fa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ro(t){if(W(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=ye(i)?Bh(i):Ro(i);if(n)for(const r in n)e[r]=n[r]}return e}else if(ye(t)||ce(t))return t}const Lh=/;(?![^(]*\))/g,Nh=/:([^]+)/,Fh=/\/\*[^]*?\*\//g;function Bh(t){const e={};return t.replace(Fh,"").split(Lh).forEach(s=>{if(s){const i=s.split(Nh);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function jt(t){let e="";if(ye(t))e=t;else if(W(t))for(let s=0;s<t.length;s++){const i=jt(t[s]);i&&(e+=i+" ")}else if(ce(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Uh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hh=Eo(Uh);function Cc(t){return!!t||t===""}function Wh(t,e){if(t.length!==e.length)return!1;let s=!0;for(let i=0;s&&i<t.length;i++)s=or(t[i],e[i]);return s}function or(t,e){if(t===e)return!0;let s=da(t),i=da(e);if(s||i)return s&&i?t.getTime()===e.getTime():!1;if(s=St(t),i=St(e),s||i)return t===e;if(s=W(t),i=W(e),s||i)return s&&i?Wh(t,e):!1;if(s=ce(t),i=ce(e),s||i){if(!s||!i)return!1;const n=Object.keys(t).length,r=Object.keys(e).length;if(n!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!or(t[o],e[o]))return!1}}return String(t)===String(e)}function zh(t,e){return t.findIndex(s=>or(s,e))}const Pc=t=>!!(t&&t.__v_isRef===!0),J=t=>ye(t)?t:t==null?"":W(t)||ce(t)&&(t.toString===Tc||!V(t.toString))?Pc(t)?J(t.value):JSON.stringify(t,Rc,2):String(t),Rc=(t,e)=>Pc(e)?Rc(t,e.value):Vs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[i,n],r)=>(s[kr(i,r)+" =>"]=n,s),{})}:sr(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>kr(s))}:St(e)?kr(e):ce(e)&&!W(e)&&!Oc(e)?String(e):e,kr=(t,e="")=>{var s;return St(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};let Le;class Vh{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Le,!e&&Le&&(this.index=(Le.scopes||(Le.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Le;try{return Le=this,e()}finally{Le=s}}}on(){++this._on===1&&(this.prevScope=Le,Le=this)}off(){this._on>0&&--this._on===0&&(Le=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,i;for(s=0,i=this.effects.length;s<i;s++)this.effects[s].stop();for(this.effects.length=0,s=0,i=this.cleanups.length;s<i;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,i=this.scopes.length;s<i;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function qh(){return Le}let de;const Tr=new WeakSet;class Ic{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Le&&Le.active&&Le.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Tr.has(this)&&(Tr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Dc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ga(this),jc(this);const e=de,s=ut;de=this,ut=!0;try{return this.fn()}finally{$c(this),de=e,ut=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Do(e);this.deps=this.depsTail=void 0,ga(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Tr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Zr(this)&&this.run()}get dirty(){return Zr(this)}}let Mc=0,Si,ki;function Dc(t,e=!1){if(t.flags|=8,e){t.next=ki,ki=t;return}t.next=Si,Si=t}function Io(){Mc++}function Mo(){if(--Mc>0)return;if(ki){let e=ki;for(ki=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Si;){let e=Si;for(Si=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=s}}if(t)throw t}function jc(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function $c(t){let e,s=t.depsTail,i=s;for(;i;){const n=i.prevDep;i.version===-1?(i===s&&(s=n),Do(i),Kh(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}t.deps=e,t.depsTail=s}function Zr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Lc(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Lc(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Di)||(t.globalVersion=Di,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Zr(t))))return;t.flags|=2;const e=t.dep,s=de,i=ut;de=t,ut=!0;try{jc(t);const n=t.fn(t._value);(e.version===0||Xt(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{de=s,ut=i,$c(t),t.flags&=-3}}function Do(t,e=!1){const{dep:s,prevSub:i,nextSub:n}=t;if(i&&(i.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=i,t.nextSub=void 0),s.subs===t&&(s.subs=i,!i&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)Do(r,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Kh(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let ut=!0;const Nc=[];function $t(){Nc.push(ut),ut=!1}function Lt(){const t=Nc.pop();ut=t===void 0?!0:t}function ga(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=de;de=void 0;try{e()}finally{de=s}}}let Di=0;class Gh{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class jo{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!de||!ut||de===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==de)s=this.activeLink=new Gh(de,this),de.deps?(s.prevDep=de.depsTail,de.depsTail.nextDep=s,de.depsTail=s):de.deps=de.depsTail=s,Fc(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const i=s.nextDep;i.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=i),s.prevDep=de.depsTail,s.nextDep=void 0,de.depsTail.nextDep=s,de.depsTail=s,de.deps===s&&(de.deps=i)}return s}trigger(e){this.version++,Di++,this.notify(e)}notify(e){Io();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Mo()}}}function Fc(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)Fc(i)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const eo=new WeakMap,Ss=Symbol(""),to=Symbol(""),ji=Symbol("");function Ae(t,e,s){if(ut&&de){let i=eo.get(t);i||eo.set(t,i=new Map);let n=i.get(s);n||(i.set(s,n=new jo),n.map=i,n.key=s),n.track()}}function Mt(t,e,s,i,n,r){const o=eo.get(t);if(!o){Di++;return}const a=l=>{l&&l.trigger()};if(Io(),e==="clear")o.forEach(a);else{const l=W(t),c=l&&Po(s);if(l&&s==="length"){const u=Number(i);o.forEach((h,d)=>{(d==="length"||d===ji||!St(d)&&d>=u)&&a(h)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),c&&a(o.get(ji)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Ss)),Vs(t)&&a(o.get(to)));break;case"delete":l||(a(o.get(Ss)),Vs(t)&&a(o.get(to)));break;case"set":Vs(t)&&a(o.get(Ss));break}}Mo()}function As(t){const e=Z(t);return e===t?e:(Ae(e,"iterate",ji),et(t)?e:e.map(ht))}function ar(t){return Ae(t=Z(t),"iterate",ji),t}function Ht(t,e){return Nt(t)?Zs(ks(t)?ht(e):e):ht(e)}const Jh={__proto__:null,[Symbol.iterator](){return Or(this,Symbol.iterator,t=>Ht(this,t))},concat(...t){return As(this).concat(...t.map(e=>W(e)?As(e):e))},entries(){return Or(this,"entries",t=>(t[1]=Ht(this,t[1]),t))},every(t,e){return Ot(this,"every",t,e,void 0,arguments)},filter(t,e){return Ot(this,"filter",t,e,s=>s.map(i=>Ht(this,i)),arguments)},find(t,e){return Ot(this,"find",t,e,s=>Ht(this,s),arguments)},findIndex(t,e){return Ot(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ot(this,"findLast",t,e,s=>Ht(this,s),arguments)},findLastIndex(t,e){return Ot(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ot(this,"forEach",t,e,void 0,arguments)},includes(...t){return Er(this,"includes",t)},indexOf(...t){return Er(this,"indexOf",t)},join(t){return As(this).join(t)},lastIndexOf(...t){return Er(this,"lastIndexOf",t)},map(t,e){return Ot(this,"map",t,e,void 0,arguments)},pop(){return li(this,"pop")},push(...t){return li(this,"push",t)},reduce(t,...e){return pa(this,"reduce",t,e)},reduceRight(t,...e){return pa(this,"reduceRight",t,e)},shift(){return li(this,"shift")},some(t,e){return Ot(this,"some",t,e,void 0,arguments)},splice(...t){return li(this,"splice",t)},toReversed(){return As(this).toReversed()},toSorted(t){return As(this).toSorted(t)},toSpliced(...t){return As(this).toSpliced(...t)},unshift(...t){return li(this,"unshift",t)},values(){return Or(this,"values",t=>Ht(this,t))}};function Or(t,e,s){const i=ar(t),n=i[e]();return i!==t&&!et(t)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=s(r.value)),r}),n}const Yh=Array.prototype;function Ot(t,e,s,i,n,r){const o=ar(t),a=o!==t&&!et(t),l=o[e];if(l!==Yh[e]){const h=l.apply(t,r);return a?ht(h):h}let c=s;o!==t&&(a?c=function(h,d){return s.call(this,Ht(t,h),d,t)}:s.length>2&&(c=function(h,d){return s.call(this,h,d,t)}));const u=l.call(o,c,i);return a&&n?n(u):u}function pa(t,e,s,i){const n=ar(t);let r=s;return n!==t&&(et(t)?s.length>3&&(r=function(o,a,l){return s.call(this,o,a,l,t)}):r=function(o,a,l){return s.call(this,o,Ht(t,a),l,t)}),n[e](r,...i)}function Er(t,e,s){const i=Z(t);Ae(i,"iterate",ji);const n=i[e](...s);return(n===-1||n===!1)&&Yi(s[0])?(s[0]=Z(s[0]),i[e](...s)):n}function li(t,e,s=[]){$t(),Io();const i=Z(t)[e].apply(t,s);return Mo(),Lt(),i}const Xh=Eo("__proto__,__v_isRef,__isVue"),Bc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(St));function Qh(t){St(t)||(t=String(t));const e=Z(this);return Ae(e,"has",t),e.hasOwnProperty(t)}class Uc{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,i){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return r;if(s==="__v_raw")return i===(n?r?ld:Vc:r?zc:Wc).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=W(e);if(!n){let l;if(o&&(l=Jh[s]))return l;if(s==="hasOwnProperty")return Qh}const a=Reflect.get(e,s,Ce(e)?e:i);if((St(s)?Bc.has(s):Xh(s))||(n||Ae(e,"get",s),r))return a;if(Ce(a)){const l=o&&Po(s)?a:a.value;return n&&ce(l)?io(l):l}return ce(a)?n?io(a):Lo(a):a}}class Hc extends Uc{constructor(e=!1){super(!1,e)}set(e,s,i,n){let r=e[s];const o=W(e)&&Po(s);if(!this._isShallow){const c=Nt(r);if(!et(i)&&!Nt(i)&&(r=Z(r),i=Z(i)),!o&&Ce(r)&&!Ce(i))return c||(r.value=i),!0}const a=o?Number(s)<e.length:ie(e,s),l=Reflect.set(e,s,i,Ce(e)?e:n);return e===Z(n)&&(a?Xt(i,r)&&Mt(e,"set",s,i):Mt(e,"add",s,i)),l}deleteProperty(e,s){const i=ie(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&i&&Mt(e,"delete",s,void 0),n}has(e,s){const i=Reflect.has(e,s);return(!St(s)||!Bc.has(s))&&Ae(e,"has",s),i}ownKeys(e){return Ae(e,"iterate",W(e)?"length":Ss),Reflect.ownKeys(e)}}class Zh extends Uc{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const ed=new Hc,td=new Zh,sd=new Hc(!0);const so=t=>t,nn=t=>Reflect.getPrototypeOf(t);function id(t,e,s){return function(...i){const n=this.__v_raw,r=Z(n),o=Vs(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=n[t](...i),u=s?so:e?Zs:ht;return!e&&Ae(r,"iterate",l?to:Ss),Ee(Object.create(c),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}}})}}function rn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function nd(t,e){const s={get(n){const r=this.__v_raw,o=Z(r),a=Z(n);t||(Xt(n,a)&&Ae(o,"get",n),Ae(o,"get",a));const{has:l}=nn(o),c=e?so:t?Zs:ht;if(l.call(o,n))return c(r.get(n));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!t&&Ae(Z(n),"iterate",Ss),n.size},has(n){const r=this.__v_raw,o=Z(r),a=Z(n);return t||(Xt(n,a)&&Ae(o,"has",n),Ae(o,"has",a)),n===a?r.has(n):r.has(n)||r.has(a)},forEach(n,r){const o=this,a=o.__v_raw,l=Z(a),c=e?so:t?Zs:ht;return!t&&Ae(l,"iterate",Ss),a.forEach((u,h)=>n.call(r,c(u),c(h),o))}};return Ee(s,t?{add:rn("add"),set:rn("set"),delete:rn("delete"),clear:rn("clear")}:{add(n){!e&&!et(n)&&!Nt(n)&&(n=Z(n));const r=Z(this);return nn(r).has.call(r,n)||(r.add(n),Mt(r,"add",n,n)),this},set(n,r){!e&&!et(r)&&!Nt(r)&&(r=Z(r));const o=Z(this),{has:a,get:l}=nn(o);let c=a.call(o,n);c||(n=Z(n),c=a.call(o,n));const u=l.call(o,n);return o.set(n,r),c?Xt(r,u)&&Mt(o,"set",n,r):Mt(o,"add",n,r),this},delete(n){const r=Z(this),{has:o,get:a}=nn(r);let l=o.call(r,n);l||(n=Z(n),l=o.call(r,n)),a&&a.call(r,n);const c=r.delete(n);return l&&Mt(r,"delete",n,void 0),c},clear(){const n=Z(this),r=n.size!==0,o=n.clear();return r&&Mt(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=id(n,t,e)}),s}function $o(t,e){const s=nd(t,e);return(i,n,r)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(ie(s,n)&&n in i?s:i,n,r)}const rd={get:$o(!1,!1)},od={get:$o(!1,!0)},ad={get:$o(!0,!1)};const Wc=new WeakMap,zc=new WeakMap,Vc=new WeakMap,ld=new WeakMap;function cd(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ud(t){return t.__v_skip||!Object.isExtensible(t)?0:cd(Dh(t))}function Lo(t){return Nt(t)?t:No(t,!1,ed,rd,Wc)}function hd(t){return No(t,!1,sd,od,zc)}function io(t){return No(t,!0,td,ad,Vc)}function No(t,e,s,i,n){if(!ce(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=ud(t);if(r===0)return t;const o=n.get(t);if(o)return o;const a=new Proxy(t,r===2?i:s);return n.set(t,a),a}function ks(t){return Nt(t)?ks(t.__v_raw):!!(t&&t.__v_isReactive)}function Nt(t){return!!(t&&t.__v_isReadonly)}function et(t){return!!(t&&t.__v_isShallow)}function Yi(t){return t?!!t.__v_raw:!1}function Z(t){const e=t&&t.__v_raw;return e?Z(e):t}function dd(t){return!ie(t,"__v_skip")&&Object.isExtensible(t)&&Ac(t,"__v_skip",!0),t}const ht=t=>ce(t)?Lo(t):t,Zs=t=>ce(t)?io(t):t;function Ce(t){return t?t.__v_isRef===!0:!1}function Ne(t){return Kc(t,!1)}function qc(t){return Kc(t,!0)}function Kc(t,e){return Ce(t)?t:new fd(t,e)}class fd{constructor(e,s){this.dep=new jo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:Z(e),this._value=s?e:ht(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,i=this.__v_isShallow||et(e)||Nt(e);e=i?e:Z(e),Xt(e,s)&&(this._rawValue=e,this._value=i?e:ht(e),this.dep.trigger())}}function ys(t){return Ce(t)?t.value:t}const gd={get:(t,e,s)=>e==="__v_raw"?t:ys(Reflect.get(t,e,s)),set:(t,e,s,i)=>{const n=t[e];return Ce(n)&&!Ce(s)?(n.value=s,!0):Reflect.set(t,e,s,i)}};function Gc(t){return ks(t)?t:new Proxy(t,gd)}class pd{constructor(e,s,i){this.fn=e,this.setter=s,this._value=void 0,this.dep=new jo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Di-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&de!==this)return Dc(this,!0),!0}get value(){const e=this.dep.track();return Lc(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function md(t,e,s=!1){let i,n;return V(t)?i=t:(i=t.get,n=t.set),new pd(i,n,s)}const on={},Mn=new WeakMap;let fs;function _d(t,e=!1,s=fs){if(s){let i=Mn.get(s);i||Mn.set(s,i=[]),i.push(t)}}function bd(t,e,s=ae){const{immediate:i,deep:n,once:r,scheduler:o,augmentJob:a,call:l}=s,c=w=>n?w:et(w)||n===!1||n===0?Dt(w,1):Dt(w);let u,h,d,f,g=!1,p=!1;if(Ce(t)?(h=()=>t.value,g=et(t)):ks(t)?(h=()=>c(t),g=!0):W(t)?(p=!0,g=t.some(w=>ks(w)||et(w)),h=()=>t.map(w=>{if(Ce(w))return w.value;if(ks(w))return c(w);if(V(w))return l?l(w,2):w()})):V(t)?e?h=l?()=>l(t,2):t:h=()=>{if(d){$t();try{d()}finally{Lt()}}const w=fs;fs=u;try{return l?l(t,3,[f]):t(f)}finally{fs=w}}:h=xt,e&&n){const w=h,k=n===!0?1/0:n;h=()=>Dt(w(),k)}const m=qh(),b=()=>{u.stop(),m&&m.active&&Co(m.effects,u)};if(r&&e){const w=e;e=(...k)=>{w(...k),b()}}let x=p?new Array(t.length).fill(on):on;const v=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(e){const k=u.run();if(n||g||(p?k.some((C,I)=>Xt(C,x[I])):Xt(k,x))){d&&d();const C=fs;fs=u;try{const I=[k,x===on?void 0:p&&x[0]===on?[]:x,f];x=k,l?l(e,3,I):e(...I)}finally{fs=C}}}else u.run()};return a&&a(v),u=new Ic(h),u.scheduler=o?()=>o(v,!1):v,f=w=>_d(w,!1,u),d=u.onStop=()=>{const w=Mn.get(u);if(w){if(l)l(w,4);else for(const k of w)k();Mn.delete(u)}},e?i?v(!0):x=u.run():o?o(v.bind(null,!0),!0):u.run(),b.pause=u.pause.bind(u),b.resume=u.resume.bind(u),b.stop=b,b}function Dt(t,e=1/0,s){if(e<=0||!ce(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,Ce(t))Dt(t.value,e,s);else if(W(t))for(let i=0;i<t.length;i++)Dt(t[i],e,s);else if(sr(t)||Vs(t))t.forEach(i=>{Dt(i,e,s)});else if(Oc(t)){for(const i in t)Dt(t[i],e,s);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Dt(t[i],e,s)}return t}function Xi(t,e,s,i){try{return i?t(...i):t()}catch(n){lr(n,e,s)}}function kt(t,e,s,i){if(V(t)){const n=Xi(t,e,s,i);return n&&kc(n)&&n.catch(r=>{lr(r,e,s)}),n}if(W(t)){const n=[];for(let r=0;r<t.length;r++)n.push(kt(t[r],e,s,i));return n}}function lr(t,e,s,i=!0){const n=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ae;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,l,c)===!1)return}a=a.parent}if(r){$t(),Xi(r,null,10,[t,l,c]),Lt();return}}yd(t,s,n,i,o)}function yd(t,e,s,i=!0,n=!1){if(n)throw t;console.error(t)}const Re=[];let yt=-1;const qs=[];let Wt=null,Ls=0;const Jc=Promise.resolve();let Dn=null;function Fo(t){const e=Dn||Jc;return t?e.then(this?t.bind(this):t):e}function vd(t){let e=yt+1,s=Re.length;for(;e<s;){const i=e+s>>>1,n=Re[i],r=$i(n);r<t||r===t&&n.flags&2?e=i+1:s=i}return e}function Bo(t){if(!(t.flags&1)){const e=$i(t),s=Re[Re.length-1];!s||!(t.flags&2)&&e>=$i(s)?Re.push(t):Re.splice(vd(e),0,t),t.flags|=1,Yc()}}function Yc(){Dn||(Dn=Jc.then(Qc))}function wd(t){W(t)?qs.push(...t):Wt&&t.id===-1?Wt.splice(Ls+1,0,t):t.flags&1||(qs.push(t),t.flags|=1),Yc()}function ma(t,e,s=yt+1){for(;s<Re.length;s++){const i=Re[s];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;Re.splice(s,1),s--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Xc(t){if(qs.length){const e=[...new Set(qs)].sort((s,i)=>$i(s)-$i(i));if(qs.length=0,Wt){Wt.push(...e);return}for(Wt=e,Ls=0;Ls<Wt.length;Ls++){const s=Wt[Ls];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Wt=null,Ls=0}}const $i=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Qc(t){try{for(yt=0;yt<Re.length;yt++){const e=Re[yt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Xi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;yt<Re.length;yt++){const e=Re[yt];e&&(e.flags&=-2)}yt=-1,Re.length=0,Xc(),Dn=null,(Re.length||qs.length)&&Qc()}}let Ze=null,Zc=null;function jn(t){const e=Ze;return Ze=t,Zc=t&&t.type.__scopeId||null,e}function xd(t,e=Ze,s){if(!e||t._n)return t;const i=(...n)=>{i._d&&Nn(-1);const r=jn(e);let o;try{o=t(...n)}finally{jn(r),i._d&&Nn(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function ot(t,e){if(Ze===null)return t;const s=fr(Ze),i=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[r,o,a,l=ae]=e[n];r&&(V(r)&&(r={mounted:r,updated:r}),r.deep&&Dt(o),i.push({dir:r,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function rs(t,e,s,i){const n=t.dirs,r=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&($t(),kt(l,s,8,[t.el,a,t,e]),Lt())}}function Sd(t,e){if(Ie){let s=Ie.provides;const i=Ie.parent&&Ie.parent.provides;i===s&&(s=Ie.provides=Object.create(i)),s[t]=e}}function On(t,e,s=!1){const i=xf();if(i||Ks){let n=Ks?Ks._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&V(e)?e.call(i&&i.proxy):e}}const kd=Symbol.for("v-scx"),Td=()=>On(kd);function En(t,e,s){return eu(t,e,s)}function eu(t,e,s=ae){const{immediate:i,deep:n,flush:r,once:o}=s,a=Ee({},s),l=e&&i||!e&&r!=="post";let c;if(Ni){if(r==="sync"){const f=Td();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=xt,f.resume=xt,f.pause=xt,f}}const u=Ie;a.call=(f,g,p)=>kt(f,u,g,p);let h=!1;r==="post"?a.scheduler=f=>{qe(f,u&&u.suspense)}:r!=="sync"&&(h=!0,a.scheduler=(f,g)=>{g?f():Bo(f)}),a.augmentJob=f=>{e&&(f.flags|=4),h&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const d=bd(t,e,a);return Ni&&(c?c.push(d):l&&d()),d}function Od(t,e,s){const i=this.proxy,n=ye(t)?t.includes(".")?tu(i,t):()=>i[t]:t.bind(i,i);let r;V(e)?r=e:(r=e.handler,s=e);const o=Qi(this),a=eu(n,r.bind(i),s);return o(),a}function tu(t,e){const s=e.split(".");return()=>{let i=t;for(let n=0;n<s.length&&i;n++)i=i[s[n]];return i}}const Ed=Symbol("_vte"),Ad=t=>t.__isTeleport,Cd=Symbol("_leaveCb");function Uo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Uo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function su(t,e){return V(t)?Ee({name:t.name},e,{setup:t}):t}function iu(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const $n=new WeakMap;function Ti(t,e,s,i,n=!1){if(W(t)){t.forEach((g,p)=>Ti(g,e&&(W(e)?e[p]:e),s,i,n));return}if(Oi(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Ti(t,e,s,i.component.subTree);return}const r=i.shapeFlag&4?fr(i.component):i.el,o=n?null:r,{i:a,r:l}=t,c=e&&e.r,u=a.refs===ae?a.refs={}:a.refs,h=a.setupState,d=Z(h),f=h===ae?Sc:g=>ie(d,g);if(c!=null&&c!==l){if(_a(e),ye(c))u[c]=null,f(c)&&(h[c]=null);else if(Ce(c)){c.value=null;const g=e;g.k&&(u[g.k]=null)}}if(V(l))Xi(l,a,12,[o,u]);else{const g=ye(l),p=Ce(l);if(g||p){const m=()=>{if(t.f){const b=g?f(l)?h[l]:u[l]:l.value;if(n)W(b)&&Co(b,r);else if(W(b))b.includes(r)||b.push(r);else if(g)u[l]=[r],f(l)&&(h[l]=u[l]);else{const x=[r];l.value=x,t.k&&(u[t.k]=x)}}else g?(u[l]=o,f(l)&&(h[l]=o)):p&&(l.value=o,t.k&&(u[t.k]=o))};if(o){const b=()=>{m(),$n.delete(t)};b.id=-1,$n.set(t,b),qe(b,s)}else _a(t),m()}}}function _a(t){const e=$n.get(t);e&&(e.flags|=8,$n.delete(t))}rr().requestIdleCallback;rr().cancelIdleCallback;const Oi=t=>!!t.type.__asyncLoader,nu=t=>t.type.__isKeepAlive;function Pd(t,e){ru(t,"a",e)}function Rd(t,e){ru(t,"da",e)}function ru(t,e,s=Ie){const i=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(cr(e,i,s),s){let n=s.parent;for(;n&&n.parent;)nu(n.parent.vnode)&&Id(i,e,s,n),n=n.parent}}function Id(t,e,s,i){const n=cr(e,t,i,!0);Ho(()=>{Co(i[e],n)},s)}function cr(t,e,s=Ie,i=!1){if(s){const n=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...o)=>{$t();const a=Qi(s),l=kt(e,s,t,o);return a(),Lt(),l});return i?n.unshift(r):n.push(r),r}}const Ft=t=>(e,s=Ie)=>{(!Ni||t==="sp")&&cr(t,(...i)=>e(...i),s)},Md=Ft("bm"),ur=Ft("m"),Dd=Ft("bu"),jd=Ft("u"),$d=Ft("bum"),Ho=Ft("um"),Ld=Ft("sp"),Nd=Ft("rtg"),Fd=Ft("rtc");function Bd(t,e=Ie){cr("ec",t,e)}const Ud=Symbol.for("v-ndc");function vs(t,e,s,i){let n;const r=s,o=W(t);if(o||ye(t)){const a=o&&ks(t);let l=!1,c=!1;a&&(l=!et(t),c=Nt(t),t=ar(t)),n=new Array(t.length);for(let u=0,h=t.length;u<h;u++)n[u]=e(l?c?Zs(ht(t[u])):ht(t[u]):t[u],u,void 0,r)}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,r)}else if(ce(t))if(t[Symbol.iterator])n=Array.from(t,(a,l)=>e(a,l,void 0,r));else{const a=Object.keys(t);n=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];n[l]=e(t[u],u,l,r)}}else n=[];return n}const no=t=>t?Tu(t)?fr(t):no(t.parent):null,Ei=Ee(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>no(t.parent),$root:t=>no(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>au(t),$forceUpdate:t=>t.f||(t.f=()=>{Bo(t.update)}),$nextTick:t=>t.n||(t.n=Fo.bind(t.proxy)),$watch:t=>Od.bind(t)}),Ar=(t,e)=>t!==ae&&!t.__isScriptSetup&&ie(t,e),Hd={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:i,data:n,props:r,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return n[e];case 4:return s[e];case 3:return r[e]}else{if(Ar(i,e))return o[e]=1,i[e];if(n!==ae&&ie(n,e))return o[e]=2,n[e];if(ie(r,e))return o[e]=3,r[e];if(s!==ae&&ie(s,e))return o[e]=4,s[e];ro&&(o[e]=0)}}const c=Ei[e];let u,h;if(c)return e==="$attrs"&&Ae(t.attrs,"get",""),c(t);if((u=a.__cssModules)&&(u=u[e]))return u;if(s!==ae&&ie(s,e))return o[e]=4,s[e];if(h=l.config.globalProperties,ie(h,e))return h[e]},set({_:t},e,s){const{data:i,setupState:n,ctx:r}=t;return Ar(n,e)?(n[e]=s,!0):i!==ae&&ie(i,e)?(i[e]=s,!0):ie(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:i,appContext:n,props:r,type:o}},a){let l;return!!(s[a]||t!==ae&&a[0]!=="$"&&ie(t,a)||Ar(e,a)||ie(r,a)||ie(i,a)||ie(Ei,a)||ie(n.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:ie(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function ba(t){return W(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let ro=!0;function Wd(t){const e=au(t),s=t.proxy,i=t.ctx;ro=!1,e.beforeCreate&&ya(e.beforeCreate,t,"bc");const{data:n,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:p,deactivated:m,beforeDestroy:b,beforeUnmount:x,destroyed:v,unmounted:w,render:k,renderTracked:C,renderTriggered:I,errorCaptured:j,serverPrefetch:U,expose:K,inheritAttrs:q,components:Y,directives:ve,filters:Me}=e;if(c&&zd(c,i,null),o)for(const G in o){const te=o[G];V(te)&&(i[G]=te.bind(s))}if(n){const G=n.call(s,s);ce(G)&&(t.data=Lo(G))}if(ro=!0,r)for(const G in r){const te=r[G],Ye=V(te)?te.bind(s,s):V(te.get)?te.get.bind(s,s):xt,st=!V(te)&&V(te.set)?te.set.bind(s):xt,Xe=at({get:Ye,set:st});Object.defineProperty(i,G,{enumerable:!0,configurable:!0,get:()=>Xe.value,set:Se=>Xe.value=Se})}if(a)for(const G in a)ou(a[G],i,s,G);if(l){const G=V(l)?l.call(s):l;Reflect.ownKeys(G).forEach(te=>{Sd(te,G[te])})}u&&ya(u,t,"c");function Q(G,te){W(te)?te.forEach(Ye=>G(Ye.bind(s))):te&&G(te.bind(s))}if(Q(Md,h),Q(ur,d),Q(Dd,f),Q(jd,g),Q(Pd,p),Q(Rd,m),Q(Bd,j),Q(Fd,C),Q(Nd,I),Q($d,x),Q(Ho,w),Q(Ld,U),W(K))if(K.length){const G=t.exposed||(t.exposed={});K.forEach(te=>{Object.defineProperty(G,te,{get:()=>s[te],set:Ye=>s[te]=Ye,enumerable:!0})})}else t.exposed||(t.exposed={});k&&t.render===xt&&(t.render=k),q!=null&&(t.inheritAttrs=q),Y&&(t.components=Y),ve&&(t.directives=ve),U&&iu(t)}function zd(t,e,s=xt){W(t)&&(t=oo(t));for(const i in t){const n=t[i];let r;ce(n)?"default"in n?r=On(n.from||i,n.default,!0):r=On(n.from||i):r=On(n),Ce(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function ya(t,e,s){kt(W(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,s)}function ou(t,e,s,i){let n=i.includes(".")?tu(s,i):()=>s[i];if(ye(t)){const r=e[t];V(r)&&En(n,r)}else if(V(t))En(n,t.bind(s));else if(ce(t))if(W(t))t.forEach(r=>ou(r,e,s,i));else{const r=V(t.handler)?t.handler.bind(s):e[t.handler];V(r)&&En(n,r,t)}}function au(t){const e=t.type,{mixins:s,extends:i}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!n.length&&!s&&!i?l=e:(l={},n.length&&n.forEach(c=>Ln(l,c,o,!0)),Ln(l,e,o)),ce(e)&&r.set(e,l),l}function Ln(t,e,s,i=!1){const{mixins:n,extends:r}=e;r&&Ln(t,r,s,!0),n&&n.forEach(o=>Ln(t,o,s,!0));for(const o in e)if(!(i&&o==="expose")){const a=Vd[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Vd={data:va,props:wa,emits:wa,methods:mi,computed:mi,beforeCreate:Pe,created:Pe,beforeMount:Pe,mounted:Pe,beforeUpdate:Pe,updated:Pe,beforeDestroy:Pe,beforeUnmount:Pe,destroyed:Pe,unmounted:Pe,activated:Pe,deactivated:Pe,errorCaptured:Pe,serverPrefetch:Pe,components:mi,directives:mi,watch:Kd,provide:va,inject:qd};function va(t,e){return e?t?function(){return Ee(V(t)?t.call(this,this):t,V(e)?e.call(this,this):e)}:e:t}function qd(t,e){return mi(oo(t),oo(e))}function oo(t){if(W(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Pe(t,e){return t?[...new Set([].concat(t,e))]:e}function mi(t,e){return t?Ee(Object.create(null),t,e):e}function wa(t,e){return t?W(t)&&W(e)?[...new Set([...t,...e])]:Ee(Object.create(null),ba(t),ba(e??{})):e}function Kd(t,e){if(!t)return e;if(!e)return t;const s=Ee(Object.create(null),t);for(const i in e)s[i]=Pe(t[i],e[i]);return s}function lu(){return{app:null,config:{isNativeTag:Sc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Gd=0;function Jd(t,e){return function(i,n=null){V(i)||(i=Ee({},i)),n!=null&&!ce(n)&&(n=null);const r=lu(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:Gd++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:Eu,get config(){return r.config},set config(u){},use(u,...h){return o.has(u)||(u&&V(u.install)?(o.add(u),u.install(c,...h)):V(u)&&(o.add(u),u(c,...h))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,h){return h?(r.components[u]=h,c):r.components[u]},directive(u,h){return h?(r.directives[u]=h,c):r.directives[u]},mount(u,h,d){if(!l){const f=c._ceVNode||Be(i,n);return f.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),t(f,u,d),l=!0,c._container=u,u.__vue_app__=c,fr(f.component)}},onUnmount(u){a.push(u)},unmount(){l&&(kt(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return r.provides[u]=h,c},runWithContext(u){const h=Ks;Ks=c;try{return u()}finally{Ks=h}}};return c}}let Ks=null;const Yd=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ts(e)}Modifiers`]||t[`${Es(e)}Modifiers`];function Xd(t,e,...s){if(t.isUnmounted)return;const i=t.vnode.props||ae;let n=s;const r=e.startsWith("update:"),o=r&&Yd(i,e.slice(7));o&&(o.trim&&(n=s.map(u=>ye(u)?u.trim():u)),o.number&&(n=s.map(nr)));let a,l=i[a=Sr(e)]||i[a=Sr(ts(e))];!l&&r&&(l=i[a=Sr(Es(e))]),l&&kt(l,t,6,n);const c=i[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,kt(c,t,6,n)}}const Qd=new WeakMap;function cu(t,e,s=!1){const i=s?Qd:e.emitsCache,n=i.get(t);if(n!==void 0)return n;const r=t.emits;let o={},a=!1;if(!V(t)){const l=c=>{const u=cu(c,e,!0);u&&(a=!0,Ee(o,u))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(ce(t)&&i.set(t,null),null):(W(r)?r.forEach(l=>o[l]=null):Ee(o,r),ce(t)&&i.set(t,o),o)}function hr(t,e){return!t||!tr(e)?!1:(e=e.slice(2).replace(/Once$/,""),ie(t,e[0].toLowerCase()+e.slice(1))||ie(t,Es(e))||ie(t,e))}function xa(t){const{type:e,vnode:s,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:d,setupState:f,ctx:g,inheritAttrs:p}=t,m=jn(t);let b,x;try{if(s.shapeFlag&4){const w=n||i,k=w;b=wt(c.call(k,w,u,h,f,d,g)),x=a}else{const w=e;b=wt(w.length>1?w(h,{attrs:a,slots:o,emit:l}):w(h,null)),x=e.props?a:Zd(a)}}catch(w){Ai.length=0,lr(w,t,1),b=Be(ss)}let v=b;if(x&&p!==!1){const w=Object.keys(x),{shapeFlag:k}=v;w.length&&k&7&&(r&&w.some(Ao)&&(x=ef(x,r)),v=ei(v,x,!1,!0))}return s.dirs&&(v=ei(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(s.dirs):s.dirs),s.transition&&Uo(v,s.transition),b=v,jn(m),b}const Zd=t=>{let e;for(const s in t)(s==="class"||s==="style"||tr(s))&&((e||(e={}))[s]=t[s]);return e},ef=(t,e)=>{const s={};for(const i in t)(!Ao(i)||!(i.slice(9)in e))&&(s[i]=t[i]);return s};function tf(t,e,s){const{props:i,children:n,component:r}=t,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return i?Sa(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==i[d]&&!hr(c,d))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Sa(i,o,c):!0:!!o;return!1}function Sa(t,e,s){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(e[r]!==t[r]&&!hr(s,r))return!0}return!1}function sf({vnode:t,parent:e},s){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=s,e=e.parent;else break}}const uu={},hu=()=>Object.create(uu),du=t=>Object.getPrototypeOf(t)===uu;function nf(t,e,s,i=!1){const n={},r=hu();t.propsDefaults=Object.create(null),fu(t,e,n,r);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=i?n:hd(n):t.type.props?t.props=n:t.props=r,t.attrs=r}function rf(t,e,s,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=t,a=Z(n),[l]=t.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(hr(t.emitsOptions,d))continue;const f=e[d];if(l)if(ie(r,d))f!==r[d]&&(r[d]=f,c=!0);else{const g=ts(d);n[g]=ao(l,a,g,f,t,!1)}else f!==r[d]&&(r[d]=f,c=!0)}}}else{fu(t,e,n,r)&&(c=!0);let u;for(const h in a)(!e||!ie(e,h)&&((u=Es(h))===h||!ie(e,u)))&&(l?s&&(s[h]!==void 0||s[u]!==void 0)&&(n[h]=ao(l,a,h,void 0,t,!0)):delete n[h]);if(r!==a)for(const h in r)(!e||!ie(e,h))&&(delete r[h],c=!0)}c&&Mt(t.attrs,"set","")}function fu(t,e,s,i){const[n,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(xi(l))continue;const c=e[l];let u;n&&ie(n,u=ts(l))?!r||!r.includes(u)?s[u]=c:(a||(a={}))[u]=c:hr(t.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=Z(s),c=a||ae;for(let u=0;u<r.length;u++){const h=r[u];s[h]=ao(n,l,h,c[h],t,!ie(c,h))}}return o}function ao(t,e,s,i,n,r){const o=t[s];if(o!=null){const a=ie(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&V(l)){const{propsDefaults:c}=n;if(s in c)i=c[s];else{const u=Qi(n);i=c[s]=l.call(null,e),u()}}else i=l;n.ce&&n.ce._setProp(s,i)}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===Es(s))&&(i=!0))}return i}const of=new WeakMap;function gu(t,e,s=!1){const i=s?of:e.propsCache,n=i.get(t);if(n)return n;const r=t.props,o={},a=[];let l=!1;if(!V(t)){const u=h=>{l=!0;const[d,f]=gu(h,e,!0);Ee(o,d),f&&a.push(...f)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!l)return ce(t)&&i.set(t,zs),zs;if(W(r))for(let u=0;u<r.length;u++){const h=ts(r[u]);ka(h)&&(o[h]=ae)}else if(r)for(const u in r){const h=ts(u);if(ka(h)){const d=r[u],f=o[h]=W(d)||V(d)?{type:d}:Ee({},d),g=f.type;let p=!1,m=!0;if(W(g))for(let b=0;b<g.length;++b){const x=g[b],v=V(x)&&x.name;if(v==="Boolean"){p=!0;break}else v==="String"&&(m=!1)}else p=V(g)&&g.name==="Boolean";f[0]=p,f[1]=m,(p||ie(f,"default"))&&a.push(h)}}const c=[o,a];return ce(t)&&i.set(t,c),c}function ka(t){return t[0]!=="$"&&!xi(t)}const Wo=t=>t==="_"||t==="_ctx"||t==="$stable",zo=t=>W(t)?t.map(wt):[wt(t)],af=(t,e,s)=>{if(e._n)return e;const i=xd((...n)=>zo(e(...n)),s);return i._c=!1,i},pu=(t,e,s)=>{const i=t._ctx;for(const n in t){if(Wo(n))continue;const r=t[n];if(V(r))e[n]=af(n,r,i);else if(r!=null){const o=zo(r);e[n]=()=>o}}},mu=(t,e)=>{const s=zo(e);t.slots.default=()=>s},_u=(t,e,s)=>{for(const i in e)(s||!Wo(i))&&(t[i]=e[i])},lf=(t,e,s)=>{const i=t.slots=hu();if(t.vnode.shapeFlag&32){const n=e._;n?(_u(i,e,s),s&&Ac(i,"_",n,!0)):pu(e,i)}else e&&mu(t,e)},cf=(t,e,s)=>{const{vnode:i,slots:n}=t;let r=!0,o=ae;if(i.shapeFlag&32){const a=e._;a?s&&a===1?r=!1:_u(n,e,s):(r=!e.$stable,pu(e,n)),o=e}else e&&(mu(t,e),o={default:1});if(r)for(const a in n)!Wo(a)&&o[a]==null&&delete n[a]},qe=gf;function uf(t){return hf(t)}function hf(t,e){const s=rr();s.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=xt,insertStaticContent:g}=t,p=(_,y,S,A=null,T=null,O=null,M=void 0,R=null,P=!!y.dynamicChildren)=>{if(_===y)return;_&&!ci(_,y)&&(A=sn(_),Se(_,T,O,!0),_=null),y.patchFlag===-2&&(P=!1,y.dynamicChildren=null);const{type:E,ref:F,shapeFlag:D}=y;switch(E){case dr:m(_,y,S,A);break;case ss:b(_,y,S,A);break;case Pr:_==null&&x(y,S,A,M);break;case Oe:Y(_,y,S,A,T,O,M,R,P);break;default:D&1?k(_,y,S,A,T,O,M,R,P):D&6?ve(_,y,S,A,T,O,M,R,P):(D&64||D&128)&&E.process(_,y,S,A,T,O,M,R,P,oi)}F!=null&&T?Ti(F,_&&_.ref,O,y||_,!y):F==null&&_&&_.ref!=null&&Ti(_.ref,null,O,_,!0)},m=(_,y,S,A)=>{if(_==null)i(y.el=a(y.children),S,A);else{const T=y.el=_.el;y.children!==_.children&&c(T,y.children)}},b=(_,y,S,A)=>{_==null?i(y.el=l(y.children||""),S,A):y.el=_.el},x=(_,y,S,A)=>{[_.el,_.anchor]=g(_.children,y,S,A,_.el,_.anchor)},v=({el:_,anchor:y},S,A)=>{let T;for(;_&&_!==y;)T=d(_),i(_,S,A),_=T;i(y,S,A)},w=({el:_,anchor:y})=>{let S;for(;_&&_!==y;)S=d(_),n(_),_=S;n(y)},k=(_,y,S,A,T,O,M,R,P)=>{if(y.type==="svg"?M="svg":y.type==="math"&&(M="mathml"),_==null)C(y,S,A,T,O,M,R,P);else{const E=_.el&&_.el._isVueCE?_.el:null;try{E&&E._beginPatch(),U(_,y,T,O,M,R,P)}finally{E&&E._endPatch()}}},C=(_,y,S,A,T,O,M,R)=>{let P,E;const{props:F,shapeFlag:D,transition:N,dirs:z}=_;if(P=_.el=o(_.type,O,F&&F.is,F),D&8?u(P,_.children):D&16&&j(_.children,P,null,A,T,Cr(_,O),M,R),z&&rs(_,null,A,"created"),I(P,_,_.scopeId,M,A),F){for(const ue in F)ue!=="value"&&!xi(ue)&&r(P,ue,null,F[ue],O,A);"value"in F&&r(P,"value",null,F.value,O),(E=F.onVnodeBeforeMount)&&mt(E,A,_)}z&&rs(_,null,A,"beforeMount");const X=df(T,N);X&&N.beforeEnter(P),i(P,y,S),((E=F&&F.onVnodeMounted)||X||z)&&qe(()=>{E&&mt(E,A,_),X&&N.enter(P),z&&rs(_,null,A,"mounted")},T)},I=(_,y,S,A,T)=>{if(S&&f(_,S),A)for(let O=0;O<A.length;O++)f(_,A[O]);if(T){let O=T.subTree;if(y===O||wu(O.type)&&(O.ssContent===y||O.ssFallback===y)){const M=T.vnode;I(_,M,M.scopeId,M.slotScopeIds,T.parent)}}},j=(_,y,S,A,T,O,M,R,P=0)=>{for(let E=P;E<_.length;E++){const F=_[E]=R?zt(_[E]):wt(_[E]);p(null,F,y,S,A,T,O,M,R)}},U=(_,y,S,A,T,O,M)=>{const R=y.el=_.el;let{patchFlag:P,dynamicChildren:E,dirs:F}=y;P|=_.patchFlag&16;const D=_.props||ae,N=y.props||ae;let z;if(S&&os(S,!1),(z=N.onVnodeBeforeUpdate)&&mt(z,S,y,_),F&&rs(y,_,S,"beforeUpdate"),S&&os(S,!0),(D.innerHTML&&N.innerHTML==null||D.textContent&&N.textContent==null)&&u(R,""),E?K(_.dynamicChildren,E,R,S,A,Cr(y,T),O):M||te(_,y,R,null,S,A,Cr(y,T),O,!1),P>0){if(P&16)q(R,D,N,S,T);else if(P&2&&D.class!==N.class&&r(R,"class",null,N.class,T),P&4&&r(R,"style",D.style,N.style,T),P&8){const X=y.dynamicProps;for(let ue=0;ue<X.length;ue++){const ne=X[ue],De=D[ne],je=N[ne];(je!==De||ne==="value")&&r(R,ne,De,je,T,S)}}P&1&&_.children!==y.children&&u(R,y.children)}else!M&&E==null&&q(R,D,N,S,T);((z=N.onVnodeUpdated)||F)&&qe(()=>{z&&mt(z,S,y,_),F&&rs(y,_,S,"updated")},A)},K=(_,y,S,A,T,O,M)=>{for(let R=0;R<y.length;R++){const P=_[R],E=y[R],F=P.el&&(P.type===Oe||!ci(P,E)||P.shapeFlag&198)?h(P.el):S;p(P,E,F,null,A,T,O,M,!0)}},q=(_,y,S,A,T)=>{if(y!==S){if(y!==ae)for(const O in y)!xi(O)&&!(O in S)&&r(_,O,y[O],null,T,A);for(const O in S){if(xi(O))continue;const M=S[O],R=y[O];M!==R&&O!=="value"&&r(_,O,R,M,T,A)}"value"in S&&r(_,"value",y.value,S.value,T)}},Y=(_,y,S,A,T,O,M,R,P)=>{const E=y.el=_?_.el:a(""),F=y.anchor=_?_.anchor:a("");let{patchFlag:D,dynamicChildren:N,slotScopeIds:z}=y;z&&(R=R?R.concat(z):z),_==null?(i(E,S,A),i(F,S,A),j(y.children||[],S,F,T,O,M,R,P)):D>0&&D&64&&N&&_.dynamicChildren&&_.dynamicChildren.length===N.length?(K(_.dynamicChildren,N,S,T,O,M,R),(y.key!=null||T&&y===T.subTree)&&bu(_,y,!0)):te(_,y,S,F,T,O,M,R,P)},ve=(_,y,S,A,T,O,M,R,P)=>{y.slotScopeIds=R,_==null?y.shapeFlag&512?T.ctx.activate(y,S,A,M,P):Me(y,S,A,T,O,M,P):pe(_,y,P)},Me=(_,y,S,A,T,O,M)=>{const R=_.component=wf(_,A,T);if(nu(_)&&(R.ctx.renderer=oi),Sf(R,!1,M),R.asyncDep){if(T&&T.registerDep(R,Q,M),!_.el){const P=R.subTree=Be(ss);b(null,P,y,S),_.placeholder=P.el}}else Q(R,_,y,S,T,O,M)},pe=(_,y,S)=>{const A=y.component=_.component;if(tf(_,y,S))if(A.asyncDep&&!A.asyncResolved){G(A,y,S);return}else A.next=y,A.update();else y.el=_.el,A.vnode=y},Q=(_,y,S,A,T,O,M)=>{const R=()=>{if(_.isMounted){let{next:D,bu:N,u:z,parent:X,vnode:ue}=_;{const gt=yu(_);if(gt){D&&(D.el=ue.el,G(_,D,M)),gt.asyncDep.then(()=>{_.isUnmounted||R()});return}}let ne=D,De;os(_,!1),D?(D.el=ue.el,G(_,D,M)):D=ue,N&&Tn(N),(De=D.props&&D.props.onVnodeBeforeUpdate)&&mt(De,X,D,ue),os(_,!0);const je=xa(_),ft=_.subTree;_.subTree=je,p(ft,je,h(ft.el),sn(ft),_,T,O),D.el=je.el,ne===null&&sf(_,je.el),z&&qe(z,T),(De=D.props&&D.props.onVnodeUpdated)&&qe(()=>mt(De,X,D,ue),T)}else{let D;const{el:N,props:z}=y,{bm:X,m:ue,parent:ne,root:De,type:je}=_,ft=Oi(y);os(_,!1),X&&Tn(X),!ft&&(D=z&&z.onVnodeBeforeMount)&&mt(D,ne,y),os(_,!0);{De.ce&&De.ce._def.shadowRoot!==!1&&De.ce._injectChildStyle(je);const gt=_.subTree=xa(_);p(null,gt,S,A,_,T,O),y.el=gt.el}if(ue&&qe(ue,T),!ft&&(D=z&&z.onVnodeMounted)){const gt=y;qe(()=>mt(D,ne,gt),T)}(y.shapeFlag&256||ne&&Oi(ne.vnode)&&ne.vnode.shapeFlag&256)&&_.a&&qe(_.a,T),_.isMounted=!0,y=S=A=null}};_.scope.on();const P=_.effect=new Ic(R);_.scope.off();const E=_.update=P.run.bind(P),F=_.job=P.runIfDirty.bind(P);F.i=_,F.id=_.uid,P.scheduler=()=>Bo(F),os(_,!0),E()},G=(_,y,S)=>{y.component=_;const A=_.vnode.props;_.vnode=y,_.next=null,rf(_,y.props,A,S),cf(_,y.children,S),$t(),ma(_),Lt()},te=(_,y,S,A,T,O,M,R,P=!1)=>{const E=_&&_.children,F=_?_.shapeFlag:0,D=y.children,{patchFlag:N,shapeFlag:z}=y;if(N>0){if(N&128){st(E,D,S,A,T,O,M,R,P);return}else if(N&256){Ye(E,D,S,A,T,O,M,R,P);return}}z&8?(F&16&&We(E,T,O),D!==E&&u(S,D)):F&16?z&16?st(E,D,S,A,T,O,M,R,P):We(E,T,O,!0):(F&8&&u(S,""),z&16&&j(D,S,A,T,O,M,R,P))},Ye=(_,y,S,A,T,O,M,R,P)=>{_=_||zs,y=y||zs;const E=_.length,F=y.length,D=Math.min(E,F);let N;for(N=0;N<D;N++){const z=y[N]=P?zt(y[N]):wt(y[N]);p(_[N],z,S,null,T,O,M,R,P)}E>F?We(_,T,O,!0,!1,D):j(y,S,A,T,O,M,R,P,D)},st=(_,y,S,A,T,O,M,R,P)=>{let E=0;const F=y.length;let D=_.length-1,N=F-1;for(;E<=D&&E<=N;){const z=_[E],X=y[E]=P?zt(y[E]):wt(y[E]);if(ci(z,X))p(z,X,S,null,T,O,M,R,P);else break;E++}for(;E<=D&&E<=N;){const z=_[D],X=y[N]=P?zt(y[N]):wt(y[N]);if(ci(z,X))p(z,X,S,null,T,O,M,R,P);else break;D--,N--}if(E>D){if(E<=N){const z=N+1,X=z<F?y[z].el:A;for(;E<=N;)p(null,y[E]=P?zt(y[E]):wt(y[E]),S,X,T,O,M,R,P),E++}}else if(E>N)for(;E<=D;)Se(_[E],T,O,!0),E++;else{const z=E,X=E,ue=new Map;for(E=X;E<=N;E++){const ze=y[E]=P?zt(y[E]):wt(y[E]);ze.key!=null&&ue.set(ze.key,E)}let ne,De=0;const je=N-X+1;let ft=!1,gt=0;const ai=new Array(je);for(E=0;E<je;E++)ai[E]=0;for(E=z;E<=D;E++){const ze=_[E];if(De>=je){Se(ze,T,O,!0);continue}let pt;if(ze.key!=null)pt=ue.get(ze.key);else for(ne=X;ne<=N;ne++)if(ai[ne-X]===0&&ci(ze,y[ne])){pt=ne;break}pt===void 0?Se(ze,T,O,!0):(ai[pt-X]=E+1,pt>=gt?gt=pt:ft=!0,p(ze,y[pt],S,null,T,O,M,R,P),De++)}const ca=ft?ff(ai):zs;for(ne=ca.length-1,E=je-1;E>=0;E--){const ze=X+E,pt=y[ze],ua=y[ze+1],ha=ze+1<F?ua.el||vu(ua):A;ai[E]===0?p(null,pt,S,ha,T,O,M,R,P):ft&&(ne<0||E!==ca[ne]?Xe(pt,S,ha,2):ne--)}}},Xe=(_,y,S,A,T=null)=>{const{el:O,type:M,transition:R,children:P,shapeFlag:E}=_;if(E&6){Xe(_.component.subTree,y,S,A);return}if(E&128){_.suspense.move(y,S,A);return}if(E&64){M.move(_,y,S,oi);return}if(M===Oe){i(O,y,S);for(let D=0;D<P.length;D++)Xe(P[D],y,S,A);i(_.anchor,y,S);return}if(M===Pr){v(_,y,S);return}if(A!==2&&E&1&&R)if(A===0)R.beforeEnter(O),i(O,y,S),qe(()=>R.enter(O),T);else{const{leave:D,delayLeave:N,afterLeave:z}=R,X=()=>{_.ctx.isUnmounted?n(O):i(O,y,S)},ue=()=>{O._isLeaving&&O[Cd](!0),D(O,()=>{X(),z&&z()})};N?N(O,X,ue):ue()}else i(O,y,S)},Se=(_,y,S,A=!1,T=!1)=>{const{type:O,props:M,ref:R,children:P,dynamicChildren:E,shapeFlag:F,patchFlag:D,dirs:N,cacheIndex:z}=_;if(D===-2&&(T=!1),R!=null&&($t(),Ti(R,null,S,_,!0),Lt()),z!=null&&(y.renderCache[z]=void 0),F&256){y.ctx.deactivate(_);return}const X=F&1&&N,ue=!Oi(_);let ne;if(ue&&(ne=M&&M.onVnodeBeforeUnmount)&&mt(ne,y,_),F&6)ns(_.component,S,A);else{if(F&128){_.suspense.unmount(S,A);return}X&&rs(_,null,y,"beforeUnmount"),F&64?_.type.remove(_,y,S,oi,A):E&&!E.hasOnce&&(O!==Oe||D>0&&D&64)?We(E,y,S,!1,!0):(O===Oe&&D&384||!T&&F&16)&&We(P,y,S),A&&Ut(_)}(ue&&(ne=M&&M.onVnodeUnmounted)||X)&&qe(()=>{ne&&mt(ne,y,_),X&&rs(_,null,y,"unmounted")},S)},Ut=_=>{const{type:y,el:S,anchor:A,transition:T}=_;if(y===Oe){Tt(S,A);return}if(y===Pr){w(_);return}const O=()=>{n(S),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(_.shapeFlag&1&&T&&!T.persisted){const{leave:M,delayLeave:R}=T,P=()=>M(S,O);R?R(_.el,O,P):P()}else O()},Tt=(_,y)=>{let S;for(;_!==y;)S=d(_),n(_),_=S;n(y)},ns=(_,y,S)=>{const{bum:A,scope:T,job:O,subTree:M,um:R,m:P,a:E}=_;Ta(P),Ta(E),A&&Tn(A),T.stop(),O&&(O.flags|=8,Se(M,_,y,S)),R&&qe(R,y),qe(()=>{_.isUnmounted=!0},y)},We=(_,y,S,A=!1,T=!1,O=0)=>{for(let M=O;M<_.length;M++)Se(_[M],y,S,A,T)},sn=_=>{if(_.shapeFlag&6)return sn(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const y=d(_.anchor||_.el),S=y&&y[Ed];return S?d(S):y};let xr=!1;const la=(_,y,S)=>{let A;_==null?y._vnode&&(Se(y._vnode,null,null,!0),A=y._vnode.component):p(y._vnode||null,_,y,null,null,null,S),y._vnode=_,xr||(xr=!0,ma(A),Xc(),xr=!1)},oi={p,um:Se,m:Xe,r:Ut,mt:Me,mc:j,pc:te,pbc:K,n:sn,o:t};return{render:la,hydrate:void 0,createApp:Jd(la)}}function Cr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function os({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function df(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function bu(t,e,s=!1){const i=t.children,n=e.children;if(W(i)&&W(n))for(let r=0;r<i.length;r++){const o=i[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=zt(n[r]),a.el=o.el),!s&&a.patchFlag!==-2&&bu(o,a)),a.type===dr&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=r+(t.type===Oe?1:0)),a.type===ss&&!a.el&&(a.el=o.el)}}function ff(t){const e=t.slice(),s=[0];let i,n,r,o,a;const l=t.length;for(i=0;i<l;i++){const c=t[i];if(c!==0){if(n=s[s.length-1],t[n]<c){e[i]=n,s.push(i);continue}for(r=0,o=s.length-1;r<o;)a=r+o>>1,t[s[a]]<c?r=a+1:o=a;c<t[s[r]]&&(r>0&&(e[i]=s[r-1]),s[r]=i)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=e[o];return s}function yu(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:yu(e)}function Ta(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function vu(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?vu(e.subTree):null}const wu=t=>t.__isSuspense;function gf(t,e){e&&e.pendingBranch?W(t)?e.effects.push(...t):e.effects.push(t):wd(t)}const Oe=Symbol.for("v-fgt"),dr=Symbol.for("v-txt"),ss=Symbol.for("v-cmt"),Pr=Symbol.for("v-stc"),Ai=[];let Je=null;function oe(t=!1){Ai.push(Je=t?null:[])}function pf(){Ai.pop(),Je=Ai[Ai.length-1]||null}let Li=1;function Nn(t,e=!1){Li+=t,t<0&&Je&&e&&(Je.hasOnce=!0)}function xu(t){return t.dynamicChildren=Li>0?Je||zs:null,pf(),Li>0&&Je&&Je.push(t),t}function ge(t,e,s,i,n,r){return xu($(t,e,s,i,n,r,!0))}function Fn(t,e,s,i,n){return xu(Be(t,e,s,i,n,!0))}function Bn(t){return t?t.__v_isVNode===!0:!1}function ci(t,e){return t.type===e.type&&t.key===e.key}const Su=({key:t})=>t??null,An=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?ye(t)||Ce(t)||V(t)?{i:Ze,r:t,k:e,f:!!s}:t:null);function $(t,e=null,s=null,i=0,n=null,r=t===Oe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Su(e),ref:e&&An(e),scopeId:Zc,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ze};return a?(Vo(l,s),r&128&&t.normalize(l)):s&&(l.shapeFlag|=ye(s)?8:16),Li>0&&!o&&Je&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Je.push(l),l}const Be=mf;function mf(t,e=null,s=null,i=0,n=null,r=!1){if((!t||t===Ud)&&(t=ss),Bn(t)){const a=ei(t,e,!0);return s&&Vo(a,s),Li>0&&!r&&Je&&(a.shapeFlag&6?Je[Je.indexOf(t)]=a:Je.push(a)),a.patchFlag=-2,a}if(Ef(t)&&(t=t.__vccOpts),e){e=_f(e);let{class:a,style:l}=e;a&&!ye(a)&&(e.class=jt(a)),ce(l)&&(Yi(l)&&!W(l)&&(l=Ee({},l)),e.style=Ro(l))}const o=ye(t)?1:wu(t)?128:Ad(t)?64:ce(t)?4:V(t)?2:0;return $(t,e,s,i,n,o,r,!0)}function _f(t){return t?Yi(t)||du(t)?Ee({},t):t:null}function ei(t,e,s=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:a,transition:l}=t,c=e?bf(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Su(c),ref:e&&e.ref?s&&r?W(r)?r.concat(An(e)):[r,An(e)]:An(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Oe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ei(t.ssContent),ssFallback:t.ssFallback&&ei(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&i&&Uo(u,l.clone(u)),u}function ku(t=" ",e=0){return Be(dr,null,t,e)}function Gs(t="",e=!1){return e?(oe(),Fn(ss,null,t)):Be(ss,null,t)}function wt(t){return t==null||typeof t=="boolean"?Be(ss):W(t)?Be(Oe,null,t.slice()):Bn(t)?zt(t):Be(dr,null,String(t))}function zt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ei(t)}function Vo(t,e){let s=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(W(e))s=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),Vo(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!du(e)?e._ctx=Ze:n===3&&Ze&&(Ze.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else V(e)?(e={default:e,_ctx:Ze},s=32):(e=String(e),i&64?(s=16,e=[ku(e)]):s=8);t.children=e,t.shapeFlag|=s}function bf(...t){const e={};for(let s=0;s<t.length;s++){const i=t[s];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=jt([e.class,i.class]));else if(n==="style")e.style=Ro([e.style,i.style]);else if(tr(n)){const r=e[n],o=i[n];o&&r!==o&&!(W(r)&&r.includes(o))&&(e[n]=r?[].concat(r,o):o)}else n!==""&&(e[n]=i[n])}return e}function mt(t,e,s,i=null){kt(t,e,7,[s,i])}const yf=lu();let vf=0;function wf(t,e,s){const i=t.type,n=(e?e.appContext:t.appContext)||yf,r={uid:vf++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gu(i,n),emitsOptions:cu(i,n),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:i.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Xd.bind(null,r),t.ce&&t.ce(r),r}let Ie=null;const xf=()=>Ie||Ze;let Un,lo;{const t=rr(),e=(s,i)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(i),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};Un=e("__VUE_INSTANCE_SETTERS__",s=>Ie=s),lo=e("__VUE_SSR_SETTERS__",s=>Ni=s)}const Qi=t=>{const e=Ie;return Un(t),t.scope.on(),()=>{t.scope.off(),Un(e)}},Oa=()=>{Ie&&Ie.scope.off(),Un(null)};function Tu(t){return t.vnode.shapeFlag&4}let Ni=!1;function Sf(t,e=!1,s=!1){e&&lo(e);const{props:i,children:n}=t.vnode,r=Tu(t);nf(t,i,r,e),lf(t,n,s||e);const o=r?kf(t,e):void 0;return e&&lo(!1),o}function kf(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Hd);const{setup:i}=s;if(i){$t();const n=t.setupContext=i.length>1?Of(t):null,r=Qi(t),o=Xi(i,t,0,[t.props,n]),a=kc(o);if(Lt(),r(),(a||t.sp)&&!Oi(t)&&iu(t),a){if(o.then(Oa,Oa),e)return o.then(l=>{Ea(t,l)}).catch(l=>{lr(l,t,0)});t.asyncDep=o}else Ea(t,o)}else Ou(t)}function Ea(t,e,s){V(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ce(e)&&(t.setupState=Gc(e)),Ou(t)}function Ou(t,e,s){const i=t.type;t.render||(t.render=i.render||xt);{const n=Qi(t);$t();try{Wd(t)}finally{Lt(),n()}}}const Tf={get(t,e){return Ae(t,"get",""),t[e]}};function Of(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Tf),slots:t.slots,emit:t.emit,expose:e}}function fr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Gc(dd(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Ei)return Ei[s](t)},has(e,s){return s in e||s in Ei}})):t.proxy}function Ef(t){return V(t)&&"__vccOpts"in t}const at=(t,e)=>md(t,e,Ni);function co(t,e,s){try{Nn(-1);const i=arguments.length;return i===2?ce(e)&&!W(e)?Bn(e)?Be(t,null,[e]):Be(t,e):Be(t,null,e):(i>3?s=Array.prototype.slice.call(arguments,2):i===3&&Bn(s)&&(s=[s]),Be(t,e,s))}finally{Nn(1)}}const Eu="3.5.27";let uo;const Aa=typeof window<"u"&&window.trustedTypes;if(Aa)try{uo=Aa.createPolicy("vue",{createHTML:t=>t})}catch{}const Au=uo?t=>uo.createHTML(t):t=>t,Af="http://www.w3.org/2000/svg",Cf="http://www.w3.org/1998/Math/MathML",Pt=typeof document<"u"?document:null,Ca=Pt&&Pt.createElement("template"),Pf={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,i)=>{const n=e==="svg"?Pt.createElementNS(Af,t):e==="mathml"?Pt.createElementNS(Cf,t):s?Pt.createElement(t,{is:s}):Pt.createElement(t);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>Pt.createTextNode(t),createComment:t=>Pt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Pt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,i,n,r){const o=s?s.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===r||!(n=n.nextSibling)););else{Ca.innerHTML=Au(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const a=Ca.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Rf=Symbol("_vtc");function If(t,e,s){const i=t[Rf];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Pa=Symbol("_vod"),Mf=Symbol("_vsh"),Df=Symbol(""),jf=/(?:^|;)\s*display\s*:/;function $f(t,e,s){const i=t.style,n=ye(s);let r=!1;if(s&&!n){if(e)if(ye(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&Cn(i,a,"")}else for(const o in e)s[o]==null&&Cn(i,o,"");for(const o in s)o==="display"&&(r=!0),Cn(i,o,s[o])}else if(n){if(e!==s){const o=i[Df];o&&(s+=";"+o),i.cssText=s,r=jf.test(s)}}else e&&t.removeAttribute("style");Pa in t&&(t[Pa]=r?i.display:"",t[Mf]&&(i.display="none"))}const Ra=/\s*!important$/;function Cn(t,e,s){if(W(s))s.forEach(i=>Cn(t,e,i));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const i=Lf(t,e);Ra.test(s)?t.setProperty(Es(i),s.replace(Ra,""),"important"):t[i]=s}}const Ia=["Webkit","Moz","ms"],Rr={};function Lf(t,e){const s=Rr[e];if(s)return s;let i=ts(e);if(i!=="filter"&&i in t)return Rr[e]=i;i=Ec(i);for(let n=0;n<Ia.length;n++){const r=Ia[n]+i;if(r in t)return Rr[e]=r}return e}const Ma="http://www.w3.org/1999/xlink";function Da(t,e,s,i,n,r=Hh(e)){i&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Ma,e.slice(6,e.length)):t.setAttributeNS(Ma,e,s):s==null||r&&!Cc(s)?t.removeAttribute(e):t.setAttribute(e,r?"":St(s)?String(s):s)}function ja(t,e,s,i,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Au(s):s);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=Cc(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function ms(t,e,s,i){t.addEventListener(e,s,i)}function Nf(t,e,s,i){t.removeEventListener(e,s,i)}const $a=Symbol("_vei");function Ff(t,e,s,i,n=null){const r=t[$a]||(t[$a]={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=Bf(e);if(i){const c=r[e]=Wf(i,n);ms(t,a,c,l)}else o&&(Nf(t,a,o,l),r[e]=void 0)}}const La=/(?:Once|Passive|Capture)$/;function Bf(t){let e;if(La.test(t)){e={};let i;for(;i=t.match(La);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Es(t.slice(2)),e]}let Ir=0;const Uf=Promise.resolve(),Hf=()=>Ir||(Uf.then(()=>Ir=0),Ir=Date.now());function Wf(t,e){const s=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=s.attached)return;kt(zf(i,s.value),e,5,[i])};return s.value=t,s.attached=Hf(),s}function zf(t,e){if(W(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const Na=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Vf=(t,e,s,i,n,r)=>{const o=n==="svg";e==="class"?If(t,i,o):e==="style"?$f(t,s,i):tr(e)?Ao(e)||Ff(t,e,s,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):qf(t,e,i,o))?(ja(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Da(t,e,i,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ye(i))?ja(t,ts(e),i,r,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Da(t,e,i,o))};function qf(t,e,s,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&Na(e)&&V(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Na(e)&&ye(s)?!1:e in t}const Hn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return W(e)?s=>Tn(e,s):e};function Kf(t){t.target.composing=!0}function Fa(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Js=Symbol("_assign");function Ba(t,e,s){return e&&(t=t.trim()),s&&(t=nr(t)),t}const Ns={created(t,{modifiers:{lazy:e,trim:s,number:i}},n){t[Js]=Hn(n);const r=i||n.props&&n.props.type==="number";ms(t,e?"change":"input",o=>{o.target.composing||t[Js](Ba(t.value,s,r))}),(s||r)&&ms(t,"change",()=>{t.value=Ba(t.value,s,r)}),e||(ms(t,"compositionstart",Kf),ms(t,"compositionend",Fa),ms(t,"change",Fa))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:i,trim:n,number:r}},o){if(t[Js]=Hn(o),t.composing)return;const a=(r||t.type==="number")&&!/^0\d/.test(t.value)?nr(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(i&&e===s||n&&t.value.trim()===l)||(t.value=l))}},_i={deep:!0,created(t,{value:e,modifiers:{number:s}},i){const n=sr(e);ms(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?nr(Wn(o)):Wn(o));t[Js](t.multiple?n?new Set(r):r:r[0]),t._assigning=!0,Fo(()=>{t._assigning=!1})}),t[Js]=Hn(i)},mounted(t,{value:e}){Ua(t,e)},beforeUpdate(t,e,s){t[Js]=Hn(s)},updated(t,{value:e}){t._assigning||Ua(t,e)}};function Ua(t,e){const s=t.multiple,i=W(e);if(!(s&&!i&&!sr(e))){for(let n=0,r=t.options.length;n<r;n++){const o=t.options[n],a=Wn(o);if(s)if(i){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=zh(e,a)>-1}else o.selected=e.has(a);else if(or(Wn(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Wn(t){return"_value"in t?t._value:t.value}const Gf=Ee({patchProp:Vf},Pf);let Ha;function Jf(){return Ha||(Ha=uf(Gf))}const Yf=((...t)=>{const e=Jf().createApp(...t),{mount:s}=e;return e.mount=i=>{const n=Qf(i);if(!n)return;const r=e._component;!V(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,Xf(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e});function Xf(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Qf(t){return ye(t)?document.querySelector(t):t}const qo=(t,e)=>{const s=t.__vccOpts||t;for(const[i,n]of e)s[i]=n;return s},Zf={class:"card"},eg=["value"],tg=["value"],sg=["value"],ig=["value"],ng={key:0,class:"error-text"},rg=["disabled"],og={__name:"GoalSetting",props:{goal:Object},emits:["save"],setup(t,{emit:e}){const s=t,i=e,n=Array.from({length:15},(f,g)=>2e3+g*100),r=Array.from({length:31},(f,g)=>g),o=Array.from({length:71},(f,g)=>g),a=at(()=>Math.round(s.goal.calorie*s.goal.ratioProtein/100/4)),l=at(()=>Math.round(s.goal.calorie*s.goal.ratioFat/100/9)),c=at(()=>Math.round(s.goal.calorie*s.goal.ratioCarb/100/4)),u=at(()=>Number(s.goal.ratioProtein)+Number(s.goal.ratioFat)+Number(s.goal.ratioCarb)),h=at(()=>u.value>100),d=()=>{h.value||i("save")};return(f,g)=>(oe(),ge("div",Zf,[g[4]||(g[4]=$("label",null,"Calories",-1)),ot($("select",{"onUpdate:modelValue":g[0]||(g[0]=p=>t.goal.calorie=p)},[(oe(!0),ge(Oe,null,vs(ys(n),p=>(oe(),ge("option",{key:p,value:p},J(p)+" kcal",9,eg))),128))],512),[[_i,t.goal.calorie,void 0,{number:!0}]]),g[5]||(g[5]=$("label",null,"P (%)",-1)),ot($("select",{"onUpdate:modelValue":g[1]||(g[1]=p=>t.goal.ratioProtein=p),class:jt({error:h.value})},[(oe(!0),ge(Oe,null,vs(ys(r),p=>(oe(),ge("option",{key:p,value:p},J(p)+" %",9,tg))),128))],2),[[_i,t.goal.ratioProtein,void 0,{number:!0}]]),g[6]||(g[6]=$("label",null,"F (%)",-1)),ot($("select",{"onUpdate:modelValue":g[2]||(g[2]=p=>t.goal.ratioFat=p),class:jt({error:h.value})},[(oe(!0),ge(Oe,null,vs(ys(r),p=>(oe(),ge("option",{key:p,value:p},J(p)+" %",9,sg))),128))],2),[[_i,t.goal.ratioFat,void 0,{number:!0}]]),g[7]||(g[7]=$("label",null,"C (%)",-1)),ot($("select",{"onUpdate:modelValue":g[3]||(g[3]=p=>t.goal.ratioCarb=p),class:jt({error:h.value})},[(oe(!0),ge(Oe,null,vs(ys(o),p=>(oe(),ge("option",{key:p,value:p},J(p)+" %",9,ig))),128))],2),[[_i,t.goal.ratioCarb,void 0,{number:!0}]]),$("p",null,": "+J(u.value)+" %",1),h.value?(oe(),ge("p",ng," 100%")):Gs("",!0),g[8]||(g[8]=$("p",null,"---  ---",-1)),$("p",null,"Protein: "+J(a.value)+" g",1),$("p",null,"Fat: "+J(l.value)+" g",1),$("p",null,"Carb: "+J(c.value)+" g",1),$("p",null,"Carb: "+J(c.value)+" g",1),$("button",{onClick:d,disabled:h.value},"",8,rg)]))}},ag=qo(og,[["__scopeId","data-v-9cfb4e2b"]]);function gr(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(s[i[n]]=t[i[n]]);return s}function lg(t,e,s,i){function n(r){return r instanceof s?r:new s(function(o){o(r)})}return new(s||(s=Promise))(function(r,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?r(u.value):n(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}const cg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Ko extends Error{constructor(e,s="FunctionsError",i){super(e),this.name=s,this.context=i}}class ug extends Ko{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Wa extends Ko{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class za extends Ko{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ho;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ho||(ho={}));class hg{constructor(e,{headers:s={},customFetch:i,region:n=ho.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=cg(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return lg(this,arguments,void 0,function*(s,i={}){var n;let r,o;try{const{headers:a,method:l,body:c,signal:u,timeout:h}=i;let d={},{region:f}=i;f||(f=this.region);const g=new URL(`${this.url}/${s}`);f&&f!=="any"&&(d["x-region"]=f,g.searchParams.set("forceFunctionRegion",f));let p;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",p=c):typeof c=="string"?(d["Content-Type"]="text/plain",p=c):typeof FormData<"u"&&c instanceof FormData?p=c:(d["Content-Type"]="application/json",p=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?p=JSON.stringify(c):p=c;let m=u;h&&(o=new AbortController,r=setTimeout(()=>o.abort(),h),u?(m=o.signal,u.addEventListener("abort",()=>o.abort())):m=o.signal);const b=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:p,signal:m}).catch(k=>{throw new ug(k)}),x=b.headers.get("x-relay-error");if(x&&x==="true")throw new Wa(b);if(!b.ok)throw new za(b);let v=((n=b.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),w;return v==="application/json"?w=yield b.json():v==="application/octet-stream"||v==="application/pdf"?w=yield b.blob():v==="text/event-stream"?w=b:v==="multipart/form-data"?w=yield b.formData():w=yield b.text(),{data:w,error:null,response:b}}catch(a){return{data:null,error:a,response:a instanceof za||a instanceof Wa?a.context:void 0}}finally{r&&clearTimeout(r)}})}}var dg=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},fg=class{constructor(t){var e,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(s=t.isMaybeSingle)!==null&&s!==void 0?s:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let n=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async r=>{let o=null,a=null,l=null,c=r.status,u=r.statusText;if(r.ok){var h,d;if(s.method!=="HEAD"){var f;const b=await r.text();b===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((f=s.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=b:a=JSON.parse(b))}const p=(h=s.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),m=(d=r.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");p&&m&&m.length>1&&(l=parseInt(m[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var g;const p=await r.text();try{o=JSON.parse(p),Array.isArray(o)&&r.status===404&&(a=[],o=null,c=200,u="OK")}catch{r.status===404&&p===""?(c=204,u="No Content"):o={message:p}}if(o&&s.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&s.shouldThrowOnError)throw new dg(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(r=>{var o;let a="";const l=r?.cause;if(l){var c,u,h,d;const g=(c=l?.message)!==null&&c!==void 0?c:"",p=(u=l?.code)!==null&&u!==void 0?u:"";a=`${(h=r?.name)!==null&&h!==void 0?h:"FetchError"}: ${r?.message}`,a+=`

Caused by: ${(d=l?.name)!==null&&d!==void 0?d:"Error"}: ${g}`,p&&(a+=` (${p})`),l?.stack&&(a+=`
${l.stack}`)}else{var f;a=(f=r?.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(o=r?.name)!==null&&o!==void 0?o:"FetchError"}: ${r?.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(t,e)}returns(){return this}overrideTypes(){return this}},gg=class extends fg{select(t){let e=!1;const s=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:s,foreignTable:i,referencedTable:n=i}={}){const r=n?`${n}.order`:"order",o=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:s=e}={}){const i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:s,referencedTable:i=s}={}){const n=typeof i>"u"?"offset":`${i}.offset`,r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${t}`),this.url.searchParams.set(r,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:s=!1,buffers:i=!1,wal:n=!1,format:r="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,s?"settings":null,i?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${r}; for="${l}"; options=${a};`),r==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Va=new RegExp("[,()]");var Fs=class extends gg{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const s=Array.from(new Set(e)).map(i=>typeof i=="string"&&Va.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}notIn(t,e){const s=Array.from(new Set(e)).map(i=>typeof i=="string"&&Va.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`not.in.(${s})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:s,type:i}={}){let n="";i==="plain"?n="pl":i==="phrase"?n="ph":i==="websearch"&&(n="w");const r=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${n}fts${r}.${e}`),this}match(t){return Object.entries(t).forEach(([e,s])=>{this.url.searchParams.append(e,`eq.${s}`)}),this}not(t,e,s){return this.url.searchParams.append(t,`not.${e}.${s}`),this}or(t,{foreignTable:e,referencedTable:s=e}={}){const i=s?`${s}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,s){return this.url.searchParams.append(t,`${e}.${s}`),this}},pg=class{constructor(t,{headers:e={},schema:s,fetch:i}){this.url=t,this.headers=new Headers(e),this.schema=s,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:s=!1,count:i}=e??{},n=s?"HEAD":"GET";let r=!1;const o=(t??"*").split("").map(c=>/\s/.test(c)&&!r?"":(c==='"'&&(r=!r),c)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),i&&l.append("Prefer",`count=${i}`),new Fs({method:n,url:a,headers:l,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:s=!0}={}){var i;const n="POST",{url:r,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),s||o.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);r.searchParams.set("columns",l.join(","))}}return new Fs({method:n,url:r,headers:o,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:s=!1,count:i,defaultToNull:n=!0}={}){var r;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),i&&l.append("Prefer",`count=${i}`),n||l.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);a.searchParams.set("columns",u.join(","))}}return new Fs({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}update(t,{count:e}={}){var s;const i="PATCH",{url:n,headers:r}=this.cloneRequestState();return e&&r.append("Prefer",`count=${e}`),new Fs({method:i,url:n,headers:r,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:t}={}){var e;const s="DELETE",{url:i,headers:n}=this.cloneRequestState();return t&&n.append("Prefer",`count=${t}`),new Fs({method:s,url:i,headers:n,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},mg=class Cu{constructor(e,{headers:s={},schema:i,fetch:n}={}){this.url=e,this.headers=new Headers(s),this.schemaName=i,this.fetch=n}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new pg(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Cu(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:i=!1,get:n=!1,count:r}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;const u=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(u)),h=i&&Object.values(s).some(u);h?(a="POST",c=s):i||n?(a=i?"HEAD":"GET",Object.entries(s).filter(([f,g])=>g!==void 0).map(([f,g])=>[f,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([f,g])=>{l.searchParams.append(f,g)})):(a="POST",c=s);const d=new Headers(this.headers);return h?d.set("Prefer",r?`count=${r},return=minimal`:"return=minimal"):r&&d.set("Prefer",`count=${r}`),new Fs({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class _g{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const i=s.versions;if(i&&i.node){const n=i.node,r=parseInt(n.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const i=this.getWebSocketConstructor();return new i(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const bg="2.93.3",yg=`realtime-js/${bg}`,vg="1.0.0",Pu="2.0.0",qa=Pu,fo=1e4,wg=1e3,xg=100;var Vt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Vt||(Vt={}));var we;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(we||(we={}));var rt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(rt||(rt={}));var go;(function(t){t.websocket="websocket"})(go||(go={}));var _s;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(_s||(_s={}));class Sg{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,s){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return s(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var s;return this._isArrayBuffer((s=e.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var s,i;const n=(i=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(e){var s,i;const n=(i=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:{},o=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,s,i){var n,r;const o=e.topic,a=(n=e.ref)!==null&&n!==void 0?n:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+h.length,f=new ArrayBuffer(this.HEADER_LENGTH+d);let g=new DataView(f),p=0;g.setUint8(p++,this.KINDS.userBroadcastPush),g.setUint8(p++,l.length),g.setUint8(p++,a.length),g.setUint8(p++,o.length),g.setUint8(p++,c.length),g.setUint8(p++,h.length),g.setUint8(p++,s),Array.from(l,b=>g.setUint8(p++,b.charCodeAt(0))),Array.from(a,b=>g.setUint8(p++,b.charCodeAt(0))),Array.from(o,b=>g.setUint8(p++,b.charCodeAt(0))),Array.from(c,b=>g.setUint8(p++,b.charCodeAt(0))),Array.from(h,b=>g.setUint8(p++,b.charCodeAt(0)));var m=new Uint8Array(f.byteLength+i.byteLength);return m.set(new Uint8Array(f),0),m.set(new Uint8Array(i),f.byteLength),m.buffer}decode(e,s){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return s(i)}if(typeof e=="string"){const i=JSON.parse(e),[n,r,o,a,l]=i;return s({join_ref:n,ref:r,topic:o,event:a,payload:l})}return s({})}_binaryDecode(e){const s=new DataView(e),i=s.getUint8(0),n=new TextDecoder;if(i===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,s,n)}_decodeUserBroadcast(e,s,i){const n=s.getUint8(1),r=s.getUint8(2),o=s.getUint8(3),a=s.getUint8(4);let l=this.HEADER_LENGTH+4;const c=i.decode(e.slice(l,l+n));l=l+n;const u=i.decode(e.slice(l,l+r));l=l+r;const h=i.decode(e.slice(l,l+o));l=l+o;const d=e.slice(l,e.byteLength),f=a===this.JSON_ENCODING?JSON.parse(i.decode(d)):d,g={type:this.BROADCAST_EVENT,event:u,payload:f};return o>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var s;return e instanceof ArrayBuffer||((s=e?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(e,s){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>s.includes(i)))}}class Ru{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var he;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(he||(he={}));const Ka=(t,e,s={})=>{var i;const n=(i=s.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((r,o)=>(r[o]=kg(o,t,e,n),r),{}):{}},kg=(t,e,s,i)=>{const n=e.find(a=>a.name===t),r=n?.type,o=s[t];return r&&!i.includes(r)?Iu(r,o):po(o)},Iu=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Ag(e,s)}switch(t){case he.bool:return Tg(e);case he.float4:case he.float8:case he.int2:case he.int4:case he.int8:case he.numeric:case he.oid:return Og(e);case he.json:case he.jsonb:return Eg(e);case he.timestamp:return Cg(e);case he.abstime:case he.date:case he.daterange:case he.int4range:case he.int8range:case he.money:case he.reltime:case he.text:case he.time:case he.timestamptz:case he.timetz:case he.tsrange:case he.tstzrange:return po(e);default:return po(e)}},po=t=>t,Tg=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Og=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Eg=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Ag=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,i=t[s];if(t[0]==="{"&&i==="}"){let r;const o=t.slice(1,s);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>Iu(e,a))}return t},Cg=t=>typeof t=="string"?t.replace(" ","T"):t,Mu=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Mr{constructor(e,s,i={},n=fo){this.channel=e,this.event=s,this.payload=i,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var i;return this._hasReceived(e)&&s((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ga;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ga||(Ga={}));class Ci{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},n=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ci.syncState(this.state,n,r,o),this.pendingDiffs.forEach(l=>{this.state=Ci.syncDiff(this.state,l,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},n=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ci.syncDiff(this.state,n,r,o),a())}),this.onJoin((n,r,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:r,newPresences:o})}),this.onLeave((n,r,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,i,n){const r=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(r,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=r[c];if(h){const d=u.map(m=>m.presence_ref),f=h.map(m=>m.presence_ref),g=u.filter(m=>f.indexOf(m.presence_ref)<0),p=h.filter(m=>d.indexOf(m.presence_ref)<0);g.length>0&&(a[c]=g),p.length>0&&(l[c]=p)}else a[c]=u}),this.syncDiff(r,{joins:a,leaves:l},i,n)}static syncDiff(e,s,i,n){const{joins:r,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return i||(i=()=>{}),n||(n=()=>{}),this.map(r,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(f=>f.presence_ref),d=u.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}i(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,n(a,c,l),c.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(i=>s(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,i)=>{const n=e[i];return"metas"in n?s[i]=n.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):s[i]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ja;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ja||(Ja={}));var Pi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Pi||(Pi={}));var Rt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Rt||(Rt={}));class Hs{constructor(e,s={config:{}},i){var n,r;if(this.topic=e,this.params=s,this.socket=i,this.bindings={},this.state=we.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Mr(this,rt.join,this.params,this.timeout),this.rejoinTimer=new Ru(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=we.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=we.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rt.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Ci(this),this.broadcastEndpointURL=Mu(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((r=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||r===void 0)&&r.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var i,n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==we.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(n=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(f=>f.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[Pi.PRESENCE]&&this.bindings[Pi.PRESENCE].length>0||((r=this.params.config.presence)===null||r===void 0?void 0:r.enabled)===!0,h={},d={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e?.(Rt.CHANNEL_ERROR,f)),this._onClose(()=>e?.(Rt.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){e?.(Rt.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(g=p?.length)!==null&&g!==void 0?g:0,b=[];for(let x=0;x<m;x++){const v=p[x],{filter:{event:w,schema:k,table:C,filter:I}}=v,j=f&&f[x];if(j&&j.event===w&&Hs.isFilterValueEqual(j.schema,k)&&Hs.isFilterValueEqual(j.table,C)&&Hs.isFilterValueEqual(j.filter,I))b.push(Object.assign(Object.assign({},v),{id:j.id}));else{this.unsubscribe(),this.state=we.errored,e?.(Rt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(Rt.SUBSCRIBED);return}}).receive("error",f=>{this.state=we.errored,e?.(Rt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.(Rt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,i){return this.state===we.joined&&e===Pi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,s,i)}async httpSend(e,s,i={}){var n;if(s==null)return Promise.reject("Payload is required for httpSend()");const r={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(r.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:r,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=i.timeout)!==null&&n!==void 0?n:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,s={}){var i,n;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:r,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,l;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&r("ok"),c.receive("ok",()=>r("ok")),c.receive("error",()=>r("error")),c.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=we.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(n=>{i=new Mr(this,rt.leave,{},e),i.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=we.closed,this.bindings={}}async _fetchWithTimeout(e,s,i){const n=new AbortController,r=setTimeout(()=>n.abort(),i),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(r),o}_push(e,s,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Mr(this,e,s,i);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>xg){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,i){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,i){var n,r;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=rt;if(i&&[a,l,c,u].indexOf(o)>=0&&i!==this._joinRef())return;let d=this._onMessage(o,s,i);if(s&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var g,p,m;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((m=(p=f.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(d,i)):(r=this.bindings[o])===null||r===void 0||r.filter(f=>{var g,p,m,b,x,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const w=f.id,k=(g=f.filter)===null||g===void 0?void 0:g.event;return w&&((p=s.ids)===null||p===void 0?void 0:p.includes(w))&&(k==="*"||k?.toLocaleLowerCase()===((m=s.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const w=(x=(b=f?.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return w==="*"||w===((v=s?.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const g=d.data,{schema:p,table:m,commit_timestamp:b,type:x,errors:v}=g;d=Object.assign(Object.assign({},{schema:p,table:m,commit_timestamp:b,eventType:x,new:{},old:{},errors:v}),this._getPayloadRecords(g))}f.callback(d,i)})}_isClosed(){return this.state===we.closed}_isJoined(){return this.state===we.joined}_isJoining(){return this.state===we.joining}_isLeaving(){return this.state===we.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,i){const n=e.toLocaleLowerCase(),r={type:n,filter:s,callback:i};return this.bindings[n]?this.bindings[n].push(r):this.bindings[n]=[r],this}_off(e,s){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(n=>{var r;return!(((r=n.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===i&&Hs.isEqual(n.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const i in e)if(e[i]!==s[i])return!1;return!0}static isFilterValueEqual(e,s){return(e??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rt.close,{},e)}_onError(e){this._on(rt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=we.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Ka(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Ka(e.columns,e.old_record)),s}}const Dr=()=>{},an={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Pg=[1e3,2e3,5e3,1e4],Rg=1e4,Ig=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Mg{constructor(e,s){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fo,this.transport=null,this.heartbeatIntervalMs=an.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dr,this.ref=0,this.reconnectTimer=null,this.vsn=qa,this.logger=Dr,this.conn=null,this.sendBuffer=[],this.serializer=new Sg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),!(!((i=s?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${go.websocket}`,this.httpEndpoint=Mu(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_g.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,i){this.logger(e,s,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Vt.connecting:return _s.Connecting;case Vt.open:return _s.Open;case Vt.closing:return _s.Closing;default:return _s.Closed}}isConnected(){return this.connectionState()===_s.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const i=`realtime:${e}`,n=this.getChannels().find(r=>r.topic===i);if(n)return n;{const r=new Hs(`realtime:${e}`,s,this);return this.channels.push(r),r}}push(e){const{topic:s,event:i,payload:n,ref:r}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${i} (${r})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(wg,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},an.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:n,payload:r,ref:o}=s,a=o?`(${o})`:"",l=r.status||"";this.log("receive",`${l} ${i} ${n} ${a}`.trim(),r),this.channels.filter(c=>c._isMember(i)).forEach(c=>c._trigger(n,r,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Vt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Vt.open||this.conn.readyState===Vt.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(s){this.log("error","error in heartbeat callback",s)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(rt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const i=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${i}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const i=new Blob([Ig],{type:"application/javascript"});s=URL.createObjectURL(i)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s,i=!1;if(e)s=e,i=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(n){this.log("error","Error fetching access token from callback",n),s=this.accessTokenValue}else s=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:yg};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(rt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(s)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Ru(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},an.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,i,n,r,o,a,l,c,u,h,d,f;switch(this.transport=(s=e?.transport)!==null&&s!==void 0?s:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:fo,this.heartbeatIntervalMs=(n=e?.heartbeatIntervalMs)!==null&&n!==void 0?n:an.HEARTBEAT_INTERVAL,this.worker=(r=e?.worker)!==null&&r!==void 0?r:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e?.heartbeatCallback)!==null&&a!==void 0?a:Dr,this.vsn=(l=e?.vsn)!==null&&l!==void 0?l:qa,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:(g=>Pg[g-1]||Rg),this.vsn){case vg:this.encode=(u=e?.encode)!==null&&u!==void 0?u:((g,p)=>p(JSON.stringify(g))),this.decode=(h=e?.decode)!==null&&h!==void 0?h:((g,p)=>p(JSON.parse(g)));break;case Pu:this.encode=(d=e?.encode)!==null&&d!==void 0?d:this.serializer.encode.bind(this.serializer),this.decode=(f=e?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var Fi=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Dg(t,e,s){const i=new URL(e,t);if(s)for(const[n,r]of Object.entries(s))r!==void 0&&i.searchParams.set(n,r);return i.toString()}async function jg(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function $g(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:s,path:i,query:n,body:r,headers:o}){const a=Dg(t.baseUrl,i,n),l=await jg(t.auth),c=await e(a,{method:s,headers:{...r?{"Content-Type":"application/json"}:{},...l,...o},body:r?JSON.stringify(r):void 0}),u=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),d=h&&u?JSON.parse(u):u;if(!c.ok){const f=h?d:void 0,g=f?.error;throw new Fi(g?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:g?.type,icebergCode:g?.code,details:f})}return{status:c.status,headers:c.headers,data:d}}}}function ln(t){return t.join("")}var Lg=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ln(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(t,e){const s={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ln(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ln(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ln(t.namespace)}`}),!0}catch(e){if(e instanceof Fi&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(s){if(s instanceof Fi&&s.status===409)return;throw s}}};function Cs(t){return t.join("")}var Ng=class{constructor(t,e="",s){this.client=t,this.prefix=e,this.accessDelegation=s}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cs(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Cs(t.namespace)}/tables`,body:e,headers:s})).data.metadata}async updateTable(t,e){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Cs(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Cs(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cs(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Cs(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(s){if(s instanceof Fi&&s.status===404)return!1;throw s}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(s){if(s instanceof Fi&&s.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw s}}},Fg=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const s=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=$g({baseUrl:s,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new Lg(this.client,e),this.tableOps=new Ng(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},pr=class extends Error{constructor(t,e="storage",s,i){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=s,this.statusCode=i}};function mr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var cn=class extends pr{constructor(t,e,s,i="storage"){super(t,i,e,s),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Du=class extends pr{constructor(t,e,s="storage"){super(t,s),this.name=s==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const Bg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ug=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},mo=t=>{if(Array.isArray(t))return t.map(s=>mo(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,i])=>{const n=s.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));e[n]=mo(i)}),e},Hg=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Bi(t){"@babel/helpers - typeof";return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bi(t)}function Wg(t,e){if(Bi(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var i=s.call(t,e);if(Bi(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zg(t){var e=Wg(t,"string");return Bi(e)=="symbol"?e:e+""}function Vg(t,e,s){return(e=zg(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Ya(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,i)}return s}function H(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Ya(Object(s),!0).forEach(function(i){Vg(t,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ya(Object(s)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))})}return t}const Xa=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},qg=async(t,e,s,i)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!s?.noResolveJson){const n=t,r=n.status||500;if(typeof n.json=="function")n.json().then(o=>{const a=o?.statusCode||o?.code||r+"";e(new cn(Xa(o),r,a,i))}).catch(()=>{if(i==="vectors"){const o=r+"";e(new cn(n.statusText||`HTTP ${r} error`,r,o,i))}else{const o=r+"";e(new cn(n.statusText||`HTTP ${r} error`,r,o,i))}});else{const o=r+"";e(new cn(n.statusText||`HTTP ${r} error`,r,o,i))}}else e(new Du(Xa(t),t,i))},Kg=(t,e,s,i)=>{const n={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!i?H(H({},n),s):(Ug(i)?(n.headers=H({"Content-Type":"application/json"},e?.headers),n.body=JSON.stringify(i)):n.body=i,e?.duplex&&(n.duplex=e.duplex),H(H({},n),s))};async function ui(t,e,s,i,n,r,o){return new Promise((a,l)=>{t(s,Kg(e,i,n,r)).then(c=>{if(!c.ok)throw c;if(i?.noResolveJson)return c;if(o==="vectors"){const u=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!u||!u.includes("application/json"))return{}}return c.json()}).then(c=>a(c)).catch(c=>qg(c,l,i,o))})}function ju(t="storage"){return{get:async(e,s,i,n)=>ui(e,"GET",s,i,n,void 0,t),post:async(e,s,i,n,r)=>ui(e,"POST",s,n,r,i,t),put:async(e,s,i,n,r)=>ui(e,"PUT",s,n,r,i,t),head:async(e,s,i,n)=>ui(e,"HEAD",s,H(H({},i),{},{noResolveJson:!0}),n,void 0,t),remove:async(e,s,i,n,r)=>ui(e,"DELETE",s,n,r,i,t)}}const Gg=ju("storage"),{get:Ui,post:nt,put:_o,head:Jg,remove:Go}=Gg,Ge=ju("vectors");var ii=class{constructor(t,e={},s,i="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=Bg(s),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(mr(s))return{data:null,error:s};throw s}}},Yg=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(mr(e))return{data:null,error:e};throw e}}};let $u;$u=Symbol.toStringTag;var Xg=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[$u]="BlobDownloadBuilder",this.promise=null}asStream(){return new Yg(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(mr(e))return{data:null,error:e};throw e}}};const Qg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qa={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Zg=class extends ii{constructor(t,e={},s,i){super(t,e,i,"storage"),this.bucketId=s}async uploadOrUpdate(t,e,s,i){var n=this;return n.handleOperation(async()=>{let r;const o=H(H({},Qa),i);let a=H(H({},n.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&s instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",n.encodeMetadata(l)),r.append("",s)):typeof FormData<"u"&&s instanceof FormData?(r=s,r.has("cacheControl")||r.append("cacheControl",o.cacheControl),l&&!r.has("metadata")&&r.append("metadata",n.encodeMetadata(l))):(r=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=n.toBase64(n.encodeMetadata(l))),(typeof ReadableStream<"u"&&r instanceof ReadableStream||r&&typeof r=="object"&&"pipe"in r&&typeof r.pipe=="function")&&!o.duplex&&(o.duplex="half")),i?.headers&&(a=H(H({},a),i.headers));const c=n._removeEmptyFolders(e),u=n._getFinalPath(c),h=await(t=="PUT"?_o:nt)(n.fetch,`${n.url}/object/${u}`,r,H({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{path:c,id:h.Id,fullPath:h.Key}})}async upload(t,e,s){return this.uploadOrUpdate("POST",t,e,s)}async uploadToSignedUrl(t,e,s,i){var n=this;const r=n._removeEmptyFolders(t),o=n._getFinalPath(r),a=new URL(n.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",e),n.handleOperation(async()=>{let l;const c=H({upsert:Qa.upsert},i),u=H(H({},n.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{path:r,fullPath:(await _o(n.fetch,a.toString(),l,{headers:u})).Key}})}async createSignedUploadUrl(t,e){var s=this;return s.handleOperation(async()=>{let i=s._getFinalPath(t);const n=H({},s.headers);e?.upsert&&(n["x-upsert"]="true");const r=await nt(s.fetch,`${s.url}/object/upload/sign/${i}`,{},{headers:n}),o=new URL(s.url+r.url),a=o.searchParams.get("token");if(!a)throw new pr("No token returned by API");return{signedUrl:o.toString(),path:t,token:a}})}async update(t,e,s){return this.uploadOrUpdate("PUT",t,e,s)}async move(t,e,s){var i=this;return i.handleOperation(async()=>await nt(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s?.destinationBucket},{headers:i.headers}))}async copy(t,e,s){var i=this;return i.handleOperation(async()=>({path:(await nt(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s?.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(t,e,s){var i=this;return i.handleOperation(async()=>{let n=i._getFinalPath(t),r=await nt(i.fetch,`${i.url}/object/sign/${n}`,H({expiresIn:e},s?.transform?{transform:s.transform}:{}),{headers:i.headers});const o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{signedUrl:encodeURI(`${i.url}${r.signedURL}${o}`)}})}async createSignedUrls(t,e,s){var i=this;return i.handleOperation(async()=>{const n=await nt(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:t},{headers:i.headers}),r=s?.download?`&download=${s.download===!0?"":s.download}`:"";return n.map(o=>H(H({},o),{},{signedUrl:o.signedURL?encodeURI(`${i.url}${o.signedURL}${r}`):null}))})}download(t,e){const s=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),n=i?`?${i}`:"",r=this._getFinalPath(t),o=()=>Ui(this.fetch,`${this.url}/${s}/${r}${n}`,{headers:this.headers,noResolveJson:!0});return new Xg(o,this.shouldThrowOnError)}async info(t){var e=this;const s=e._getFinalPath(t);return e.handleOperation(async()=>mo(await Ui(e.fetch,`${e.url}/object/info/${s}`,{headers:e.headers})))}async exists(t){var e=this;const s=e._getFinalPath(t);try{return await Jg(e.fetch,`${e.url}/object/${s}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(mr(i)&&i instanceof Du){const n=i.originalError;if([400,404].includes(n?.status))return{data:!1,error:i}}throw i}}getPublicUrl(t,e){const s=this._getFinalPath(t),i=[],n=e?.download?`download=${e.download===!0?"":e.download}`:"";n!==""&&i.push(n);const r=typeof e?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(e?.transform||{});o!==""&&i.push(o);let a=i.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${r}/public/${s}${a}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Go(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,s){var i=this;return i.handleOperation(async()=>{const n=H(H(H({},Qg),e),{},{prefix:t||""});return await nt(i.fetch,`${i.url}/object/list/${i.bucketId}`,n,{headers:i.headers},s)})}async listV2(t,e){var s=this;return s.handleOperation(async()=>{const i=H({},t);return await nt(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,i,{headers:s.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const ep="2.93.3",Zi={"X-Client-Info":`storage-js/${ep}`};var tp=class extends ii{constructor(t,e={},s,i){const n=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase."));const r=n.href.replace(/\/$/,""),o=H(H({},Zi),e);super(r,o,s,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const s=e.listBucketOptionsToQueryString(t);return await Ui(e.fetch,`${e.url}/bucket${s}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Ui(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var s=this;return s.handleOperation(async()=>await nt(s.fetch,`${s.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}))}async updateBucket(t,e){var s=this;return s.handleOperation(async()=>await _o(s.fetch,`${s.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await nt(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Go(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},sp=class extends ii{constructor(t,e={},s){const i=t.replace(/\/$/,""),n=H(H({},Zi),e);super(i,n,s,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await nt(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const s=new URLSearchParams;t?.limit!==void 0&&s.set("limit",t.limit.toString()),t?.offset!==void 0&&s.set("offset",t.offset.toString()),t?.sortColumn&&s.set("sortColumn",t.sortColumn),t?.sortOrder&&s.set("sortOrder",t.sortOrder),t?.search&&s.set("search",t.search);const i=s.toString(),n=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return await Ui(e.fetch,n,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Go(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!Hg(t))throw new pr("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new Fg({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(s,{get(n,r){const o=n[r];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(n,a),error:null}}catch(l){if(i)throw l;return{data:null,error:l}}}}})}},ip=class extends ii{constructor(t,e={},s){const i=t.replace(/\/$/,""),n=H(H({},Zi),{},{"Content-Type":"application/json"},e);super(i,n,s,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await Ge.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var s=this;return s.handleOperation(async()=>await Ge.post(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:s.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await Ge.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var s=this;return s.handleOperation(async()=>await Ge.post(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:s.headers})||{})}},np=class extends ii{constructor(t,e={},s){const i=t.replace(/\/$/,""),n=H(H({},Zi),{},{"Content-Type":"application/json"},e);super(i,n,s,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Ge.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await Ge.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await Ge.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await Ge.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Ge.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},rp=class extends ii{constructor(t,e={},s){const i=t.replace(/\/$/,""),n=H(H({},Zi),{},{"Content-Type":"application/json"},e);super(i,n,s,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Ge.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Ge.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await Ge.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Ge.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},op=class extends rp{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new ap(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,s=this;return e().call(s,t)}async getBucket(t){var e=()=>super.getBucket,s=this;return e().call(s,t)}async listBuckets(t={}){var e=()=>super.listBuckets,s=this;return e().call(s,t)}async deleteBucket(t){var e=()=>super.deleteBucket,s=this;return e().call(s,t)}},ap=class extends ip{constructor(t,e,s,i){super(t,e,i),this.vectorBucketName=s}async createIndex(t){var e=()=>super.createIndex,s=this;return e().call(s,H(H({},t),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,s=this;return e().call(s,H(H({},t),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,s=this;return e().call(s,s.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,s=this;return e().call(s,s.vectorBucketName,t)}index(t){return new lp(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},lp=class extends np{constructor(t,e,s,i,n){super(t,e,n),this.vectorBucketName=s,this.indexName=i}async putVectors(t){var e=()=>super.putVectors,s=this;return e().call(s,H(H({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(t){var e=()=>super.getVectors,s=this;return e().call(s,H(H({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,s=this;return e().call(s,H(H({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,s=this;return e().call(s,H(H({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,s=this;return e().call(s,H(H({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},cp=class extends tp{constructor(t,e={},s,i){super(t,e,s,i)}from(t){return new Zg(this.url,this.headers,t,this.fetch)}get vectors(){return new op(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new sp(this.url+"/iceberg",this.headers,this.fetch)}};const Lu="2.93.3",Bs=30*1e3,bo=3,jr=bo*Bs,up="http://localhost:9999",hp="supabase.auth.token",dp={"X-Client-Info":`gotrue-js/${Lu}`},yo="X-Supabase-Api-Version",Nu={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},fp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gp=600*1e3;class Hi extends Error{constructor(e,s,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=i}}function L(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class pp extends Hi{constructor(e,s,i){super(e,s,i),this.name="AuthApiError",this.status=s,this.code=i}}function mp(t){return L(t)&&t.name==="AuthApiError"}class bs extends Hi{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Bt extends Hi{constructor(e,s,i,n){super(e,i,n),this.name=s,this.status=i}}class Ve extends Bt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $r(t){return L(t)&&t.name==="AuthSessionMissingError"}class Ps extends Bt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class un extends Bt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class hn extends Bt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _p(t){return L(t)&&t.name==="AuthImplicitGrantRedirectError"}class Za extends Bt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bp extends Bt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class vo extends Bt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Lr(t){return L(t)&&t.name==="AuthRetryableFetchError"}class el extends Bt{constructor(e,s,i){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=i}}class wo extends Bt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tl=` 	
\r=`.split(""),yp=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<tl.length;e+=1)t[tl[e].charCodeAt(0)]=-2;for(let e=0;e<zn.length;e+=1)t[zn[e].charCodeAt(0)]=e;return t})();function sl(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;s(zn[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;s(zn[i]),e.queuedBits-=6}}function Fu(t,e,s){const i=yp[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function il(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},i={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},r=o=>{xp(o,i,s)};for(let o=0;o<t.length;o+=1)Fu(t.charCodeAt(o),n,r);return e.join("")}function vp(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function wp(t,e){for(let s=0;s<t.length;s+=1){let i=t.charCodeAt(s);if(i>55295&&i<=56319){const n=(i-55296)*1024&65535;i=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}vp(i,e)}}function xp(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Ys(t){const e=[],s={queue:0,queuedBits:0},i=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)Fu(t.charCodeAt(n),s,i);return new Uint8Array(e)}function Sp(t){const e=[];return wp(t,s=>e.push(s)),new Uint8Array(e)}function ws(t){const e=[],s={queue:0,queuedBits:0},i=n=>{e.push(n)};return t.forEach(n=>sl(n,s,i)),sl(null,s,i),e.join("")}function kp(t){return Math.round(Date.now()/1e3)+t}function Tp(){return Symbol("auth-callback")}const Te=()=>typeof window<"u"&&typeof document<"u",as={tested:!1,writable:!1},Bu=()=>{if(!Te())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(as.tested)return as.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),as.tested=!0,as.writable=!0}catch{as.tested=!0,as.writable=!1}return as.writable};function Op(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,r)=>{e[r]=n})}catch{}return s.searchParams.forEach((i,n)=>{e[n]=i}),e}const Uu=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ep=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Us=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},ls=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ke=async(t,e)=>{await t.removeItem(e)};class _r{constructor(){this.promise=new _r.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}_r.promiseConstructor=Promise;function dn(t){const e=t.split(".");if(e.length!==3)throw new wo("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!fp.test(e[i]))throw new wo("JWT not in base64url format");return{header:JSON.parse(il(e[0])),payload:JSON.parse(il(e[1])),signature:Ys(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ap(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Cp(t,e){return new Promise((i,n)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await t(r);if(!e(r,null,o)){i(o);return}}catch(o){if(!e(r,o)){n(o);return}}})()})}function Pp(t){return("0"+t.toString(16)).substr(-2)}function Rp(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=s.length;let n="";for(let r=0;r<56;r++)n+=s.charAt(Math.floor(Math.random()*i));return n}return crypto.getRandomValues(e),Array.from(e,Pp).join("")}async function Ip(t){const s=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(i);return Array.from(n).map(r=>String.fromCharCode(r)).join("")}async function Mp(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Ip(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rs(t,e,s=!1){const i=Rp();let n=i;s&&(n+="/PASSWORD_RECOVERY"),await Us(t,`${e}-code-verifier`,n);const r=await Mp(i);return[r,i===r?"plain":"s256"]}const Dp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jp(t){const e=t.headers.get(yo);if(!e||!e.match(Dp))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function $p(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Lp(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Np=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Is(t){if(!Np.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Nr(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Fp(t,e){return new Proxy(t,{get:(s,i,n)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const r=i.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)"||r==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,i,n)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(s,i,n)}})}function nl(t){return JSON.parse(JSON.stringify(t))}const gs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Bp=[502,503,504];async function rl(t){var e;if(!Ep(t))throw new vo(gs(t),0);if(Bp.includes(t.status))throw new vo(gs(t),t.status);let s;try{s=await t.json()}catch(r){throw new bs(gs(r),r)}let i;const n=jp(t);if(n&&n.getTime()>=Nu["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?i=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(i=s.error_code),i){if(i==="weak_password")throw new el(gs(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Ve}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new el(gs(s),t.status,s.weak_password.reasons);throw new pp(gs(s),t.status||500,i)}const Up=(t,e,s,i)=>{const n={method:t,headers:e?.headers||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),n.body=JSON.stringify(i),Object.assign(Object.assign({},n),s))};async function B(t,e,s,i){var n;const r=Object.assign({},i?.headers);r[yo]||(r[yo]=Nu["2024-01-01"].name),i?.jwt&&(r.Authorization=`Bearer ${i.jwt}`);const o=(n=i?.query)!==null&&n!==void 0?n:{};i?.redirectTo&&(o.redirect_to=i.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Hp(t,e,s+a,{headers:r,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(l):{data:Object.assign({},l),error:null}}async function Hp(t,e,s,i,n,r){const o=Up(e,i,n,r);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new vo(gs(l),0)}if(a.ok||await rl(a),i?.noResolveJson)return a;try{return await a.json()}catch(l){await rl(l)}}function it(t){var e;let s=null;Vp(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=kp(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:i},error:null}}function ol(t){const e=it(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function qt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Wp(t){return{data:t,error:null}}function zp(t){const{action_link:e,email_otp:s,hashed_token:i,redirect_to:n,verification_type:r}=t,o=gr(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:i,redirect_to:n,verification_type:r},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function al(t){return t}function Vp(t){return t.access_token&&t.refresh_token&&t.expires_in}const Fr=["global","local","others"];class qp{constructor({url:e="",headers:s={},fetch:i}){this.url=e,this.headers=s,this.fetch=Uu(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=Fr[0]){if(Fr.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fr.join(", ")}`);try{return await B(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(L(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,s={}){try{return await B(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:qt})}catch(i){if(L(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:s}=e,i=gr(e,["options"]),n=Object.assign(Object.assign({},i),s);return"newEmail"in i&&(n.new_email=i?.newEmail,delete n.newEmail),await B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:zp,redirectTo:s?.redirectTo})}catch(s){if(L(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await B(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qt})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,i,n,r,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(r=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""},xform:al});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);c[`${m}Page`]=p}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(L(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Is(e);try{return await B(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qt})}catch(s){if(L(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Is(e);try{return await B(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:qt})}catch(i){if(L(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,s=!1){Is(e);try{return await B(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:qt})}catch(i){if(L(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Is(e.userId);try{const{data:s,error:i}=await B(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:i}}catch(s){if(L(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Is(e.userId),Is(e.id);try{return{data:await B(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(L(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,i,n,r,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await B(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(r=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""},xform:al});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);c[`${m}Page`]=p}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(L(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await B(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(L(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await B(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(L(s))return{data:null,error:s};throw s}}async _updateOAuthClient(e,s){try{return await B(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:s,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(L(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await B(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(L(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await B(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(L(s))return{data:null,error:s};throw s}}}function ll(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}const Ms={debug:!!(globalThis&&Bu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Kp extends Hu{}async function Gp(t,e,s){Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async n=>{if(n){Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Kp(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ms.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Jp(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Wu(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Yp(t){return parseInt(t,16)}function Xp(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function Qp(t){var e;const{chainId:s,domain:i,expirationTime:n,issuedAt:r=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:d}=t;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=Wu(t.address),g=u?`${u}://${i}`:i,p=t.statement?`${t.statement}
`:"",m=`${g} wants you to sign in with your Ethereum account:
${f}

${p}`;let b=`URI: ${h}
Version: ${d}
Chain ID: ${s}${o?`
Nonce: ${o}`:""}
Issued At: ${r.toISOString()}`;if(n&&(b+=`
Expiration Time: ${n.toISOString()}`),a&&(b+=`
Not Before: ${a.toISOString()}`),l&&(b+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const v of c){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);x+=`
- ${v}`}b+=x}return`${m}
${b}`}class be extends Error{constructor({message:e,code:s,cause:i,name:n}){var r;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(r=n??(i instanceof Error?i.name:void 0))!==null&&r!==void 0?r:"Unknown Error",this.code=s}}class Vn extends be{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function Zp({error:t,options:e}){var s,i,n;const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new be({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((s=r.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new be({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=r.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new be({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((n=r.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new be({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new be({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new be({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return r.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new be({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new be({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(zu(o)){if(r.rp.id!==o)return new be({message:`The RP ID "${r.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new be({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(r.user.id.byteLength<1||r.user.id.byteLength>64)return new be({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new be({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new be({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function em({error:t,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new be({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new be({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(zu(i)){if(s.rpId!==i)return new be({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new be({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new be({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new be({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class tm{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const sm=new tm;function im(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:s,excludeCredentials:i}=t,n=gr(t,["challenge","user","excludeCredentials"]),r=Ys(e).buffer,o=Object.assign(Object.assign({},s),{id:Ys(s.id).buffer}),a=Object.assign(Object.assign({},n),{challenge:r,user:o});if(i&&i.length>0){a.excludeCredentials=new Array(i.length);for(let l=0;l<i.length;l++){const c=i[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Ys(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function nm(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:s}=t,i=gr(t,["challenge","allowCredentials"]),n=Ys(e).buffer,r=Object.assign(Object.assign({},i),{challenge:n});if(s&&s.length>0){r.allowCredentials=new Array(s.length);for(let o=0;o<s.length;o++){const a=s[o];r.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Ys(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return r}function rm(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t;return{id:t.id,rawId:t.id,response:{attestationObject:ws(new Uint8Array(t.response.attestationObject)),clientDataJSON:ws(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function om(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t,i=t.getClientExtensionResults(),n=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ws(new Uint8Array(n.authenticatorData)),clientDataJSON:ws(new Uint8Array(n.clientDataJSON)),signature:ws(new Uint8Array(n.signature)),userHandle:n.userHandle?ws(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zu(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function cl(){var t,e;return!!(Te()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function am(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vn("Browser returned unexpected credential type",e)}:{data:null,error:new Vn("Empty credential response",e)}}catch(e){return{data:null,error:Zp({error:e,options:t})}}}async function lm(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vn("Browser returned unexpected credential type",e)}:{data:null,error:new Vn("Empty credential response",e)}}catch(e){return{data:null,error:em({error:e,options:t})}}}const cm={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},um={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function qn(...t){const e=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),s=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),i={};for(const n of t)if(n)for(const r in n){const o=n[r];if(o!==void 0)if(Array.isArray(o))i[r]=o;else if(s(o))i[r]=o;else if(e(o)){const a=i[r];e(a)?i[r]=qn(a,o):i[r]=qn(o)}else i[r]=o}return i}function hm(t,e){return qn(cm,t,e||{})}function dm(t,e){return qn(um,t,e||{})}class fm{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:i,signal:n},r){var o;try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!a)return{data:null,error:l};const c=n??sm.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;if(!u.name){const h=i;if(h)u.name=`${u.id}:${h}`;else{const f=(await this.client.getUser()).data.user,g=((o=f?.user_metadata)===null||o===void 0?void 0:o.name)||f?.email||f?.id||"User";u.name=`${u.id}:${g}`}}u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=hm(a.webauthn.credential_options.publicKey,r?.create),{data:h,error:d}=await am({publicKey:u,signal:c});return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const u=dm(a.webauthn.credential_options.publicKey,r?.request),{data:h,error:d}=await lm(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(a){return L(a)?{data:null,error:a}:{data:null,error:new bs("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:s,webauthn:i}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},r){if(!s)return{data:null,error:new Hi("rpId is required for WebAuthn authentication")};try{if(!cl())return{data:null,error:new bs("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:i},signal:n},{request:r});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:s,rpOrigins:i,credential_response:l.credential_response}})}catch(o){return L(o)?{data:null,error:o}:{data:null,error:new bs("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},r){if(!s)return{data:null,error:new Hi("rpId is required for WebAuthn registration")};try{if(!cl())return{data:null,error:new bs("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===e&&d.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:s,rpOrigins:i},signal:n},{create:r});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:s,rpOrigins:i,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return L(o)?{data:null,error:o}:{data:null,error:new bs("Unexpected error in register",o)}}}}Jp();const gm={url:up,storageKey:hp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function ul(t,e,s){return await s()}const Ds={};class Wi{get jwks(){var e,s;return(s=(e=Ds[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Ds[this.storageKey]=Object.assign(Object.assign({},Ds[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Ds[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ds[this.storageKey]=Object.assign(Object.assign({},Ds[this.storageKey]),{cachedAt:e})}constructor(e){var s,i,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const r=Object.assign(Object.assign({},gm),e);if(this.storageKey=r.storageKey,this.instanceID=(s=Wi.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Wi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.instanceID>0&&Te()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=r.persistSession,this.autoRefreshToken=r.autoRefreshToken,this.admin=new qp({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Uu(r.fetch),this.lock=r.lock||ul,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,this.throwOnError=r.throwOnError,this.lockAcquireTimeout=r.lockAcquireTimeout,r.lock?this.lock=r.lock:this.persistSession&&Te()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Gp:this.lock=ul,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new fm(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Bu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ll(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=ll(this.memoryStorage)),Te()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Lu}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let s={},i="none";if(Te()&&(s=Op(window.location.href),this._isImplicitGrantCallback(s)?i="implicit":await this._isPKCECallback(s)&&(i="pkce")),Te()&&this.detectSessionInUrl&&i!=="none"){const{data:n,error:r}=await this._getSessionFromURL(s,i);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),_p(r)){const l=(e=r.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:r}}return{error:r}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return L(s)?this._returnResult({error:s}):this._returnResult({error:new bs("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,i,n;try{const r=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(s=e?.options)===null||s===void 0?void 0:s.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(n=e?.options)===null||n===void 0?void 0:n.captchaToken}},xform:it}),{data:o,error:a}=r;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(r){if(L(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signUp(e){var s,i,n;try{let r;if("email"in e){const{email:u,password:h,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Rs(this.storage,this.storageKey)),r=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d?.emailRedirectTo,body:{email:u,password:h,data:(s=d?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:g},xform:it})}else if("phone"in e){const{phone:u,password:h,options:d}=e;r=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(i=d?.data)!==null&&i!==void 0?i:{},channel:(n=d?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:it})}else throw new un("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return await ke(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(r){if(await ke(this.storage,`${this.storageKey}-code-verifier`),L(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithPassword(e){try{let s;if("email"in e){const{email:r,password:o,options:a}=e;s=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ol})}else if("phone"in e){const{phone:r,password:o,options:a}=e;s=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ol})}else throw new un("You must provide either an email or phone number and a password");const{data:i,error:n}=s;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!i||!i.session||!i.user){const r=new Ps;return this._returnResult({data:{user:null,session:null},error:r})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:n})}catch(s){if(L(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(e){var s,i,n,r;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(r=e.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,i,n,r,o,a,l,c,u,h,d;let f,g;if("message"in e)f=e.message,g=e.signature;else{const{chain:p,wallet:m,statement:b,options:x}=e;let v;if(Te())if(typeof m=="object")v=m;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")v=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=m}const w=new URL((s=x?.url)!==null&&s!==void 0?s:window.location.href),k=await v.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=Wu(k[0]);let I=(i=x?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!I){const U=await v.request({method:"eth_chainId"});I=Yp(U)}const j={domain:w.host,address:C,statement:b,uri:w.href,version:"1",chainId:I,nonce:(n=x?.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(o=(r=x?.signInWithEthereum)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=x?.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=x?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x?.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=x?.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=Qp(j),g=await v.request({method:"personal_sign",params:[Xp(f),C]})}try{const{data:p,error:m}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:it});if(m)throw m;if(!p||!p.session||!p.user){const b=new Ps;return this._returnResult({data:{user:null,session:null},error:b})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:m})}catch(p){if(L(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var s,i,n,r,o,a,l,c,u,h,d,f;let g,p;if("message"in e)g=e.message,p=e.signature;else{const{chain:m,wallet:b,statement:x,options:v}=e;let w;if(Te())if(typeof b=="object")w=b;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))w=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!v?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=b}const k=new URL((s=v?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in w&&w.signIn){const C=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v?.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),x?{statement:x}:null));let I;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")I=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)I=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)g=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),p=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${k.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(n=(i=v?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((r=v?.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(u=v?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const C=await w.signMessage(new TextEncoder().encode(g),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=C}}try{const{data:m,error:b}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:ws(p)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:it});if(b)throw b;if(!m||!m.session||!m.user){const x=new Ps;return this._returnResult({data:{user:null,session:null},error:x})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:b})}catch(m){if(L(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const s=await ls(this.storage,`${this.storageKey}-code-verifier`),[i,n]=(s??"").split("/");try{if(!i&&this.flowType==="pkce")throw new bp;const{data:r,error:o}=await B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:it});if(await ke(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!r||!r.session||!r.user){const a=new Ps;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign(Object.assign({},r),{redirectType:n??null}),error:o})}catch(r){if(await ke(this.storage,`${this.storageKey}-code-verifier`),L(r))return this._returnResult({data:{user:null,session:null,redirectType:null},error:r});throw r}}async signInWithIdToken(e){try{const{options:s,provider:i,token:n,access_token:r,nonce:o}=e,a=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:n,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:it}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Ps;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(s){if(L(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(e){var s,i,n,r,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Rs(this.storage,this.storageKey));const{error:h}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l?.data)!==null&&n!==void 0?n:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:u})}throw new un("You must provide either an email or phone number.")}catch(a){if(await ke(this.storage,`${this.storageKey}-code-verifier`),L(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var s,i;try{let n,r;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,r=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:o,error:a}=await B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:n,xform:it});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(n){if(L(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var s,i,n,r,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Rs(this.storage,this.storageKey));const c=await B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&i!==void 0?i:void 0}),!((n=e?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Wp});return!((r=c.data)===null||r===void 0)&&r.url&&Te()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await ke(this.storage,`${this.storageKey}-code-verifier`),L(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:i}=e;if(i)throw i;if(!s)throw new Ve;const{error:n}=await B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(L(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:i,type:n,options:r}=e,{error:o}=await B(this.fetch,"POST",s,{headers:this.headers,body:{email:i,type:n,gotrue_meta_security:{captcha_token:r?.captchaToken}},redirectTo:r?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:i,type:n,options:r}=e,{data:o,error:a}=await B(this.fetch,"POST",s,{headers:this.headers,body:{phone:i,type:n,gotrue_meta_security:{captcha_token:r?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:a})}throw new un("You must provide either an email or phone number and a type")}catch(s){if(L(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await i,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=s();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await ls(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<jr:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const o=await ls(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=Nr()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Fp(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{session:null},error:r}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(e){try{return e?await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qt}):await this._useSession(async s=>{var i,n,r;const{data:o,error:a}=s;if(a)throw a;return!(!((i=o.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ve}:await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0,xform:qt})})}catch(s){if(L(s))return $r(s)&&(await this._removeSession(),await ke(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async i=>{const{data:n,error:r}=i;if(r)throw r;if(!n.session)throw new Ve;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Rs(this.storage,this.storageKey));const{data:c,error:u}=await B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:qt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(i){if(await ke(this.storage,`${this.storageKey}-code-verifier`),L(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ve;const s=Date.now()/1e3;let i=s,n=!0,r=null;const{payload:o}=dn(e.access_token);if(o.exp&&(i=o.exp,n=i<=s),n){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});r={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:i-s,expires_at:i},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return this._returnResult({data:{user:r.user,session:r},error:null})}catch(s){if(L(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var i;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(i=o.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Ve;const{data:n,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{user:null,session:null},error:r}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(L(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(e,s){try{if(!Te())throw new hn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new hn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Za("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hn("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Za("No code detected.");const{data:x,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:n,access_token:r,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!r||!a||!o||!c)throw new hn("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let d=u+h;l&&(d=parseInt(l));const f=d-u;f*1e3<=Bs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=d-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,d,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,d,u);const{data:p,error:m}=await this._getUser(r);if(m)throw m;const b={provider_token:i,provider_refresh_token:n,access_token:r,expires_in:h,expires_at:d,refresh_token:o,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:e.type},error:null})}catch(i){if(L(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await ls(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var i;const{data:n,error:r}=s;if(r&&!$r(r))return this._returnResult({error:r});const o=(i=n.session)===null||i===void 0?void 0:i.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(mp(a)&&(a.status===404||a.status===401||a.status===403)||$r(a)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await ke(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const s=Tp(),i={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async s=>{var i,n;try{const{data:{session:r},error:o}=s;if(o)throw o;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e,s={}){let i=null,n=null;this.flowType==="pkce"&&([i,n]=await Rs(this.storage,this.storageKey,!0));try{return await B(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(r){if(await ke(this.storage,`${this.storageKey}-code-verifier`),L(r))return this._returnResult({data:null,error:r});throw r}}async getUserIdentities(){var e;try{const{data:s,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(s){if(L(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:i,error:n}=await this._useSession(async r=>{var o,a,l,c,u;const{data:h,error:d}=r;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await B(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Te()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(L(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var i;try{const{error:n,data:{session:r}}=s;if(n)throw n;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,h=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=r?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:it}),{data:d,error:f}=h;return f?this._returnResult({data:{user:null,session:null},error:f}):!d||!d.session||!d.user?this._returnResult({data:{user:null,session:null},error:new Ps}):(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:f}))}catch(n){if(await ke(this.storage,`${this.storageKey}-code-verifier`),L(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var i,n;const{data:r,error:o}=s;if(o)throw o;return await B(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(L(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const i=Date.now();return await Cp(async n=>(n>0&&await Ap(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:it})),(n,r)=>{const o=200*Math.pow(2,n);return r&&Lr(r)&&Date.now()+o-i<Bs})}catch(i){if(this._debug(s,"error",i),L(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",i),Te()&&!s.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,s;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const n=await ls(this.storage,this.storageKey);if(n&&this.userStorage){let o=await ls(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await Us(this.userStorage,this.storageKey+"-user",o)),n.user=(e=o?.user)!==null&&e!==void 0?e:Nr()}else if(n&&!n.user&&!n.user){const o=await ls(this.storage,this.storageKey+"-user");o&&o?.user?(n.user=o.user,await ke(this.storage,this.storageKey+"-user"),await Us(this.storage,this.storageKey,n)):n.user=Nr()}if(this._debug(i,"session from storage",n),!this._isValidSession(n)){this._debug(i,"session is not valid"),n!==null&&await this._removeSession();return}const r=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<jr;if(this._debug(i,`session has${r?"":" not"} expired with margin of ${jr}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Lr(o)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(n.access_token);!a&&o?.user?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(i,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(i,"error",n),console.error(n);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var s,i;if(!e)throw new Ve;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new _r;const{data:r,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!r.session)throw new Ve;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={data:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(n,"error",r),L(r)){const o={data:null,error:r};return Lr(r)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(r),r}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,i=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:s});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){r.push(l)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ke(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},e),i=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&s.user&&await Us(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const r=nl(n);await Us(this.storage,this.storageKey,r)}else{const n=nl(s);await Us(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ke(this.storage,this.storageKey),await ke(this.storage,this.storageKey+"-code-verifier"),await ke(this.storage,this.storageKey+"-user"),this.userStorage&&await ke(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Te()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Bs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:i}}=s;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((i.expires_at*1e3-e)/Bs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Bs}ms, refresh threshold is ${bo} ticks`),n<=bo&&await this._callRefreshToken(i.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Hu)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Te()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,i){const n=[`provider=${encodeURIComponent(s)}`];if(i?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&n.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[r,o]=await Rs(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(i?.queryParams){const r=new URLSearchParams(i.queryParams);n.push(r.toString())}return i?.skipBrowserRedirect&&n.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var i;const{data:n,error:r}=s;return r?this._returnResult({data:null,error:r}):await B(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=n?.session)===null||i===void 0?void 0:i.access_token})})}catch(s){if(L(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(e){try{return await this._useSession(async s=>{var i,n;const{data:r,error:o}=s;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await B(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(i=r?.session)===null||i===void 0?void 0:i.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((n=l?.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(s){if(L(s))return this._returnResult({data:null,error:s});throw s}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var i;const{data:n,error:r}=s;if(r)return this._returnResult({data:null,error:r});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?rm(e.webauthn.credential_response):om(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(i=n?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(s){if(L(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var i;const{data:n,error:r}=s;if(r)return this._returnResult({data:null,error:r});const o=await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=n?.session)===null||i===void 0?void 0:i.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:im(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:nm(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(L(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(e){const{data:s,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:i}=await this.getUser();if(i)return{data:null,error:i};const n={all:[],phone:[],totp:[],webauthn:[]};for(const r of(e=s?.factors)!==null&&e!==void 0?e:[])n.all.push(r),r.status==="verified"&&n[r.factor_type].push(r);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(e){var s,i,n,r;if(e)try{const{payload:f}=dn(e);let g=null;f.aal&&(g=f.aal);let p=g;const{data:{user:m},error:b}=await this.getUser(e);if(b)return this._returnResult({data:null,error:b});((i=(s=m?.factors)===null||s===void 0?void 0:s.filter(w=>w.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const v=f.amr||[];return{data:{currentLevel:g,nextLevel:p,currentAuthenticationMethods:v},error:null}}catch(f){if(L(f))return this._returnResult({data:null,error:f});throw f}const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=dn(o.access_token);let c=null;l.aal&&(c=l.aal);let u=c;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(u="aal2");const d=l.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async s=>{const{data:{session:i},error:n}=s;return n?this._returnResult({data:null,error:n}):i?await B(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Ve})})}catch(s){if(L(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(e,s){try{return await this._useSession(async i=>{const{data:{session:n},error:r}=i;if(r)return this._returnResult({data:null,error:r});if(!n)return this._returnResult({data:null,error:new Ve});const o=await B(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Te()&&!s?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(i){if(L(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,s){try{return await this._useSession(async i=>{const{data:{session:n},error:r}=i;if(r)return this._returnResult({data:null,error:r});if(!n)return this._returnResult({data:null,error:new Ve});const o=await B(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Te()&&!s?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(i){if(L(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:s},error:i}=e;return i?this._returnResult({data:null,error:i}):s?await B(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new Ve})})}catch(e){if(L(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async s=>{const{data:{session:i},error:n}=s;return n?this._returnResult({data:null,error:n}):i?(await B(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ve})})}catch(s){if(L(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,s={keys:[]}){let i=s.keys.find(a=>a.kid===e);if(i)return i;const n=Date.now();if(i=this.jwks.keys.find(a=>a.kid===e),i&&this.jwks_cached_at+gp>n)return i;const{data:r,error:o}=await B(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=n,i=r.keys.find(a=>a.kid===e),!i)?null:i}async getClaims(e,s={}){try{let i=e;if(!i){const{data:f,error:g}=await this.getSession();if(g||!f.session)return this._returnResult({data:null,error:g});i=f.session.access_token}const{header:n,payload:r,signature:o,raw:{header:a,payload:l}}=dn(i);s?.allowExpired||$p(r.exp);const c=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!c){const{error:f}=await this.getUser(i);if(f)throw f;return{data:{claims:r,header:n,signature:o},error:null}}const u=Lp(n.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Sp(`${a}.${l}`)))throw new wo("Invalid JWT signature");return{data:{claims:r,header:n,signature:o},error:null}}catch(i){if(L(i))return this._returnResult({data:null,error:i});throw i}}}Wi.nextInstanceID={};const pm=Wi,mm="2.93.3";let bi="";typeof Deno<"u"?bi="deno":typeof document<"u"?bi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bi="react-native":bi="node";const _m={"X-Client-Info":`supabase-js-${bi}/${mm}`},bm={headers:_m},ym={schema:"public"},vm={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wm={};function zi(t){"@babel/helpers - typeof";return zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(t)}function xm(t,e){if(zi(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var i=s.call(t,e);if(zi(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sm(t){var e=xm(t,"string");return zi(e)=="symbol"?e:e+""}function km(t,e,s){return(e=Sm(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function hl(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,i)}return s}function me(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?hl(Object(s),!0).forEach(function(i){km(t,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):hl(Object(s)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))})}return t}const Tm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Om=()=>Headers,Em=(t,e,s)=>{const i=Tm(s),n=Om();return async(r,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new n(o?.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(r,me(me({},o),{},{headers:c}))}};function Am(t){return t.endsWith("/")?t:t+"/"}function Cm(t,e){var s,i;const{db:n,auth:r,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:h}=e,d={db:me(me({},l),n),auth:me(me({},c),r),realtime:me(me({},u),o),storage:{},global:me(me(me({},h),a),{},{headers:me(me({},(s=h?.headers)!==null&&s!==void 0?s:{}),(i=a?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}function Pm(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Am(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Rm=class extends pm{constructor(t){super(t)}},Im=class{constructor(t,e,s){var i,n;this.supabaseUrl=t,this.supabaseKey=e;const r=Pm(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",r),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",r),this.storageUrl=new URL("storage/v1",r),this.functionsUrl=new URL("functions/v1",r);const o=`sb-${r.hostname.split(".")[0]}-auth-token`,a={db:ym,realtime:wm,auth:me(me({},vm),{},{storageKey:o}),global:bm},l=Cm(s??{},a);if(this.storageKey=(i=l.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(n=l.global.headers)!==null&&n!==void 0?n:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=Em(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(me({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new mg(new URL("rest/v1",r).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new cp(this.storageUrl.href,this.headers,this.fetch,s?.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new hg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,s)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,s;if(t.accessToken)return await t.accessToken();const{data:i}=await t.auth.getSession();return(e=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:i,userStorage:n,storageKey:r,flowType:o,lock:a,debug:l,throwOnError:c},u,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Rm({url:this.authUrl.href,headers:me(me({},d),u),storageKey:r,autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:i,userStorage:n,flowType:o,lock:a,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Mg(this.realtimeUrl.href,me(me({},t),{},{params:me(me({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Mm=(t,e,s)=>new Im(t,e,s);function Dm(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const s=e.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}Dm()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jm="https://aatirfpbcgvgbyuemsgb.supabase.co",$m="sb_publishable_yG7gPa2OZqDw0pWXHGD36w_McWdwa1x",Br=Mm(jm,$m),Lm={class:"overlay"},Nm={class:"panel"},Fm={class:"tabs"},Bm={key:0,class:"manual-form"},Um={class:"form-group"},Hm={class:"form-group"},Wm={class:"form-group"},zm={class:"form-group"},Vm={class:"form-group"},qm={key:1,class:"food-list"},Km=["onClick"],Gm={key:0},Jm=["value"],Ym={key:1},Xm={__name:"MealForm",emits:["add","close"],setup(t,{emit:e}){const s=Array.from({length:10},(f,g)=>g+1),i=e,n=Ne("manual"),r=Ne({name:"",calorie:0,protein:0,fat:0,carb:0}),o=Ne([]),a=Ne(null),l=Ne(1);ur(async()=>{const{data:f,error:g}=await Br.from("foods").select("*").order("date",{ascending:!1});g?console.error(":",g):o.value=f});const c=f=>{a.value=f,r.value={...f},l.value=1},u=async()=>{if(!r.value.name)return;let f={...r.value};n.value==="manual"?await h():n.value==="db"&&(await d(),f={...r.value,name:r.value.name,calorie:r.value.calorie*l.value,protein:r.value.protein*l.value,fat:r.value.fat*l.value,carb:r.value.carb*l.value}),i("add",f),i("close"),r.value={name:"",calorie:0,protein:0,fat:0,carb:0},a.value=null,l.value=1},h=async()=>{const f=new Date,{data:g,error:p}=await Br.from("foods").insert([{name:r.value.name,calorie:Number(r.value.calorie),protein:Number(r.value.protein),fat:Number(r.value.fat),carb:Number(r.value.carb),date:f}]).select();p?(console.error("DB:",p),alert("DB")):r.value.date=g[0].date},d=async()=>{if(!a.value)return;const g={date:new Date},{data:p,error:m}=await Br.from("foods").update(g).eq("id",a.value.id).select();if(m){console.error("DB:",m);return}r.value={...a.value,...g,name:`${a.value.name} ${l.value}`},console.log(":",p)};return(f,g)=>(oe(),ge("div",Lm,[$("div",Nm,[g[14]||(g[14]=$("h2",null," ",-1)),$("div",Fm,[$("button",{onClick:g[0]||(g[0]=p=>n.value="manual"),class:jt({active:n.value==="manual"})},"",2),$("button",{onClick:g[1]||(g[1]=p=>n.value="db"),class:jt({active:n.value==="db"})},"DB",2)]),n.value==="manual"?(oe(),ge("div",Bm,[$("div",Um,[g[9]||(g[9]=$("label",null,"",-1)),ot($("input",{"onUpdate:modelValue":g[2]||(g[2]=p=>r.value.name=p),placeholder:": "},null,512),[[Ns,r.value.name]])]),$("div",Hm,[g[10]||(g[10]=$("label",null,"(kcal)",-1)),ot($("input",{type:"number","onUpdate:modelValue":g[3]||(g[3]=p=>r.value.calorie=p),placeholder:": 165"},null,512),[[Ns,r.value.calorie]])]),$("div",Wm,[g[11]||(g[11]=$("label",null,"(P, g)",-1)),ot($("input",{type:"number","onUpdate:modelValue":g[4]||(g[4]=p=>r.value.protein=p),placeholder:": 31"},null,512),[[Ns,r.value.protein]])]),$("div",zm,[g[12]||(g[12]=$("label",null,"(F, g)",-1)),ot($("input",{type:"number","onUpdate:modelValue":g[5]||(g[5]=p=>r.value.fat=p),placeholder:": 3.6"},null,512),[[Ns,r.value.fat]])]),$("div",Vm,[g[13]||(g[13]=$("label",null,"(C, g)",-1)),ot($("input",{type:"number","onUpdate:modelValue":g[6]||(g[6]=p=>r.value.carb=p),placeholder:": 0"},null,512),[[Ns,r.value.carb]])])])):Gs("",!0),n.value==="db"?(oe(),ge("div",qm,[(oe(!0),ge(Oe,null,vs(o.value,p=>(oe(),ge("div",{key:p.id,class:jt(["food-item",{selected:a.value&&a.value.id===p.id}]),onClick:m=>c(p)},[$("strong",null,J(p.name),1),a.value&&a.value.id===p.id?(oe(),ge("p",Gm,[ku(J(p.calorie*l.value)+"kcal | P "+J((p.protein*l.value).toFixed(1))+" F "+J((p.fat*l.value).toFixed(1))+" C "+J((p.carb*l.value).toFixed(1))+" ",1),ot($("select",{"onUpdate:modelValue":g[7]||(g[7]=m=>l.value=m)},[(oe(!0),ge(Oe,null,vs(ys(s),m=>(oe(),ge("option",{key:m,value:m},""+J(m),9,Jm))),128))],512),[[_i,l.value,void 0,{number:!0}]])])):(oe(),ge("p",Ym,J(p.calorie)+"kcal | P "+J(p.protein)+" F "+J(p.fat)+" C "+J(p.carb),1))],10,Km))),128))])):Gs("",!0),$("button",{onClick:u},""),$("button",{class:"close",onClick:g[8]||(g[8]=p=>f.$emit("close"))},"")])]))}},Qm=qo(Xm,[["__scopeId","data-v-e28c579f"]]);function en(t){return t+.5|0}const Kt=(t,e,s)=>Math.max(Math.min(t,s),e);function yi(t){return Kt(en(t*2.55),0,255)}function Qt(t){return Kt(en(t*255),0,255)}function It(t){return Kt(en(t/2.55)/100,0,1)}function dl(t){return Kt(en(t*100),0,100)}const Qe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xo=[..."0123456789ABCDEF"],Zm=t=>xo[t&15],e_=t=>xo[(t&240)>>4]+xo[t&15],fn=t=>(t&240)>>4===(t&15),t_=t=>fn(t.r)&&fn(t.g)&&fn(t.b)&&fn(t.a);function s_(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Qe[t[1]]*17,g:255&Qe[t[2]]*17,b:255&Qe[t[3]]*17,a:e===5?Qe[t[4]]*17:255}:(e===7||e===9)&&(s={r:Qe[t[1]]<<4|Qe[t[2]],g:Qe[t[3]]<<4|Qe[t[4]],b:Qe[t[5]]<<4|Qe[t[6]],a:e===9?Qe[t[7]]<<4|Qe[t[8]]:255})),s}const i_=(t,e)=>t<255?e(t):"";function n_(t){var e=t_(t)?Zm:e_;return t?"#"+e(t.r)+e(t.g)+e(t.b)+i_(t.a,e):void 0}const r_=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Vu(t,e,s){const i=e*Math.min(s,1-s),n=(r,o=(r+t/30)%12)=>s-i*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function o_(t,e,s){const i=(n,r=(n+t/60)%6)=>s-s*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function a_(t,e,s){const i=Vu(t,1,.5);let n;for(e+s>1&&(n=1/(e+s),e*=n,s*=n),n=0;n<3;n++)i[n]*=1-e-s,i[n]+=e;return i}function l_(t,e,s,i,n){return t===n?(e-s)/i+(e<s?6:0):e===n?(s-t)/i+2:(t-e)/i+4}function Jo(t){const s=t.r/255,i=t.g/255,n=t.b/255,r=Math.max(s,i,n),o=Math.min(s,i,n),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=l_(s,i,n,u,r),l=l*60+.5),[l|0,c||0,a]}function Yo(t,e,s,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,i)).map(Qt)}function Xo(t,e,s){return Yo(Vu,t,e,s)}function c_(t,e,s){return Yo(a_,t,e,s)}function u_(t,e,s){return Yo(o_,t,e,s)}function qu(t){return(t%360+360)%360}function h_(t){const e=r_.exec(t);let s=255,i;if(!e)return;e[5]!==i&&(s=e[6]?yi(+e[5]):Qt(+e[5]));const n=qu(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=c_(n,r,o):e[1]==="hsv"?i=u_(n,r,o):i=Xo(n,r,o),{r:i[0],g:i[1],b:i[2],a:s}}function d_(t,e){var s=Jo(t);s[0]=qu(s[0]+e),s=Xo(s),t.r=s[0],t.g=s[1],t.b=s[2]}function f_(t){if(!t)return;const e=Jo(t),s=e[0],i=dl(e[1]),n=dl(e[2]);return t.a<255?`hsla(${s}, ${i}%, ${n}%, ${It(t.a)})`:`hsl(${s}, ${i}%, ${n}%)`}const fl={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},gl={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function g_(){const t={},e=Object.keys(gl),s=Object.keys(fl);let i,n,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],n=0;n<s.length;n++)r=s[n],a=a.replace(r,fl[r]);r=parseInt(gl[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let gn;function p_(t){gn||(gn=g_(),gn.transparent=[0,0,0,0]);const e=gn[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const m_=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function __(t){const e=m_.exec(t);let s=255,i,n,r;if(e){if(e[7]!==i){const o=+e[7];s=e[8]?yi(o):Kt(o*255,0,255)}return i=+e[1],n=+e[3],r=+e[5],i=255&(e[2]?yi(i):Kt(i,0,255)),n=255&(e[4]?yi(n):Kt(n,0,255)),r=255&(e[6]?yi(r):Kt(r,0,255)),{r:i,g:n,b:r,a:s}}}function b_(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${It(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Ur=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,js=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function y_(t,e,s){const i=js(It(t.r)),n=js(It(t.g)),r=js(It(t.b));return{r:Qt(Ur(i+s*(js(It(e.r))-i))),g:Qt(Ur(n+s*(js(It(e.g))-n))),b:Qt(Ur(r+s*(js(It(e.b))-r))),a:t.a+s*(e.a-t.a)}}function pn(t,e,s){if(t){let i=Jo(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*s,e===0?360:1)),i=Xo(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Ku(t,e){return t&&Object.assign(e||{},t)}function pl(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Qt(t[3]))):(e=Ku(t,{r:0,g:0,b:0,a:1}),e.a=Qt(e.a)),e}function v_(t){return t.charAt(0)==="r"?__(t):h_(t)}class Vi{constructor(e){if(e instanceof Vi)return e;const s=typeof e;let i;s==="object"?i=pl(e):s==="string"&&(i=s_(e)||p_(e)||v_(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Ku(this._rgb);return e&&(e.a=It(e.a)),e}set rgb(e){this._rgb=pl(e)}rgbString(){return this._valid?b_(this._rgb):void 0}hexString(){return this._valid?n_(this._rgb):void 0}hslString(){return this._valid?f_(this._rgb):void 0}mix(e,s){if(e){const i=this.rgb,n=e.rgb;let r;const o=s===r?.5:s,a=2*o-1,l=i.a-n.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*n.r+.5,i.g=255&c*i.g+r*n.g+.5,i.b=255&c*i.b+r*n.b+.5,i.a=o*i.a+(1-o)*n.a,this.rgb=i}return this}interpolate(e,s){return e&&(this._rgb=y_(this._rgb,e._rgb,s)),this}clone(){return new Vi(this.rgb)}alpha(e){return this._rgb.a=Qt(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=en(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return pn(this._rgb,2,e),this}darken(e){return pn(this._rgb,2,-e),this}saturate(e){return pn(this._rgb,1,e),this}desaturate(e){return pn(this._rgb,1,-e),this}rotate(e){return d_(this._rgb,e),this}}function Et(){}const w_=(()=>{let t=0;return()=>t++})();function le(t){return t==null}function xe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ee(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function tt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function _t(t,e){return tt(t)?t:e}function se(t,e){return typeof t>"u"?e:t}const x_=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function fe(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function re(t,e,s,i){let n,r,o;if(xe(t))for(r=t.length,n=0;n<r;n++)e.call(s,t[n],n);else if(ee(t))for(o=Object.keys(t),r=o.length,n=0;n<r;n++)e.call(s,t[o[n]],o[n])}function Kn(t,e){let s,i,n,r;if(!t||!e||t.length!==e.length)return!1;for(s=0,i=t.length;s<i;++s)if(n=t[s],r=e[s],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function Gn(t){if(xe(t))return t.map(Gn);if(ee(t)){const e=Object.create(null),s=Object.keys(t),i=s.length;let n=0;for(;n<i;++n)e[s[n]]=Gn(t[s[n]]);return e}return t}function Gu(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function S_(t,e,s,i){if(!Gu(t))return;const n=e[t],r=s[t];ee(n)&&ee(r)?qi(n,r,i):e[t]=Gn(r)}function qi(t,e,s){const i=xe(e)?e:[e],n=i.length;if(!ee(t))return t;s=s||{};const r=s.merger||S_;let o;for(let a=0;a<n;++a){if(o=i[a],!ee(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],t,o,s)}return t}function Ri(t,e){return qi(t,e,{merger:k_})}function k_(t,e,s){if(!Gu(t))return;const i=e[t],n=s[t];ee(i)&&ee(n)?Ri(i,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Gn(n))}const ml={"":t=>t,x:t=>t.x,y:t=>t.y};function T_(t){const e=t.split("."),s=[];let i="";for(const n of e)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(s.push(i),i="");return s}function O_(t){const e=T_(t);return s=>{for(const i of e){if(i==="")break;s=s&&s[i]}return s}}function ti(t,e){return(ml[e]||(ml[e]=O_(e)))(t)}function Qo(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ki=t=>typeof t<"u",is=t=>typeof t=="function",_l=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function E_(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const He=Math.PI,Zt=2*He,Jn=Number.POSITIVE_INFINITY,A_=He/180,lt=He/2,cs=He/4,bl=He*2/3,Ju=Math.log10,es=Math.sign;function Pn(t,e,s){return Math.abs(t-e)<s}function yl(t){const e=Math.round(t);t=Pn(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(Ju(t))),i=t/s;return(i<=1?1:i<=2?2:i<=5?5:10)*s}function C_(t){const e=[],s=Math.sqrt(t);let i;for(i=1;i<s;i++)t%i===0&&(e.push(i),e.push(t/i));return s===(s|0)&&e.push(s),e.sort((n,r)=>n-r).pop(),e}function P_(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Yn(t){return!P_(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function R_(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function I_(t,e,s){let i,n,r;for(i=0,n=t.length;i<n;i++)r=t[i][s],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function xs(t){return t*(He/180)}function M_(t){return t*(180/He)}function vl(t){if(!tt(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function D_(t,e){const s=e.x-t.x,i=e.y-t.y,n=Math.sqrt(s*s+i*i);let r=Math.atan2(i,s);return r<-.5*He&&(r+=Zt),{angle:r,distance:n}}function j_(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function us(t){return(t%Zt+Zt)%Zt}function $_(t,e,s,i){const n=us(t),r=us(e),o=us(s),a=us(r-n),l=us(o-n),c=us(n-r),u=us(n-o);return n===r||n===o||i||a>l&&c<u}function ct(t,e,s){return Math.max(e,Math.min(s,t))}function L_(t){return ct(t,-32768,32767)}function Ws(t,e,s,i=1e-6){return t>=Math.min(e,s)-i&&t<=Math.max(e,s)+i}function Zo(t,e,s){s=s||(o=>t[o]<e);let i=t.length-1,n=0,r;for(;i-n>1;)r=n+i>>1,s(r)?n=r:i=r;return{lo:n,hi:i}}const So=(t,e,s,i)=>Zo(t,s,i?n=>{const r=t[n][e];return r<s||r===s&&t[n+1][e]===s}:n=>t[n][e]<s),N_=(t,e,s)=>Zo(t,s,i=>t[i][e]>=s);function F_(t,e,s){let i=0,n=t.length;for(;i<n&&t[i]<e;)i++;for(;n>i&&t[n-1]>s;)n--;return i>0||n<t.length?t.slice(i,n):t}const Yu=["push","pop","shift","splice","unshift"];function B_(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Yu.forEach(s=>{const i="_onData"+Qo(s),n=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...r){const o=n.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function wl(t,e){const s=t._chartjs;if(!s)return;const i=s.listeners,n=i.indexOf(e);n!==-1&&i.splice(n,1),!(i.length>0)&&(Yu.forEach(r=>{delete t[r]}),delete t._chartjs)}function Xu(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Qu=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function Zu(t,e){let s=[],i=!1;return function(...n){s=n,i||(i=!0,Qu.call(window,()=>{i=!1,t.apply(e,s)}))}}function U_(t,e){let s;return function(...i){return e?(clearTimeout(s),s=setTimeout(t,e,i)):t.apply(this,i),e}}const eh=t=>t==="start"?"left":t==="end"?"right":"center",Ke=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,H_=(t,e,s,i)=>t===(i?"left":"right")?s:t==="center"?(e+s)/2:e,mn=t=>t===0||t===1,xl=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Zt/s)),Sl=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Zt/s)+1,Ii={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*lt)+1,easeOutSine:t=>Math.sin(t*lt),easeInOutSine:t=>-.5*(Math.cos(He*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>mn(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>mn(t)?t:xl(t,.075,.3),easeOutElastic:t=>mn(t)?t:Sl(t,.075,.3),easeInOutElastic(t){return mn(t)?t:t<.5?.5*xl(t*2,.1125,.45):.5+.5*Sl(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ii.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ii.easeInBounce(t*2)*.5:Ii.easeOutBounce(t*2-1)*.5+.5};function th(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function kl(t){return th(t)?t:new Vi(t)}function Hr(t){return th(t)?t:new Vi(t).saturate(.5).darken(.1).hexString()}const W_=["x","y","borderWidth","radius","tension"],z_=["color","borderColor","backgroundColor"];function V_(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:z_},numbers:{type:"number",properties:W_}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function q_(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Tl=new Map;function K_(t,e){e=e||{};const s=t+JSON.stringify(e);let i=Tl.get(s);return i||(i=new Intl.NumberFormat(t,e),Tl.set(s,i)),i}function sh(t,e,s){return K_(e,s).format(t)}const G_={values(t){return xe(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const i=this.chart.options.locale;let n,r=t;if(s.length>1){const c=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(c<1e-4||c>1e15)&&(n="scientific"),r=J_(t,s)}const o=Ju(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),sh(t,i,l)}};function J_(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var ih={formatters:G_};function Y_(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ih.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Os=Object.create(null),ko=Object.create(null);function Mi(t,e){if(!e)return t;const s=e.split(".");for(let i=0,n=s.length;i<n;++i){const r=s[i];t=t[r]||(t[r]=Object.create(null))}return t}function Wr(t,e,s){return typeof e=="string"?qi(Mi(t,e),s):qi(Mi(t,""),e)}class X_{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>Hr(n.backgroundColor),this.hoverBorderColor=(i,n)=>Hr(n.borderColor),this.hoverColor=(i,n)=>Hr(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Wr(this,e,s)}get(e){return Mi(this,e)}describe(e,s){return Wr(ko,e,s)}override(e,s){return Wr(Os,e,s)}route(e,s,i,n){const r=Mi(this,e),o=Mi(this,i),a="_"+s;Object.defineProperties(r,{[a]:{value:r[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[a],c=o[n];return ee(l)?Object.assign({},c,l):se(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(s=>s(this))}}var _e=new X_({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[V_,q_,Y_]);function Q_(t){return!t||le(t.size)||le(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ol(t,e,s,i,n){let r=e[n];return r||(r=e[n]=t.measureText(n).width,s.push(n)),r>i&&(i=r),i}function hs(t,e,s){const i=t.currentDevicePixelRatio,n=s!==0?Math.max(s/2,.5):0;return Math.round((e-n)*i)/i+n}function El(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Al(t,e,s,i){nh(t,e,s,i,null)}function nh(t,e,s,i,n){let r,o,a,l,c,u,h,d;const f=e.pointStyle,g=e.rotation,p=e.radius;let m=(g||0)*A_;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(s,i),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),f){default:n?t.ellipse(s,i,n/2,p,0,0,Zt):t.arc(s,i,p,0,Zt),t.closePath();break;case"triangle":u=n?n/2:p,t.moveTo(s+Math.sin(m)*u,i-Math.cos(m)*p),m+=bl,t.lineTo(s+Math.sin(m)*u,i-Math.cos(m)*p),m+=bl,t.lineTo(s+Math.sin(m)*u,i-Math.cos(m)*p),t.closePath();break;case"rectRounded":c=p*.516,l=p-c,o=Math.cos(m+cs)*l,h=Math.cos(m+cs)*(n?n/2-c:l),a=Math.sin(m+cs)*l,d=Math.sin(m+cs)*(n?n/2-c:l),t.arc(s-h,i-a,c,m-He,m-lt),t.arc(s+d,i-o,c,m-lt,m),t.arc(s+h,i+a,c,m,m+lt),t.arc(s-d,i+o,c,m+lt,m+He),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,u=n?n/2:l,t.rect(s-u,i-l,2*u,2*l);break}m+=cs;case"rectRot":h=Math.cos(m)*(n?n/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(n?n/2:p),t.moveTo(s-h,i-a),t.lineTo(s+d,i-o),t.lineTo(s+h,i+a),t.lineTo(s-d,i+o),t.closePath();break;case"crossRot":m+=cs;case"cross":h=Math.cos(m)*(n?n/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(n?n/2:p),t.moveTo(s-h,i-a),t.lineTo(s+h,i+a),t.moveTo(s+d,i-o),t.lineTo(s-d,i+o);break;case"star":h=Math.cos(m)*(n?n/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(n?n/2:p),t.moveTo(s-h,i-a),t.lineTo(s+h,i+a),t.moveTo(s+d,i-o),t.lineTo(s-d,i+o),m+=cs,h=Math.cos(m)*(n?n/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(n?n/2:p),t.moveTo(s-h,i-a),t.lineTo(s+h,i+a),t.moveTo(s+d,i-o),t.lineTo(s-d,i+o);break;case"line":o=n?n/2:Math.cos(m)*p,a=Math.sin(m)*p,t.moveTo(s-o,i-a),t.lineTo(s+o,i+a);break;case"dash":t.moveTo(s,i),t.lineTo(s+Math.cos(m)*(n?n/2:p),i+Math.sin(m)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function rh(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function ea(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ta(t){t.restore()}function Z_(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),le(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function eb(t,e,s,i,n){if(n.strikethrough||n.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=s-r.actualBoundingBoxAscent,c=s+r.actualBoundingBoxDescent,u=n.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function tb(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Xn(t,e,s,i,n,r={}){const o=xe(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=n.string,Z_(t,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&tb(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),le(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,s,i,r.maxWidth)),t.fillText(c,s,i,r.maxWidth),eb(t,s,i,c,r),i+=Number(n.lineHeight);t.restore()}function Qn(t,e){const{x:s,y:i,w:n,h:r,radius:o}=e;t.arc(s+o.topLeft,i+o.topLeft,o.topLeft,1.5*He,He,!0),t.lineTo(s,i+r-o.bottomLeft),t.arc(s+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,He,lt,!0),t.lineTo(s+n-o.bottomRight,i+r),t.arc(s+n-o.bottomRight,i+r-o.bottomRight,o.bottomRight,lt,0,!0),t.lineTo(s+n,i+o.topRight),t.arc(s+n-o.topRight,i+o.topRight,o.topRight,0,-lt,!0),t.lineTo(s+o.topLeft,i)}const sb=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ib=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function nb(t,e){const s=(""+t).match(sb);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const rb=t=>+t||0;function oh(t,e){const s={},i=ee(e),n=i?Object.keys(e):e,r=ee(t)?i?o=>se(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of n)s[o]=rb(r(o));return s}function ah(t){return oh(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Xs(t){return oh(t,["topLeft","topRight","bottomLeft","bottomRight"])}function dt(t){const e=ah(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ue(t,e){t=t||{},e=e||_e.font;let s=se(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let i=se(t.style,e.style);i&&!(""+i).match(ib)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:se(t.family,e.family),lineHeight:nb(se(t.lineHeight,e.lineHeight),s),size:s,style:i,weight:se(t.weight,e.weight),string:""};return n.string=Q_(n),n}function _n(t,e,s,i){let n,r,o;for(n=0,r=t.length;n<r;++n)if(o=t[n],o!==void 0&&o!==void 0)return o}function ob(t,e,s){const{min:i,max:n}=t,r=x_(e,(n-i)/2),o=(a,l)=>s&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(n,r)}}function ni(t,e){return Object.assign(Object.create(t),e)}function sa(t,e=[""],s,i,n=()=>t[0]){const r=s||t;typeof i>"u"&&(i=hh("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:i,_getTarget:n,override:a=>sa([a,...t],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return ch(a,l,()=>gb(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Pl(a).includes(l)},ownKeys(a){return Pl(a)},set(a,l,c){const u=a._storage||(a._storage=n());return a[l]=u[l]=c,delete a._keys,!0}})}function si(t,e,s,i){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:lh(t,i),setContext:r=>si(t,r,s,i),override:r=>si(t.override(r),e,s,i)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return ch(r,o,()=>lb(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function lh(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:i=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:s,indexable:i,isScriptable:is(s)?s:()=>s,isIndexable:is(i)?i:()=>i}}const ab=(t,e)=>t?t+Qo(e):e,ia=(t,e)=>ee(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function ch(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=s();return t[e]=i,i}function lb(t,e,s){const{_proxy:i,_context:n,_subProxy:r,_descriptors:o}=t;let a=i[e];return is(a)&&o.isScriptable(e)&&(a=cb(e,a,t,s)),xe(a)&&a.length&&(a=ub(e,a,t,o.isIndexable)),ia(e,a)&&(a=si(a,n,r&&r[e],o)),a}function cb(t,e,s,i){const{_proxy:n,_context:r,_subProxy:o,_stack:a}=s;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(r,o||i);return a.delete(t),ia(t,l)&&(l=na(n._scopes,n,t,l)),l}function ub(t,e,s,i){const{_proxy:n,_context:r,_subProxy:o,_descriptors:a}=s;if(typeof r.index<"u"&&i(t))return e[r.index%e.length];if(ee(e[0])){const l=e,c=n._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=na(c,n,t,u);e.push(si(h,r,o&&o[t],a))}}return e}function uh(t,e,s){return is(t)?t(e,s):t}const hb=(t,e)=>t===!0?e:typeof t=="string"?ti(e,t):void 0;function db(t,e,s,i,n){for(const r of e){const o=hb(s,r);if(o){t.add(o);const a=uh(o._fallback,s,n);if(typeof a<"u"&&a!==s&&a!==i)return a}else if(o===!1&&typeof i<"u"&&s!==i)return null}return!1}function na(t,e,s,i){const n=e._rootScopes,r=uh(e._fallback,s,i),o=[...t,...n],a=new Set;a.add(i);let l=Cl(a,o,s,r||s,i);return l===null||typeof r<"u"&&r!==s&&(l=Cl(a,o,r,l,i),l===null)?!1:sa(Array.from(a),[""],n,r,()=>fb(e,s,i))}function Cl(t,e,s,i,n){for(;s;)s=db(t,e,s,i,n);return s}function fb(t,e,s){const i=t._getTarget();e in i||(i[e]={});const n=i[e];return xe(n)&&ee(s)?s:n||{}}function gb(t,e,s,i){let n;for(const r of e)if(n=hh(ab(r,t),s),typeof n<"u")return ia(t,n)?na(s,i,t,n):n}function hh(t,e){for(const s of e){if(!s)continue;const i=s[t];if(typeof i<"u")return i}}function Pl(t){let e=t._keys;return e||(e=t._keys=pb(t._scopes)),e}function pb(t){const e=new Set;for(const s of t)for(const i of Object.keys(s).filter(n=>!n.startsWith("_")))e.add(i);return Array.from(e)}function ra(){return typeof window<"u"&&typeof document<"u"}function oa(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Zn(t,e,s){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[s])):i=t,i}const br=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function mb(t,e){return br(t).getPropertyValue(e)}const _b=["top","right","bottom","left"];function Ts(t,e,s){const i={};s=s?"-"+s:"";for(let n=0;n<4;n++){const r=_b[n];i[r]=parseFloat(t[e+"-"+r+s])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const bb=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function yb(t,e){const s=t.touches,i=s&&s.length?s[0]:t,{offsetX:n,offsetY:r}=i;let o=!1,a,l;if(bb(n,r,t.target))a=n,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ps(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:i}=e,n=br(s),r=n.boxSizing==="border-box",o=Ts(n,"padding"),a=Ts(n,"border","width"),{x:l,y:c,box:u}=yb(t,s),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:g}=e;return r&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/f*s.width/i),y:Math.round((c-d)/g*s.height/i)}}function vb(t,e,s){let i,n;if(e===void 0||s===void 0){const r=t&&oa(t);if(!r)e=t.clientWidth,s=t.clientHeight;else{const o=r.getBoundingClientRect(),a=br(r),l=Ts(a,"border","width"),c=Ts(a,"padding");e=o.width-c.width-l.width,s=o.height-c.height-l.height,i=Zn(a.maxWidth,r,"clientWidth"),n=Zn(a.maxHeight,r,"clientHeight")}}return{width:e,height:s,maxWidth:i||Jn,maxHeight:n||Jn}}const Gt=t=>Math.round(t*10)/10;function wb(t,e,s,i){const n=br(t),r=Ts(n,"margin"),o=Zn(n.maxWidth,t,"clientWidth")||Jn,a=Zn(n.maxHeight,t,"clientHeight")||Jn,l=vb(t,e,s);let{width:c,height:u}=l;if(n.boxSizing==="content-box"){const d=Ts(n,"border","width"),f=Ts(n,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=Gt(Math.min(c,o,l.maxWidth)),u=Gt(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Gt(c/2)),(e!==void 0||s!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Gt(Math.floor(u*i))),{width:c,height:u}}function Rl(t,e,s){const i=e||1,n=Gt(t.height*i),r=Gt(t.width*i);t.height=Gt(t.height),t.width=Gt(t.width);const o=t.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==n||o.width!==r?(t.currentDevicePixelRatio=i,o.height=n,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const xb=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};ra()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function Il(t,e){const s=mb(t,e),i=s&&s.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const Sb=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,i){return s-i},leftForLtr(s,i){return s-i}}},kb=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Qs(t,e,s){return t?Sb(e,s):kb()}function dh(t,e){let s,i;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,i=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=i)}function fh(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function bn(t,e,s){return t.options.clip?t[s]:e[s]}function Tb(t,e){const{xScale:s,yScale:i}=t;return s&&i?{left:bn(s,e,"left"),right:bn(s,e,"right"),top:bn(i,e,"top"),bottom:bn(i,e,"bottom")}:e}function Ob(t,e){const s=e._clip;if(s.disabled)return!1;const i=Tb(e,t.chartArea);return{left:s.left===!1?0:i.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:i.right+(s.right===!0?0:s.right),top:s.top===!1?0:i.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:i.bottom+(s.bottom===!0?0:s.bottom)}}class Eb{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,i,n){const r=s.listeners[n],o=s.duration;r.forEach(a=>a({chart:e,initial:s.initial,numSteps:o,currentStep:Math.min(i-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Qu.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(n.draw(),this._notify(n,i,e,"progress")),r.length||(i.running=!1,this._notify(n,i,e,"complete"),i.initial=!1),s+=r.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let i=s.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,i)),i}listen(e,s,i){this._getAnims(e).listeners[s].push(i)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const i=s.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var At=new Eb;const Ml="transparent",Ab={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const i=kl(t||Ml),n=i.valid&&kl(e||Ml);return n&&n.valid?n.mix(i,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class Cb{constructor(e,s,i,n){const r=s[i];n=_n([e.to,n,r,e.from]);const o=_n([e.from,r,n]);this._active=!0,this._fn=e.fn||Ab[e.type||typeof o],this._easing=Ii[e.easing]||Ii.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=i,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(e,s,i){if(this._active){this._notify(!1);const n=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=_n([e.to,s,n,e.from]),this._from=_n([e.from,n,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,i=this._duration,n=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||s<i),!this._active){this._target[n]=a,this._notify(!0);return}if(s<0){this._target[n]=r;return}l=s/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,i)=>{e.push({res:s,rej:i})})}_notify(e){const s=e?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][s]()}}class gh{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!ee(e))return;const s=Object.keys(_e.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const r=e[n];if(!ee(r))return;const o={};for(const a of s)o[a]=r[a];(xe(r.properties)&&r.properties||[n]).forEach(a=>{(a===n||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,s){const i=s.options,n=Rb(e,i);if(!n)return[];const r=this._createAnimations(n,i);return i.$shared&&Pb(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,s){const i=this._properties,n=[],r=e.$animations||(e.$animations={}),o=Object.keys(s),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){n.push(...this._animateOptions(e,s));continue}const u=s[c];let h=r[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}r[c]=h=new Cb(d,e,c,u),n.push(h)}return n}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const i=this._createAnimations(e,s);if(i.length)return At.add(this._chart,i),!0}}function Pb(t,e){const s=[],i=Object.keys(e);for(let n=0;n<i.length;n++){const r=t[i[n]];r&&r.active()&&s.push(r.wait())}return Promise.all(s)}function Rb(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Dl(t,e){const s=t&&t.options||{},i=s.reverse,n=s.min===void 0?e:0,r=s.max===void 0?e:0;return{start:i?r:n,end:i?n:r}}function Ib(t,e,s){if(s===!1)return!1;const i=Dl(t,s),n=Dl(e,s);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}function Mb(t){let e,s,i,n;return ee(t)?(e=t.top,s=t.right,i=t.bottom,n=t.left):e=s=i=n=t,{top:e,right:s,bottom:i,left:n,disabled:t===!1}}function ph(t,e){const s=[],i=t._getSortedDatasetMetas(e);let n,r;for(n=0,r=i.length;n<r;++n)s.push(i[n].index);return s}function jl(t,e,s,i={}){const n=t.keys,r=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===s){if(u=!0,i.all)continue;break}c=t.values[l],tt(c)&&(r||e===0||es(e)===es(c))&&(e+=c)}return!u&&!i.all?0:e}function Db(t,e){const{iScale:s,vScale:i}=e,n=s.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[n]:u,[r]:t[u]};return a}function zr(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function jb(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function $b(t){const{min:e,max:s,minDefined:i,maxDefined:n}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:n?s:Number.POSITIVE_INFINITY}}function Lb(t,e,s){const i=t[e]||(t[e]={});return i[s]||(i[s]={})}function $l(t,e,s,i){for(const n of e.getMatchingVisibleMetas(i).reverse()){const r=t[n.index];if(s&&r>0||!s&&r<0)return n.index}return null}function Ll(t,e){const{chart:s,_cachedMeta:i}=t,n=s._stacks||(s._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=jb(r,o,i),h=e.length;let d;for(let f=0;f<h;++f){const g=e[f],{[l]:p,[c]:m}=g,b=g._stacks||(g._stacks={});d=b[c]=Lb(n,u,p),d[a]=m,d._top=$l(d,o,!0,i.type),d._bottom=$l(d,o,!1,i.type);const x=d._visualValues||(d._visualValues={});x[a]=m}}function Vr(t,e){const s=t.scales;return Object.keys(s).filter(i=>s[i].axis===e).shift()}function Nb(t,e){return ni(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Fb(t,e,s){return ni(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function hi(t,e){const s=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const n of e){const r=n._stacks;if(!r||r[i]===void 0||r[i][s]===void 0)return;delete r[i][s],r[i]._visualValues!==void 0&&r[i]._visualValues[s]!==void 0&&delete r[i]._visualValues[s]}}}const qr=t=>t==="reset"||t==="none",Nl=(t,e)=>e?t:Object.assign({},t),Bb=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:ph(s,!0),values:null};class mh{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=zr(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&hi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,i=this.getDataset(),n=(h,d,f,g)=>h==="x"?d:h==="r"?g:f,r=s.xAxisID=se(i.xAxisID,Vr(e,"x")),o=s.yAxisID=se(i.yAxisID,Vr(e,"y")),a=s.rAxisID=se(i.rAxisID,Vr(e,"r")),l=s.indexAxis,c=s.iAxisID=n(l,r,o,a),u=s.vAxisID=n(l,o,r,a);s.xScale=this.getScaleForId(r),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(a),s.iScale=this.getScaleForId(c),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&wl(this._data,this),e._stacked&&hi(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),i=this._data;if(ee(s)){const n=this._cachedMeta;this._data=Db(s,n)}else if(i!==s){if(i){wl(i,this);const n=this._cachedMeta;hi(n),n._parsed=[]}s&&Object.isExtensible(s)&&B_(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const r=s._stacked;s._stacked=zr(s.vScale,s),s.stack!==i.stack&&(n=!0,hi(s),s.stack=i.stack),this._resyncElements(e),(n||r!==s._stacked)&&(Ll(this,s._parsed),s._stacked=zr(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:i,_data:n}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&s===n.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=n,i._sorted=!0,d=n;else{xe(n[e])?d=this.parseArrayData(i,n,e,s):ee(n[e])?d=this.parseObjectData(i,n,e,s):d=this.parsePrimitiveData(i,n,e,s);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<s;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&Ll(this,d)}parsePrimitiveData(e,s,i,n){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(n);let d,f,g;for(d=0,f=n;d<f;++d)g=d+i,h[d]={[a]:u||r.parse(c[g],g),[l]:o.parse(s[g],g)};return h}parseArrayData(e,s,i,n){const{xScale:r,yScale:o}=e,a=new Array(n);let l,c,u,h;for(l=0,c=n;l<c;++l)u=l+i,h=s[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,s,i,n){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(n);let u,h,d,f;for(u=0,h=n;u<h;++u)d=u+i,f=s[d],c[u]={x:r.parse(ti(f,a),d),y:o.parse(ti(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,i){const n=this.chart,r=this._cachedMeta,o=s[e.axis],a={keys:ph(n,!0),values:s._stacks[e.axis]._visualValues};return jl(a,o,r.index,{mode:i})}updateRangeFromParsed(e,s,i,n){const r=i[s.axis];let o=r===null?NaN:r;const a=n&&i._stacks[s.axis];n&&a&&(n.values=a,o=jl(n,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,s){const i=this._cachedMeta,n=i._parsed,r=i._sorted&&e===i.iScale,o=n.length,a=this._getOtherScale(e),l=Bb(s,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=$b(a);let d,f;function g(){f=n[d];const p=f[a.axis];return!tt(f[e.axis])||u>p||h<p}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,e,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const s=this._cachedMeta._parsed,i=[];let n,r,o;for(n=0,r=s.length;n<r;++n)o=s[n][e.axis],tt(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,i=s.iScale,n=s.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=Mb(se(this.options.clip,Ib(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,i=this._cachedMeta,n=i.data||[],r=s.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||n.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const h=n[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,s){const i=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,s,i){const n=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=Fb(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=n.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=Nb(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!s,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",i){const n=s==="active",r=this._cachedDataOpts,o=e+"-"+s,a=r[o],l=this.enableOptionSharing&&Ki(i);if(a)return Nl(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=n?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(_e.elements[e]),g=()=>this.getContext(i,n,s),p=c.resolveNamedOptions(d,f,g,h);return p.$shared&&(p.$shared=l,r[o]=Object.freeze(Nl(p,l))),p}_resolveAnimations(e,s,i){const n=this.chart,r=this._cachedDataOpts,o=`animation-${s}`,a=r[o];if(a)return a;let l;if(n.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,s))}const c=new gh(n,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||qr(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const i=this.resolveDataElementOptions(e,s),n=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(s,r)||r!==n;return this.updateSharedOptions(r,s,i),{sharedOptions:r,includeOptions:o}}updateElement(e,s,i,n){qr(n)?Object.assign(e,i):this._resolveAnimations(s,n).update(e,i)}updateSharedOptions(e,s,i){e&&!qr(s)&&this._resolveAnimations(void 0,s).update(e,i)}_setStyle(e,s,i,n){e.active=n;const r=this.getStyle(s,n);this._resolveAnimations(s,i,n).update(e,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(e,s,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,s,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const n=i.length,r=s.length,o=Math.min(r,n);o&&this.parse(0,o),r>n?this._insertElements(n,r-n,e):r<n&&this._removeElements(r,n-r)}_insertElements(e,s,i=!0){const n=this._cachedMeta,r=n.data,o=e+s;let a;const l=c=>{for(c.length+=s,a=c.length-1;a>=o;a--)c[a]=c[a-s]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(e,s),i&&this.updateElements(r,e,s,"reset")}updateElements(e,s,i,n){}_removeElements(e,s){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(e,s);i._stacked&&hi(i,n)}i.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,i,n]=e;this[s](i,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Ub(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let i=[];for(let n=0,r=s.length;n<r;n++)i=i.concat(s[n].controller.getAllParsedValues(t));t._cache.$bar=Xu(i.sort((n,r)=>n-r))}return t._cache.$bar}function Hb(t){const e=t.iScale,s=Ub(e,t.type);let i=e._length,n,r,o,a;const l=()=>{o===32767||o===-32768||(Ki(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(n=0,r=s.length;n<r;++n)o=e.getPixelForValue(s[n]),l();for(a=void 0,n=0,r=e.ticks.length;n<r;++n)o=e.getPixelForTick(n),l();return i}function Wb(t,e,s,i){const n=s.barThickness;let r,o;return le(n)?(r=e.min*s.categoryPercentage,o=s.barPercentage):(r=n*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[t]-r/2}}function zb(t,e,s,i){const n=e.pixels,r=n[t];let o=t>0?n[t-1]:null,a=t<n.length-1?n[t+1]:null;const l=s.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:s.barPercentage,start:c}}function Vb(t,e,s,i){const n=s.parse(t[0],i),r=s.parse(t[1],i),o=Math.min(n,r),a=Math.max(n,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[s.axis]=c,e._custom={barStart:l,barEnd:c,start:n,end:r,min:o,max:a}}function _h(t,e,s,i){return xe(t)?Vb(t,e,s,i):e[s.axis]=s.parse(t,i),e}function Fl(t,e,s,i){const n=t.iScale,r=t.vScale,o=n.getLabels(),a=n===r,l=[];let c,u,h,d;for(c=s,u=s+i;c<u;++c)d=e[c],h={},h[n.axis]=a||n.parse(o[c],c),l.push(_h(d,h,r,c));return l}function Kr(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function qb(t,e,s){return t!==0?es(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function Kb(t){let e,s,i,n,r;return t.horizontal?(e=t.base>t.x,s="left",i="right"):(e=t.base<t.y,s="bottom",i="top"),e?(n="end",r="start"):(n="start",r="end"),{start:s,end:i,reverse:e,top:n,bottom:r}}function Gb(t,e,s,i){let n=e.borderSkipped;const r={};if(!n){t.borderSkipped=r;return}if(n===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Kb(t);n==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===i?n=c:(s._bottom||0)===i?n=u:(r[Bl(u,o,a,l)]=!0,n=c)),r[Bl(n,o,a,l)]=!0,t.borderSkipped=r}function Bl(t,e,s,i){return i?(t=Jb(t,e,s),t=Ul(t,s,e)):t=Ul(t,e,s),t}function Jb(t,e,s){return t===e?s:t===s?e:t}function Ul(t,e,s){return t==="start"?e:t==="end"?s:t}function Yb(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class Xb extends mh{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,s,i,n){return Fl(e,s,i,n)}parseArrayData(e,s,i,n){return Fl(e,s,i,n)}parseObjectData(e,s,i,n){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,g,p;for(d=i,f=i+n;d<f;++d)p=s[d],g={},g[r.axis]=r.parse(ti(p,c),d),h.push(_h(ti(p,u),g,o,d));return h}updateRangeFromParsed(e,s,i,n){super.updateRangeFromParsed(e,s,i,n);const r=i._custom;r&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:i,vScale:n}=s,r=this.getParsed(e),o=r._custom,a=Kr(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(r[n.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,i,n){const r=n==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(s,n);for(let f=s;f<s+i;f++){const g=this.getParsed(f),p=r||le(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,u),b=(g._stacks||{})[a.axis],x={horizontal:c,base:p.base,enableBorderRadius:!b||Kr(g._custom)||o===b._top||o===b._bottom,x:c?p.head:m.center,y:c?m.center:p.head,height:c?m.size:Math.abs(p.size),width:c?Math.abs(p.size):m.size};d&&(x.options=h||this.resolveDataElementOptions(f,e[f].active?"active":n));const v=x.options||e[f].options;Gb(x,v,b,o),Yb(x,v,u.ratio),this.updateElement(e[f],f,x,n)}}_getStacks(e,s){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(s),l=a&&a[i.axis],c=u=>{const h=u._parsed.find(f=>f[i.axis]===l),d=h&&h[u.vScale.axis];if(le(d)||isNaN(d))return!0};for(const u of n)if(!(s!==void 0&&c(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[se(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,i){const n=this._getStacks(e,i),r=s!==void 0?n.indexOf(s):-1;return r===-1?n.length-1:r}_getRuler(){const e=this.options,s=this._cachedMeta,i=s.iScale,n=[];let r,o;for(r=0,o=s.data.length;r<o;++r)n.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||Hb(s),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:i,index:n},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,u=Kr(c);let h=l[s.axis],d=0,f=i?this.applyStack(s,l,i):h,g,p;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&es(h)!==es(c.barEnd)&&(d=0),d+=h);const m=!le(r)&&!u?r:d;let b=s.getPixelForValue(m);if(this.chart.getDataVisibility(e)?g=s.getPixelForValue(d+f):g=b,p=g-b,Math.abs(p)<o){p=qb(p,s,a)*o,h===a&&(b-=p/2);const x=s.getPixelForDecimal(0),v=s.getPixelForDecimal(1),w=Math.min(x,v),k=Math.max(x,v);b=Math.max(Math.min(b,k),w),g=b+p,i&&!u&&(l._stacks[s.axis]._visualValues[n]=s.getValueForPixel(g)-s.getValueForPixel(b))}if(b===s.getPixelForValue(a)){const x=es(p)*s.getLineWidthForValue(a)/2;b+=x,p-=x}return{size:p,base:b,head:g,center:g+p/2}}_calculateBarIndexPixels(e,s){const i=s.scale,n=this.options,r=n.skipNull,o=se(n.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(s.grouped){const u=r?this._getStackCount(e):s.stackCount,h=n.barThickness==="flex"?zb(e,s,n,u*c):Wb(e,s,n,u*c),d=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(se(d,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+f;a=h.start+h.chunk*g+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,s.min*s.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,s=e.vScale,i=e.data,n=i.length;let r=0;for(;r<n;++r)this.getParsed(r)[s.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}function ds(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class aa{static override(e){Object.assign(aa.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ds()}parse(){return ds()}format(){return ds()}add(){return ds()}diff(){return ds()}startOf(){return ds()}endOf(){return ds()}}var Qb={_date:aa};function Zb(t,e,s,i){const{controller:n,data:r,_sorted:o}=t,a=n._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const c=a._reversePixels?N_:So;if(i){if(n._sharedOptions){const u=r[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const d=c(r,e,s-h),f=c(r,e,s+h);return{lo:d.lo,hi:f.hi}}}}else{const u=c(r,e,s);if(l){const{vScale:h}=n._cachedMeta,{_parsed:d}=t,f=d.slice(0,u.lo+1).reverse().findIndex(p=>!le(p[h.axis]));u.lo-=Math.max(0,f);const g=d.slice(u.hi).findIndex(p=>!le(p[h.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:r.length-1}}function yr(t,e,s,i,n){const r=t.getSortedVisibleDatasetMetas(),o=s[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:d}=Zb(r[a],e,o,n);for(let f=h;f<=d;++f){const g=u[f];g.skip||i(g,c,f)}}}function ey(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(i,n){const r=e?Math.abs(i.x-n.x):0,o=s?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Gr(t,e,s,i,n){const r=[];return!n&&!t.isPointInArea(e)||yr(t,s,e,function(a,l,c){!n&&!rh(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function ty(t,e,s,i){let n=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=D_(o,{x:e.x,y:e.y});$_(h,c,u)&&n.push({element:o,datasetIndex:a,index:l})}return yr(t,s,e,r),n}function sy(t,e,s,i,n,r){let o=[];const a=ey(s);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,n);if(i&&!f)return;const g=u.getCenterPoint(n);if(!(!!r||t.isPointInArea(g))&&!f)return;const m=a(e,g);m<l?(o=[{element:u,datasetIndex:h,index:d}],l=m):m===l&&o.push({element:u,datasetIndex:h,index:d})}return yr(t,s,e,c),o}function Jr(t,e,s,i,n,r){return!r&&!t.isPointInArea(e)?[]:s==="r"&&!i?ty(t,e,s,n):sy(t,e,s,i,n,r)}function Hl(t,e,s,i,n){const r=[],o=s==="x"?"inXRange":"inYRange";let a=!1;return yr(t,s,e,(l,c,u)=>{l[o]&&l[o](e[s],n)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,n))}),i&&!a?[]:r}var iy={modes:{index(t,e,s,i){const n=ps(e,t),r=s.axis||"x",o=s.includeInvisible||!1,a=s.intersect?Gr(t,n,r,i,o):Jr(t,n,r,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,s,i){const n=ps(e,t),r=s.axis||"xy",o=s.includeInvisible||!1;let a=s.intersect?Gr(t,n,r,i,o):Jr(t,n,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,s,i){const n=ps(e,t),r=s.axis||"xy",o=s.includeInvisible||!1;return Gr(t,n,r,i,o)},nearest(t,e,s,i){const n=ps(e,t),r=s.axis||"xy",o=s.includeInvisible||!1;return Jr(t,n,r,s.intersect,i,o)},x(t,e,s,i){const n=ps(e,t);return Hl(t,n,"x",s.intersect,i)},y(t,e,s,i){const n=ps(e,t);return Hl(t,n,"y",s.intersect,i)}}};const bh=["left","top","right","bottom"];function di(t,e){return t.filter(s=>s.pos===e)}function Wl(t,e){return t.filter(s=>bh.indexOf(s.pos)===-1&&s.box.axis===e)}function fi(t,e){return t.sort((s,i)=>{const n=e?i:s,r=e?s:i;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function ny(t){const e=[];let s,i,n,r,o,a;for(s=0,i=(t||[]).length;s<i;++s)n=t[s],{position:r,options:{stack:o,stackWeight:a=1}}=n,e.push({index:s,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:a});return e}function ry(t){const e={};for(const s of t){const{stack:i,pos:n,stackWeight:r}=s;if(!i||!bh.includes(n))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function oy(t,e){const s=ry(t),{vBoxMaxWidth:i,hBoxMaxHeight:n}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:l}=a.box,c=s[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=n):(a.width=i,a.height=u?u*n:l&&e.availableHeight)}return s}function ay(t){const e=ny(t),s=fi(e.filter(c=>c.box.fullSize),!0),i=fi(di(e,"left"),!0),n=fi(di(e,"right")),r=fi(di(e,"top"),!0),o=fi(di(e,"bottom")),a=Wl(e,"x"),l=Wl(e,"y");return{fullSize:s,leftAndTop:i.concat(r),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:di(e,"chartArea"),vertical:i.concat(n).concat(l),horizontal:r.concat(o).concat(a)}}function zl(t,e,s,i){return Math.max(t[s],e[s])+Math.max(t[i],e[i])}function yh(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function ly(t,e,s,i){const{pos:n,box:r}=s,o=t.maxPadding;if(!ee(n)){s.size&&(t[n]-=s.size);const h=i[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?r.height:r.width),s.size=h.size/h.count,t[n]+=s.size}r.getPadding&&yh(o,r.getPadding());const a=Math.max(0,e.outerWidth-zl(o,t,"left","right")),l=Math.max(0,e.outerHeight-zl(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,s.horizontal?{same:c,other:u}:{same:u,other:c}}function cy(t){const e=t.maxPadding;function s(i){const n=Math.max(e[i]-t[i],0);return t[i]+=n,n}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function uy(t,e){const s=e.maxPadding;function i(n){const r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(e[o],s[o])}),r}return i(t?["left","right"]:["top","bottom"])}function vi(t,e,s,i){const n=[];let r,o,a,l,c,u;for(r=0,o=t.length,c=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,uy(a.horizontal,e));const{same:h,other:d}=ly(e,s,a,i);c|=h&&n.length,u=u||d,l.fullSize||n.push(a)}return c&&vi(n,e,s,i)||u}function yn(t,e,s,i,n){t.top=s,t.left=e,t.right=e+i,t.bottom=s+n,t.width=i,t.height=n}function Vl(t,e,s,i){const n=s.padding;let{x:r,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;Ki(c.start)&&(o=c.start),l.fullSize?yn(l,n.left,o,s.outerWidth-n.right-n.left,d):yn(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;Ki(c.start)&&(r=c.start),l.fullSize?yn(l,r,n.top,d,s.outerHeight-n.bottom-n.top):yn(l,r,e.top+c.placed,d,h),c.start=r,c.placed+=h,r=l.right}}e.x=r,e.y=o}var Jt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,i){if(!t)return;const n=dt(t.options.layout.padding),r=Math.max(e-n.width,0),o=Math.max(s-n.height,0),a=ay(t.boxes),l=a.vertical,c=a.horizontal;re(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const u=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},n);yh(d,dt(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:n.left,y:n.top},n),g=oy(l.concat(c),h);vi(a.fullSize,f,h,g),vi(l,f,h,g),vi(c,f,h,g)&&vi(l,f,h,g),cy(f),Vl(a.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,Vl(a.rightAndBottom,f,h,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},re(a.chartArea,p=>{const m=p.box;Object.assign(m,t.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class vh{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,i){}removeEventListener(e,s,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,i,n){return s=Math.max(0,s||e.width),i=i||e.height,{width:s,height:Math.max(0,n?Math.floor(s/n):i)}}isAttached(e){return!0}updateConfig(e){}}class hy extends vh{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Rn="$chartjs",dy={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ql=t=>t===null||t==="";function fy(t,e){const s=t.style,i=t.getAttribute("height"),n=t.getAttribute("width");if(t[Rn]={initial:{height:i,width:n,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",ql(n)){const r=Il(t,"width");r!==void 0&&(t.width=r)}if(ql(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=Il(t,"height");r!==void 0&&(t.height=r)}return t}const wh=xb?{passive:!0}:!1;function gy(t,e,s){t&&t.addEventListener(e,s,wh)}function py(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,wh)}function my(t,e){const s=dy[t.type]||t.type,{x:i,y:n}=ps(t,e);return{type:s,chart:e,native:t,x:i!==void 0?i:null,y:n!==void 0?n:null}}function er(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function _y(t,e,s){const i=t.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||er(a.addedNodes,i),o=o&&!er(a.removedNodes,i);o&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}function by(t,e,s){const i=t.canvas,n=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||er(a.removedNodes,i),o=o&&!er(a.addedNodes,i);o&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}const Gi=new Map;let Kl=0;function xh(){const t=window.devicePixelRatio;t!==Kl&&(Kl=t,Gi.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function yy(t,e){Gi.size||window.addEventListener("resize",xh),Gi.set(t,e)}function vy(t){Gi.delete(t),Gi.size||window.removeEventListener("resize",xh)}function wy(t,e,s){const i=t.canvas,n=i&&oa(i);if(!n)return;const r=Zu((a,l)=>{const c=n.clientWidth;s(a,l),c<n.clientWidth&&s()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(n),yy(t,r),o}function Yr(t,e,s){s&&s.disconnect(),e==="resize"&&vy(t)}function xy(t,e,s){const i=t.canvas,n=Zu(r=>{t.ctx!==null&&s(my(r,t))},t);return gy(i,e,n),n}class Sy extends vh{acquireContext(e,s){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(fy(e,s),i):null}releaseContext(e){const s=e.canvas;if(!s[Rn])return!1;const i=s[Rn].initial;["height","width"].forEach(r=>{const o=i[r];le(o)?s.removeAttribute(r):s.setAttribute(r,o)});const n=i.style||{};return Object.keys(n).forEach(r=>{s.style[r]=n[r]}),s.width=s.width,delete s[Rn],!0}addEventListener(e,s,i){this.removeEventListener(e,s);const n=e.$proxies||(e.$proxies={}),o={attach:_y,detach:by,resize:wy}[s]||xy;n[s]=o(e,s,i)}removeEventListener(e,s){const i=e.$proxies||(e.$proxies={}),n=i[s];if(!n)return;({attach:Yr,detach:Yr,resize:Yr}[s]||py)(e,s,n),i[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,i,n){return wb(e,s,i,n)}isAttached(e){const s=e&&oa(e);return!!(s&&s.isConnected)}}function ky(t){return!ra()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?hy:Sy}let tn=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:s,y:i}=this.getProps(["x","y"],e);return{x:s,y:i}}hasValue(){return Yn(this.x)&&Yn(this.y)}getProps(e,s){const i=this.$animations;if(!s||!i)return this;const n={};return e.forEach(r=>{n[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),n}};function Ty(t,e){const s=t.options.ticks,i=Oy(t),n=Math.min(s.maxTicksLimit||i,i),r=s.major.enabled?Ay(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>n)return Cy(e,c,r,o/n),c;const u=Ey(r,e,n);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(vn(e,c,u,le(f)?0:a-f,a),h=0,d=o-1;h<d;h++)vn(e,c,u,r[h],r[h+1]);return vn(e,c,u,l,le(f)?e.length:l+f),c}return vn(e,c,u),c}function Oy(t){const e=t.options.offset,s=t._tickSize(),i=t._length/s+(e?0:1),n=t._maxLength/s;return Math.floor(Math.min(i,n))}function Ey(t,e,s){const i=Py(t),n=e.length/s;if(!i)return Math.max(n,1);const r=C_(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>n)return l}return Math.max(n,1)}function Ay(t){const e=[];let s,i;for(s=0,i=t.length;s<i;s++)t[s].major&&e.push(s);return e}function Cy(t,e,s,i){let n=0,r=s[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),n++,r=s[n*i])}function vn(t,e,s,i,n){const r=se(i,0),o=Math.min(se(n,t.length),t.length);let a=0,l,c,u;for(s=Math.ceil(s),n&&(l=n-i,s=l/Math.floor(l/s)),u=r;u<0;)a++,u=Math.round(r+a*s);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(r+a*s))}function Py(t){const e=t.length;let s,i;if(e<2)return!1;for(i=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==i)return!1;return i}const Ry=t=>t==="left"?"right":t==="right"?"left":t,Gl=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,Jl=(t,e)=>Math.min(e||t,t);function Yl(t,e){const s=[],i=t.length/e,n=t.length;let r=0;for(;r<n;r+=i)s.push(t[Math.floor(r)]);return s}function Iy(t,e,s){const i=t.ticks.length,n=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(n),c;if(!(s&&(i===1?c=Math.max(l-r,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(n-1))/2,l+=n<e?c:-c,l<r-a||l>o+a)))return l}function My(t,e){re(t,s=>{const i=s.gc,n=i.length/2;let r;if(n>e){for(r=0;r<n;++r)delete s.data[i[r]];i.splice(0,n)}})}function gi(t){return t.drawTicks?t.tickLength:0}function Xl(t,e){if(!t.display)return 0;const s=Ue(t.font,e),i=dt(t.padding);return(xe(t.text)?t.text.length:1)*s.lineHeight+i.height}function Dy(t,e){return ni(t,{scale:e,type:"scale"})}function jy(t,e,s){return ni(t,{tick:s,index:e,type:"tick"})}function $y(t,e,s){let i=eh(t);return(s&&e!=="right"||!s&&e==="right")&&(i=Ry(i)),i}function Ly(t,e,s,i){const{top:n,left:r,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,f,g;const p=o-n,m=a-r;if(t.isHorizontal()){if(f=Ke(i,r,a),ee(s)){const b=Object.keys(s)[0],x=s[b];g=u[b].getPixelForValue(x)+p-e}else s==="center"?g=(c.bottom+c.top)/2+p-e:g=Gl(t,s,e);d=a-r}else{if(ee(s)){const b=Object.keys(s)[0],x=s[b];f=u[b].getPixelForValue(x)-m+e}else s==="center"?f=(c.left+c.right)/2-m+e:f=Gl(t,s,e);g=Ke(i,o,n),h=s==="left"?-lt:lt}return{titleX:f,titleY:g,maxWidth:d,rotation:h}}class ri extends tn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:i,_suggestedMax:n}=this;return e=_t(e,Number.POSITIVE_INFINITY),s=_t(s,Number.NEGATIVE_INFINITY),i=_t(i,Number.POSITIVE_INFINITY),n=_t(n,Number.NEGATIVE_INFINITY),{min:_t(e,i),max:_t(s,n),minDefined:tt(e),maxDefined:tt(s)}}getMinMax(e){let{min:s,max:i,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:s,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),n||(s=Math.min(s,o.min)),r||(i=Math.max(i,o.max));return s=r&&s>i?i:s,i=n&&s>i?s:i,{min:_t(s,_t(i,s)),max:_t(i,_t(s,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){fe(this.options.beforeUpdate,[this])}update(e,s,i){const{beginAtZero:n,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ob(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Yl(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Ty(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,i;this.isHorizontal()?(s=this.left,i=this.right):(s=this.top,i=this.bottom,e=!e),this._startPixel=s,this._endPixel=i,this._reversePixels=e,this._length=i-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){fe(this.options.afterUpdate,[this])}beforeSetDimensions(){fe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){fe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),fe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){fe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let i,n,r;for(i=0,n=e.length;i<n;i++)r=e[i],r.label=fe(s.callback,[r.value,i,e],this)}afterTickToLabelConversion(){fe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){fe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,i=Jl(this.ticks.length,e.ticks.maxTicksLimit),n=s.minRotation||0,r=s.maxRotation;let o=n,a,l,c;if(!this._isVisible()||!s.display||n>=r||i<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=ct(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-gi(e.grid)-s.padding-Xl(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=M_(Math.min(Math.asin(ct((u.highest.height+6)/a,-1,1)),Math.asin(ct(l/c,-1,1))-Math.asin(ct(d/c,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){fe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){fe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:i,title:n,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Xl(n,s.options.font);if(a?(e.width=this.maxWidth,e.height=gi(r)+l):(e.height=this.maxHeight,e.width=gi(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,g=xs(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(a){const b=i.mirror?0:m*h.width+p*d.height;e.height=Math.min(this.maxHeight,e.height+b+f)}else{const b=i.mirror?0:p*h.width+m*d.height;e.width=Math.min(this.maxWidth,e.width+b+f)}this._calculatePadding(c,u,m,p)}}this._handleMargins(),a?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,i,n){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=n*e.width,f=i*s.height):(d=i*e.height,f=n*s.width):r==="start"?f=s.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,f=s.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=s.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=s.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){fe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,i;for(s=0,i=e.length;s<i;s++)le(e[s].label)&&(e.splice(s,1),i--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let i=this.ticks;s<i.length&&(i=Yl(i,s)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,i){const{ctx:n,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(s/Jl(s,i));let c=0,u=0,h,d,f,g,p,m,b,x,v,w,k;for(h=0;h<s;h+=l){if(g=e[h].label,p=this._resolveTickFontOptions(h),n.font=m=p.string,b=r[m]=r[m]||{data:{},gc:[]},x=p.lineHeight,v=w=0,!le(g)&&!xe(g))v=Ol(n,b.data,b.gc,v,g),w=x;else if(xe(g))for(d=0,f=g.length;d<f;++d)k=g[d],!le(k)&&!xe(k)&&(v=Ol(n,b.data,b.gc,v,k),w+=x);o.push(v),a.push(w),c=Math.max(v,c),u=Math.max(w,u)}My(r,s);const C=o.indexOf(c),I=a.indexOf(u),j=U=>({width:o[U]||0,height:a[U]||0});return{first:j(0),last:j(s-1),widest:j(C),highest:j(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return L_(this._alignToPixels?hs(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const i=s[e];return i.$context||(i.$context=jy(this.getContext(),e,i))}return this.$context||(this.$context=Dy(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=xs(this.labelRotation),i=Math.abs(Math.cos(s)),n=Math.abs(Math.sin(s)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*n?a/i:l/n:l*n<a*i?l/i:a/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,i=this.chart,n=this.options,{grid:r,position:o,border:a}=n,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=gi(r),f=[],g=a.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,b=function(Q){return hs(i,Q,p)};let x,v,w,k,C,I,j,U,K,q,Y,ve;if(o==="top")x=b(this.bottom),I=this.bottom-d,U=x-m,q=b(e.top)+m,ve=e.bottom;else if(o==="bottom")x=b(this.top),q=e.top,ve=b(e.bottom)-m,I=x+m,U=this.top+d;else if(o==="left")x=b(this.right),C=this.right-d,j=x-m,K=b(e.left)+m,Y=e.right;else if(o==="right")x=b(this.left),K=e.left,Y=b(e.right)-m,C=x+m,j=this.left+d;else if(s==="x"){if(o==="center")x=b((e.top+e.bottom)/2+.5);else if(ee(o)){const Q=Object.keys(o)[0],G=o[Q];x=b(this.chart.scales[Q].getPixelForValue(G))}q=e.top,ve=e.bottom,I=x+m,U=I+d}else if(s==="y"){if(o==="center")x=b((e.left+e.right)/2);else if(ee(o)){const Q=Object.keys(o)[0],G=o[Q];x=b(this.chart.scales[Q].getPixelForValue(G))}C=x-m,j=C-d,K=e.left,Y=e.right}const Me=se(n.ticks.maxTicksLimit,h),pe=Math.max(1,Math.ceil(h/Me));for(v=0;v<h;v+=pe){const Q=this.getContext(v),G=r.setContext(Q),te=a.setContext(Q),Ye=G.lineWidth,st=G.color,Xe=te.dash||[],Se=te.dashOffset,Ut=G.tickWidth,Tt=G.tickColor,ns=G.tickBorderDash||[],We=G.tickBorderDashOffset;w=Iy(this,v,l),w!==void 0&&(k=hs(i,w,Ye),c?C=j=K=Y=k:I=U=q=ve=k,f.push({tx1:C,ty1:I,tx2:j,ty2:U,x1:K,y1:q,x2:Y,y2:ve,width:Ye,color:st,borderDash:Xe,borderDashOffset:Se,tickWidth:Ut,tickColor:Tt,tickBorderDash:ns,tickBorderDashOffset:We}))}return this._ticksLength=h,this._borderValue=x,f}_computeLabelItems(e){const s=this.axis,i=this.options,{position:n,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,d=gi(i.grid),f=d+u,g=h?-u:f,p=-xs(this.labelRotation),m=[];let b,x,v,w,k,C,I,j,U,K,q,Y,ve="middle";if(n==="top")C=this.bottom-g,I=this._getXAxisLabelAlignment();else if(n==="bottom")C=this.top+g,I=this._getXAxisLabelAlignment();else if(n==="left"){const pe=this._getYAxisLabelAlignment(d);I=pe.textAlign,k=pe.x}else if(n==="right"){const pe=this._getYAxisLabelAlignment(d);I=pe.textAlign,k=pe.x}else if(s==="x"){if(n==="center")C=(e.top+e.bottom)/2+f;else if(ee(n)){const pe=Object.keys(n)[0],Q=n[pe];C=this.chart.scales[pe].getPixelForValue(Q)+f}I=this._getXAxisLabelAlignment()}else if(s==="y"){if(n==="center")k=(e.left+e.right)/2-f;else if(ee(n)){const pe=Object.keys(n)[0],Q=n[pe];k=this.chart.scales[pe].getPixelForValue(Q)}I=this._getYAxisLabelAlignment(d).textAlign}s==="y"&&(l==="start"?ve="top":l==="end"&&(ve="bottom"));const Me=this._getLabelSizes();for(b=0,x=a.length;b<x;++b){v=a[b],w=v.label;const pe=r.setContext(this.getContext(b));j=this.getPixelForTick(b)+r.labelOffset,U=this._resolveTickFontOptions(b),K=U.lineHeight,q=xe(w)?w.length:1;const Q=q/2,G=pe.color,te=pe.textStrokeColor,Ye=pe.textStrokeWidth;let st=I;o?(k=j,I==="inner"&&(b===x-1?st=this.options.reverse?"left":"right":b===0?st=this.options.reverse?"right":"left":st="center"),n==="top"?c==="near"||p!==0?Y=-q*K+K/2:c==="center"?Y=-Me.highest.height/2-Q*K+K:Y=-Me.highest.height+K/2:c==="near"||p!==0?Y=K/2:c==="center"?Y=Me.highest.height/2-Q*K:Y=Me.highest.height-q*K,h&&(Y*=-1),p!==0&&!pe.showLabelBackdrop&&(k+=K/2*Math.sin(p))):(C=j,Y=(1-q)*K/2);let Xe;if(pe.showLabelBackdrop){const Se=dt(pe.backdropPadding),Ut=Me.heights[b],Tt=Me.widths[b];let ns=Y-Se.top,We=0-Se.left;switch(ve){case"middle":ns-=Ut/2;break;case"bottom":ns-=Ut;break}switch(I){case"center":We-=Tt/2;break;case"right":We-=Tt;break;case"inner":b===x-1?We-=Tt:b>0&&(We-=Tt/2);break}Xe={left:We,top:ns,width:Tt+Se.width,height:Ut+Se.height,color:pe.backdropColor}}m.push({label:w,font:U,textOffset:Y,options:{rotation:p,color:G,strokeColor:te,strokeWidth:Ye,textAlign:st,textBaseline:ve,translation:[k,C],backdrop:Xe}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-xs(this.labelRotation))return e==="top"?"left":"right";let n="center";return s.align==="start"?n="left":s.align==="end"?n="right":s.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:i,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return s==="left"?n?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):s==="right"?n?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:i,top:n,width:r,height:o}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(i,n,r,o),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const n=this.ticks.findIndex(r=>r.value===e);return n>=0?s.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const s=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(s.display)for(r=0,o=n.length;r<o;++r){const l=n[r];s.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:i,grid:n}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=hs(e,this.left,o)-o/2,u=hs(e,this.right,a)+a/2,h=d=l):(h=hs(e,this.top,o)-o/2,d=hs(e,this.bottom,a)+a/2,c=u=l),s.save(),s.lineWidth=r.width,s.strokeStyle=r.color,s.beginPath(),s.moveTo(c,h),s.lineTo(u,d),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&ea(i,n);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Xn(i,c,0,u,l,a)}n&&ta(i)}drawTitle(){const{ctx:e,options:{position:s,title:i,reverse:n}}=this;if(!i.display)return;const r=Ue(i.font),o=dt(i.padding),a=i.align;let l=r.lineHeight/2;s==="bottom"||s==="center"||ee(s)?(l+=o.bottom,xe(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=Ly(this,l,s,a);Xn(e,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:d,textAlign:$y(a,s,n),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,i=se(e.grid&&e.grid.z,-1),n=se(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ri.prototype.draw?[{z:s,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:s,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let r,o;for(r=0,o=s.length;r<o;++r){const a=s[r];a[i]===this.id&&(!e||a.type===e)&&n.push(a)}return n}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Ue(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class wn{constructor(e,s,i){this.type=e,this.scope=s,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let i;By(s)&&(i=this.register(s));const n=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in n||(n[r]=e,Ny(e,o,i),this.override&&_e.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const s=this.items,i=e.id,n=this.scope;i in s&&delete s[i],n&&i in _e[n]&&(delete _e[n][i],this.override&&delete Os[i])}}function Ny(t,e,s){const i=qi(Object.create(null),[s?_e.get(s):{},_e.get(e),t.defaults]);_e.set(e,i),t.defaultRoutes&&Fy(e,t.defaultRoutes),t.descriptors&&_e.describe(e,t.descriptors)}function Fy(t,e){Object.keys(e).forEach(s=>{const i=s.split("."),n=i.pop(),r=[t].concat(i).join("."),o=e[s].split("."),a=o.pop(),l=o.join(".");_e.route(r,n,l,a)})}function By(t){return"id"in t&&"defaults"in t}class Uy{constructor(){this.controllers=new wn(mh,"datasets",!0),this.elements=new wn(tn,"elements"),this.plugins=new wn(Object,"plugins"),this.scales=new wn(ri,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,i){[...s].forEach(n=>{const r=i||this._getRegistryForType(n);i||r.isForType(n)||r===this.plugins&&n.id?this._exec(e,r,n):re(n,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,s,i){const n=Qo(e);fe(i["before"+n],[],i),s[e](i),fe(i["after"+n],[],i)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const i=this._typedRegistries[s];if(i.isForType(e))return i}return this.plugins}_get(e,s,i){const n=s.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return n}}var vt=new Uy;class Hy{constructor(){this._init=void 0}notify(e,s,i,n){if(s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const r=n?this._descriptors(e).filter(n):this._descriptors(e),o=this._notify(r,e,s,i);return s==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,s,i,n){n=n||{};for(const r of e){const o=r.plugin,a=o[i],l=[s,n,r.options];if(fe(a,l,o)===!1&&n.cancelable)return!1}return!0}invalidate(){le(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const i=e&&e.config,n=se(i.options&&i.options.plugins,{}),r=Wy(i);return n===!1&&!s?[]:Vy(e,r,n,s)}_notifyStateChanges(e){const s=this._oldCache||[],i=this._cache,n=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(n(s,i),e,"stop"),this._notify(n(i,s),e,"start")}}function Wy(t){const e={},s=[],i=Object.keys(vt.plugins.items);for(let r=0;r<i.length;r++)s.push(vt.getPlugin(i[r]));const n=t.plugins||[];for(let r=0;r<n.length;r++){const o=n[r];s.indexOf(o)===-1&&(s.push(o),e[o.id]=!0)}return{plugins:s,localIds:e}}function zy(t,e){return!e&&t===!1?null:t===!0?{}:t}function Vy(t,{plugins:e,localIds:s},i,n){const r=[],o=t.getContext();for(const a of e){const l=a.id,c=zy(i[l],n);c!==null&&r.push({plugin:a,options:qy(t.config,{plugin:a,local:s[l]},c,o)})}return r}function qy(t,{plugin:e,local:s},i,n){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return s&&e.defaults&&o.push(e.defaults),t.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function To(t,e){const s=_e.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function Ky(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function Gy(t,e){return t===e?"_index_":"_value_"}function Ql(t){if(t==="x"||t==="y"||t==="r")return t}function Jy(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Oo(t,...e){if(Ql(t))return t;for(const s of e){const i=s.axis||Jy(s.position)||t.length>1&&Ql(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Zl(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function Yy(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(s.length)return Zl(t,"x",s[0])||Zl(t,"y",s[0])}return{}}function Xy(t,e){const s=Os[t.type]||{scales:{}},i=e.scales||{},n=To(t.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ee(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Oo(o,a,Yy(o,t),_e.scales[a.type]),c=Gy(l,n),u=s.scales||{};r[o]=Ri(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||To(a,e),u=(Os[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=Ky(h,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),Ri(r[f],[{axis:d},i[f],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];Ri(a,[_e.scales[a.type],_e.scale])}),r}function Sh(t){const e=t.options||(t.options={});e.plugins=se(e.plugins,{}),e.scales=Xy(t,e)}function kh(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Qy(t){return t=t||{},t.data=kh(t.data),Sh(t),t}const ec=new Map,Th=new Set;function xn(t,e){let s=ec.get(t);return s||(s=e(),ec.set(t,s),Th.add(s)),s}const pi=(t,e,s)=>{const i=ti(e,s);i!==void 0&&t.add(i)};class Zy{constructor(e){this._config=Qy(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=kh(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Sh(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return xn(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return xn(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return xn(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,i=this.type;return xn(`${i}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const i=this._scopeCache;let n=i.get(e);return(!n||s)&&(n=new Map,i.set(e,n)),n}getOptionScopes(e,s,i){const{options:n,type:r}=this,o=this._cachedScopes(e,i),a=o.get(s);if(a)return a;const l=new Set;s.forEach(u=>{e&&(l.add(e),u.forEach(h=>pi(l,e,h))),u.forEach(h=>pi(l,n,h)),u.forEach(h=>pi(l,Os[r]||{},h)),u.forEach(h=>pi(l,_e,h)),u.forEach(h=>pi(l,ko,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Th.has(s)&&o.set(s,c),c}chartOptionScopes(){const{options:e,type:s}=this;return[e,Os[s]||{},_e.datasets[s]||{},{type:s},_e,ko]}resolveNamedOptions(e,s,i,n=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=tc(this._resolverCache,e,n);let l=o;if(tv(o,s)){r.$shared=!1,i=is(i)?i():i;const c=this.createResolver(e,i,a);l=si(o,i,c)}for(const c of s)r[c]=l[c];return r}createResolver(e,s,i=[""],n){const{resolver:r}=tc(this._resolverCache,e,i);return ee(s)?si(r,s,void 0,n):r}}function tc(t,e,s){let i=t.get(e);i||(i=new Map,t.set(e,i));const n=s.join();let r=i.get(n);return r||(r={resolver:sa(e,s),subPrefixes:s.filter(a=>!a.toLowerCase().includes("hover"))},i.set(n,r)),r}const ev=t=>ee(t)&&Object.getOwnPropertyNames(t).some(e=>is(t[e]));function tv(t,e){const{isScriptable:s,isIndexable:i}=lh(t);for(const n of e){const r=s(n),o=i(n),a=(o||r)&&t[n];if(r&&(is(a)||ev(a))||o&&xe(a))return!0}return!1}var sv="4.5.1";const iv=["top","bottom","left","right","chartArea"];function sc(t,e){return t==="top"||t==="bottom"||iv.indexOf(t)===-1&&e==="x"}function ic(t,e){return function(s,i){return s[t]===i[t]?s[e]-i[e]:s[t]-i[t]}}function nc(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),fe(s&&s.onComplete,[t],e)}function nv(t){const e=t.chart,s=e.options.animation;fe(s&&s.onProgress,[t],e)}function Oh(t){return ra()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const In={},rc=t=>{const e=Oh(t);return Object.values(In).filter(s=>s.canvas===e).pop()};function rv(t,e,s){const i=Object.keys(t);for(const n of i){const r=+n;if(r>=e){const o=t[n];delete t[n],(s>0||r>e)&&(t[r+s]=o)}}}function ov(t,e,s,i){return!s||t.type==="mouseout"?null:i?e:t}let vr=class{static defaults=_e;static instances=In;static overrides=Os;static registry=vt;static version=sv;static getChart=rc;static register(...e){vt.add(...e),oc()}static unregister(...e){vt.remove(...e),oc()}constructor(e,s){const i=this.config=new Zy(s),n=Oh(e),r=rc(n);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||ky(n)),this.platform.updateConfig(i);const a=this.platform.acquireContext(n,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=w_(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hy,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=U_(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],In[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}At.listen(this,"complete",nc),At.listen(this,"progress",nv),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:i,height:n,_aspectRatio:r}=this;return le(e)?s&&r?r:n?i/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return vt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Rl(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return El(this.canvas,this.ctx),this}stop(){return At.stop(this),this}resize(e,s){At.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const i=this.options,n=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,e,s,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Rl(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),fe(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};re(s,(i,n)=>{i.id=n})}buildOrUpdateScales(){const e=this.options,s=e.scales,i=this.scales,n=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];s&&(r=r.concat(Object.keys(s).map(o=>{const a=s[o],l=Oo(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),re(r,o=>{const a=o.options,l=a.id,c=Oo(l,a),u=se(a.type,o.dtype);(a.position===void 0||sc(a.position,c)!==sc(o.dposition))&&(a.position=o.dposition),n[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=vt.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),re(n,(o,a)=>{o||delete i[a]}),re(i,o=>{Jt.configure(this,o,o.options),Jt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,i=e.length;if(e.sort((n,r)=>n.index-r.index),i>s){for(let n=s;n<i;++n)this._destroyDatasetMeta(n);e.splice(s,i-s)}this._sortedMetasets=e.slice(0).sort(ic("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((i,n)=>{s.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=s.length;i<n;i++){const r=s[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||To(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=vt.getController(a),{datasetElementType:c,dataElementType:u}=_e.datasets[a];Object.assign(l,{dataElementType:vt.getElement(u),datasetElementType:c&&vt.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){re(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const i=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!n&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),n||re(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ic("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){re(this.scales,e=>{Jt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!_l(s,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:r}of s){const o=i==="_removeElements"?-r:r;rv(e,n,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),n=i(0);for(let r=1;r<s;r++)if(!_l(n,i(r)))return;return Array.from(n).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Jt.update(this,this.width,this.height,e);const s=this.chartArea,i=s.width<=0||s.height<=0;this._layers=[],re(this.boxes,n=>{i&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,r)=>{n._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,i=this.data.datasets.length;s<i;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,i=this.data.datasets.length;s<i;++s)this._updateDataset(s,is(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const i=this.getDatasetMeta(e),n={meta:i,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(i.controller._update(s),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(At.has(this)?this.attached&&!At.running(this)&&At.start(this):(this.draw(),nc({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,i=[];let n,r;for(n=0,r=s.length;n<r;++n){const o=s[n];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,i={meta:e,index:e.index,cancelable:!0},n=Ob(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(n&&ea(s,n),e.controller.draw(),n&&ta(s),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return rh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,i,n){const r=iy.modes[s];return typeof r=="function"?r(this,e,i,n):[]}getDatasetMeta(e){const s=this.data.datasets[e],i=this._metasets;let n=i.filter(r=>r&&r._dataset===s).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=ni(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!s.hidden}setDatasetVisibility(e,s){const i=this.getDatasetMeta(e);i.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,i){const n=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,n);Ki(s)?(r.data[s].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?n:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),At.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),El(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete In[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,i=(r,o)=>{s.addEventListener(this,r,o),e[r]=o},n=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};re(this.options.events,r=>i(r,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,i=(l,c)=>{s.addEventListener(this,l,c),e[l]=c},n=(l,c)=>{e[l]&&(s.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{n("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),i("attach",a)},s.isAttached(this.canvas)?a():o()}unbindEvents(){re(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},re(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,i){const n=i?"set":"remove";let r,o,a,l;for(s==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Kn(i,s)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,s))}notifyPlugins(e,s,i){return this._plugins.notify(this,e,s,i)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,i){const n=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(s,e),a=i?e:r(e,s);o.length&&this.updateHoverStyle(o,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(e,s){const i={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},n=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,n)===!1)return;const r=this._handleEvent(e,s,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(r||i.changed)&&this.render(),this}_handleEvent(e,s,i){const{_active:n=[],options:r}=this,o=s,a=this._getActiveElements(e,n,i,o),l=E_(e),c=ov(e,this._lastEvent,i,l);i&&(this._lastEvent=null,fe(r.onHover,[e,a,this],this),l&&fe(r.onClick,[e,a,this],this));const u=!Kn(a,n);return(u||s)&&(this._active=a,this._updateHoverStyles(a,n,s)),this._lastEvent=c,u}_getActiveElements(e,s,i,n){if(e.type==="mouseout")return[];if(!i)return s;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,n)}};function oc(){return re(vr.instances,t=>t._plugins.invalidate())}function Eh(t,e){const{x:s,y:i,base:n,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(s,n),l=Math.max(s,n),c=i-h,u=i+h):(h=r/2,a=s-h,l=s+h,c=Math.min(i,n),u=Math.max(i,n)),{left:a,top:c,right:l,bottom:u}}function Yt(t,e,s,i){return t?0:ct(e,s,i)}function av(t,e,s){const i=t.options.borderWidth,n=t.borderSkipped,r=ah(i);return{t:Yt(n.top,r.top,0,s),r:Yt(n.right,r.right,0,e),b:Yt(n.bottom,r.bottom,0,s),l:Yt(n.left,r.left,0,e)}}function lv(t,e,s){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,r=Xs(n),o=Math.min(e,s),a=t.borderSkipped,l=i||ee(n);return{topLeft:Yt(!l||a.top||a.left,r.topLeft,0,o),topRight:Yt(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Yt(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Yt(!l||a.bottom||a.right,r.bottomRight,0,o)}}function cv(t){const e=Eh(t),s=e.right-e.left,i=e.bottom-e.top,n=av(t,s/2,i/2),r=lv(t,s/2,i/2);return{outer:{x:e.left,y:e.top,w:s,h:i,radius:r},inner:{x:e.left+n.l,y:e.top+n.t,w:s-n.l-n.r,h:i-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function Xr(t,e,s,i){const n=e===null,r=s===null,a=t&&!(n&&r)&&Eh(t,i);return a&&(n||Ws(e,a.left,a.right))&&(r||Ws(s,a.top,a.bottom))}function uv(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function hv(t,e){t.rect(e.x,e.y,e.w,e.h)}function Qr(t,e,s={}){const i=t.x!==s.x?-e:0,n=t.y!==s.y?-e:0,r=(t.x+t.w!==s.x+s.w?e:0)-i,o=(t.y+t.h!==s.y+s.h?e:0)-n;return{x:t.x+i,y:t.y+n,w:t.w+r,h:t.h+o,radius:t.radius}}class dv extends tn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:i,backgroundColor:n}}=this,{inner:r,outer:o}=cv(this),a=uv(o.radius)?Qn:hv;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,Qr(o,s,r)),e.clip(),a(e,Qr(r,-s,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Qr(r,s)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,s,i){return Xr(this,e,s,i)}inXRange(e,s){return Xr(this,e,null,s)}inYRange(e,s){return Xr(this,null,e,s)}getCenterPoint(e){const{x:s,y:i,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(s+n)/2:s,y:r?i:(i+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const ac=(t,e)=>{let{boxHeight:s=e,boxWidth:i=e}=t;return t.usePointStyle&&(s=Math.min(s,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:s,itemHeight:Math.max(e,s)}},fv=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class lc extends tn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,i){this.maxWidth=e,this.maxHeight=s,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=fe(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(i=>e.filter(i,this.chart.data))),e.sort&&(s=s.sort((i,n)=>e.sort(i,n,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,n=Ue(i.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=ac(i,r);let c,u;s.font=n.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,n,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,i,n){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=n+a;let h=e;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((g,p)=>{const m=i+s/2+r.measureText(g.text).width;(p===0||c[c.length-1]+m+2*a>o)&&(h+=u,c[c.length-(p>0?0:1)]=0,f+=u,d++),l[p]={left:0,top:f,row:d,width:m,height:n},c[c.length-1]+=m+a}),h}_fitCols(e,s,i,n){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,g=0,p=0;return this.legendItems.forEach((m,b)=>{const{itemWidth:x,itemHeight:v}=gv(i,s,r,m,n);b>0&&f+v+2*a>u&&(h+=d+a,c.push({width:d,height:f}),g+=d+a,p++,d=f=0),l[b]={left:g,top:f,col:p,width:x,height:v},d=Math.max(d,x),f+=v+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:i,labels:{padding:n},rtl:r}}=this,o=Qs(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ke(i,this.left+n,this.right-this.lineWidths[a]);for(const c of s)a!==c.row&&(a=c.row,l=Ke(i,this.left+n,this.right-this.lineWidths[a])),c.top+=this.top+e+n,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+n}else{let a=0,l=Ke(i,this.top+e+n,this.bottom-this.columnSizes[a].height);for(const c of s)c.col!==a&&(a=c.col,l=Ke(i,this.top+e+n,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+n,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ea(e,this),this._draw(),ta(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:i,ctx:n}=this,{align:r,labels:o}=e,a=_e.color,l=Qs(e.rtl,this.left,this.width),c=Ue(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=ac(o,h),b=function(C,I,j){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;n.save();const U=se(j.lineWidth,1);if(n.fillStyle=se(j.fillStyle,a),n.lineCap=se(j.lineCap,"butt"),n.lineDashOffset=se(j.lineDashOffset,0),n.lineJoin=se(j.lineJoin,"miter"),n.lineWidth=U,n.strokeStyle=se(j.strokeStyle,a),n.setLineDash(se(j.lineDash,[])),o.usePointStyle){const K={radius:p*Math.SQRT2/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:U},q=l.xPlus(C,g/2),Y=I+d;nh(n,K,q,Y,o.pointStyleWidth&&g)}else{const K=I+Math.max((h-p)/2,0),q=l.leftForLtr(C,g),Y=Xs(j.borderRadius);n.beginPath(),Object.values(Y).some(ve=>ve!==0)?Qn(n,{x:q,y:K,w:g,h:p,radius:Y}):n.rect(q,K,g,p),n.fill(),U!==0&&n.stroke()}n.restore()},x=function(C,I,j){Xn(n,j.text,C,I+m/2,c,{strikethrough:j.hidden,textAlign:l.textAlign(j.textAlign)})},v=this.isHorizontal(),w=this._computeTitleHeight();v?f={x:Ke(r,this.left+u,this.right-i[0]),y:this.top+u+w,line:0}:f={x:this.left+u,y:Ke(r,this.top+w+u,this.bottom-s[0].height),line:0},dh(this.ctx,e.textDirection);const k=m+u;this.legendItems.forEach((C,I)=>{n.strokeStyle=C.fontColor,n.fillStyle=C.fontColor;const j=n.measureText(C.text).width,U=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),K=g+d+j;let q=f.x,Y=f.y;l.setWidth(this.width),v?I>0&&q+K+u>this.right&&(Y=f.y+=k,f.line++,q=f.x=Ke(r,this.left+u,this.right-i[f.line])):I>0&&Y+k>this.bottom&&(q=f.x=q+s[f.line].width+u,f.line++,Y=f.y=Ke(r,this.top+w+u,this.bottom-s[f.line].height));const ve=l.x(q);if(b(ve,Y,C),q=H_(U,q+g+d,v?q+K:this.right,e.rtl),x(l.x(q),Y,C),v)f.x+=K+u;else if(typeof C.text!="string"){const Me=c.lineHeight;f.y+=Ah(C,Me)+u}else f.y+=k}),fh(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,i=Ue(s.font),n=dt(s.padding);if(!s.display)return;const r=Qs(e.rtl,this.left,this.width),o=this.ctx,a=s.position,l=i.size/2,c=n.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=Ke(e.align,h,this.right-d);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);u=c+Ke(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=Ke(a,h,h+d);o.textAlign=r.textAlign(eh(a)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=i.string,Xn(o,s.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,s=Ue(e.font),i=dt(e.padding);return e.display?s.lineHeight+i.height:0}_getLegendItemAt(e,s){let i,n,r;if(Ws(e,this.left,this.right)&&Ws(s,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(n=r[i],Ws(e,n.left,n.left+n.width)&&Ws(s,n.top,n.top+n.height))return this.legendItems[i]}return null}handleEvent(e){const s=this.options;if(!_v(e.type,s))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,r=fv(n,i);n&&!r&&fe(s.onLeave,[e,n,this],this),this._hoveredItem=i,i&&!r&&fe(s.onHover,[e,i,this],this)}else i&&fe(s.onClick,[e,i,this],this)}}function gv(t,e,s,i,n){const r=pv(i,t,e,s),o=mv(n,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function pv(t,e,s,i){let n=t.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),e+s.size/2+i.measureText(n).width}function mv(t,e,s){let i=t;return typeof e.text!="string"&&(i=Ah(e,s)),i}function Ah(t,e){const s=t.text?t.text.length:0;return e*s}function _v(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var bv={id:"legend",_element:lc,start(t,e,s){const i=t.legend=new lc({ctx:t.ctx,options:s,chart:t});Jt.configure(t,i,s),Jt.addBox(t,i)},stop(t){Jt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const i=t.legend;Jt.configure(t,i,s),i.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const i=e.datasetIndex,n=s.chart;n.isDatasetVisible(i)?(n.hide(i),e.hidden=!0):(n.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:i,textAlign:n,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(s?0:void 0),u=dt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:n||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const wi={average(t){if(!t.length)return!1;let e,s,i=new Set,n=0,r=0;for(e=0,s=t.length;e<s;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),n+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:n/r}},nearest(t,e){if(!t.length)return!1;let s=e.x,i=e.y,n=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=j_(e,c);u<n&&(n=u,a=l)}}if(a){const l=a.tooltipPosition();s=l.x,i=l.y}return{x:s,y:i}}};function bt(t,e){return e&&(xe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ct(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function yv(t,e){const{element:s,datasetIndex:i,index:n}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(n);return{chart:t,label:o,parsed:r.getParsed(n),raw:t.data.datasets[i].data[n],formattedValue:a,dataset:r.getDataset(),dataIndex:n,datasetIndex:i,element:s}}function cc(t,e){const s=t.chart.ctx,{body:i,footer:n,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=Ue(e.bodyFont),c=Ue(e.titleFont),u=Ue(e.footerFont),h=r.length,d=n.length,f=i.length,g=dt(e.padding);let p=g.height,m=0,b=i.reduce((w,k)=>w+k.before.length+k.lines.length+k.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,h&&(p+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),b){const w=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=f*w+(b-f)*l.lineHeight+(b-1)*e.bodySpacing}d&&(p+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let x=0;const v=function(w){m=Math.max(m,s.measureText(w).width+x)};return s.save(),s.font=c.string,re(t.title,v),s.font=l.string,re(t.beforeBody.concat(t.afterBody),v),x=e.displayColors?o+2+e.boxPadding:0,re(i,w=>{re(w.before,v),re(w.lines,v),re(w.after,v)}),x=0,s.font=u.string,re(t.footer,v),s.restore(),m+=g.width,{width:m,height:p}}function vv(t,e){const{y:s,height:i}=e;return s<i/2?"top":s>t.height-i/2?"bottom":"center"}function wv(t,e,s,i){const{x:n,width:r}=i,o=s.caretSize+s.caretPadding;if(t==="left"&&n+r+o>e.width||t==="right"&&n-r-o<0)return!0}function xv(t,e,s,i){const{x:n,width:r}=s,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=n<=(a+l)/2?"left":"right":n<=r/2?c="left":n>=o-r/2&&(c="right"),wv(c,t,e,s)&&(c="center"),c}function uc(t,e,s){const i=s.yAlign||e.yAlign||vv(t,s);return{xAlign:s.xAlign||e.xAlign||xv(t,e,s,i),yAlign:i}}function Sv(t,e){let{x:s,width:i}=t;return e==="right"?s-=i:e==="center"&&(s-=i/2),s}function kv(t,e,s){let{y:i,height:n}=t;return e==="top"?i+=s:e==="bottom"?i-=n+s:i-=n/2,i}function hc(t,e,s,i){const{caretSize:n,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=s,c=n+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Xs(o);let g=Sv(e,a);const p=kv(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,d)+n:a==="right"&&(g+=Math.max(h,f)+n),{x:ct(g,0,i.width-e.width),y:ct(p,0,i.height-e.height)}}function Sn(t,e,s){const i=dt(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function dc(t){return bt([],Ct(t))}function Tv(t,e,s){return ni(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function fc(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const Ch={beforeTitle:Et,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,i=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return s[e.dataIndex]}return""},afterTitle:Et,beforeBody:Et,beforeLabel:Et,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return le(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Et,afterBody:Et,beforeFooter:Et,footer:Et,afterFooter:Et};function $e(t,e,s,i){const n=t[e].call(s,i);return typeof n>"u"?Ch[e].call(s,i):n}class gc extends tn{static positioners=wi;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&s.options.animation&&i.animations,r=new gh(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Tv(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:i}=s,n=$e(i,"beforeTitle",this,e),r=$e(i,"title",this,e),o=$e(i,"afterTitle",this,e);let a=[];return a=bt(a,Ct(n)),a=bt(a,Ct(r)),a=bt(a,Ct(o)),a}getBeforeBody(e,s){return dc($e(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:i}=s,n=[];return re(e,r=>{const o={before:[],lines:[],after:[]},a=fc(i,r);bt(o.before,Ct($e(a,"beforeLabel",this,r))),bt(o.lines,$e(a,"label",this,r)),bt(o.after,Ct($e(a,"afterLabel",this,r))),n.push(o)}),n}getAfterBody(e,s){return dc($e(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:i}=s,n=$e(i,"beforeFooter",this,e),r=$e(i,"footer",this,e),o=$e(i,"afterFooter",this,e);let a=[];return a=bt(a,Ct(n)),a=bt(a,Ct(r)),a=bt(a,Ct(o)),a}_createItems(e){const s=this._active,i=this.chart.data,n=[],r=[],o=[];let a=[],l,c;for(l=0,c=s.length;l<c;++l)a.push(yv(this.chart,s[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),re(a,u=>{const h=fc(e.callbacks,u);n.push($e(h,"labelColor",this,u)),r.push($e(h,"labelPointStyle",this,u)),o.push($e(h,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,s){const i=this.options.setContext(this.getContext()),n=this._active;let r,o=[];if(!n.length)this.opacity!==0&&(r={opacity:0});else{const a=wi[i.position].call(this,n,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=cc(this,i),c=Object.assign({},a,l),u=uc(this.chart,i,c),h=hc(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,i,n){const r=this.getCaretPosition(e,i,n);s.lineTo(r.x1,r.y1),s.lineTo(r.x2,r.y2),s.lineTo(r.x3,r.y3)}getCaretPosition(e,s,i){const{xAlign:n,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Xs(a),{x:d,y:f}=e,{width:g,height:p}=s;let m,b,x,v,w,k;return r==="center"?(w=f+p/2,n==="left"?(m=d,b=m-o,v=w+o,k=w-o):(m=d+g,b=m+o,v=w-o,k=w+o),x=m):(n==="left"?b=d+Math.max(l,u)+o:n==="right"?b=d+g-Math.max(c,h)-o:b=this.caretX,r==="top"?(v=f,w=v-o,m=b-o,x=b+o):(v=f+p,w=v+o,m=b+o,x=b-o),k=v),{x1:m,x2:b,x3:x,y1:v,y2:w,y3:k}}drawTitle(e,s,i){const n=this.title,r=n.length;let o,a,l;if(r){const c=Qs(i.rtl,this.x,this.width);for(e.x=Sn(this,i.titleAlign,i),s.textAlign=c.textAlign(i.titleAlign),s.textBaseline="middle",o=Ue(i.titleFont),a=i.titleSpacing,s.fillStyle=i.titleColor,s.font=o.string,l=0;l<r;++l)s.fillText(n[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,s,i,n,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=Ue(r.bodyFont),h=Sn(this,"left",r),d=n.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=s.y+f;if(r.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=n.leftForLtr(d,c)+c/2,b=g+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Al(e,p,m,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Al(e,p,m,b)}else{e.lineWidth=ee(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const p=n.leftForLtr(d,c),m=n.leftForLtr(n.xPlus(d,1),c-2),b=Xs(o.borderRadius);Object.values(b).some(x=>x!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Qn(e,{x:p,y:g,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Qn(e,{x:m,y:g+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(p,g,c,l),e.strokeRect(p,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(m,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,s,i){const{body:n}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=Ue(i.bodyFont);let d=h.lineHeight,f=0;const g=Qs(i.rtl,this.x,this.width),p=function(j){s.fillText(j,g.x(e.x+f),e.y+d/2),e.y+=d+r},m=g.textAlign(o);let b,x,v,w,k,C,I;for(s.textAlign=o,s.textBaseline="middle",s.font=h.string,e.x=Sn(this,m,i),s.fillStyle=i.bodyColor,re(this.beforeBody,p),f=a&&m!=="right"?o==="center"?c/2+u:c+2+u:0,w=0,C=n.length;w<C;++w){for(b=n[w],x=this.labelTextColors[w],s.fillStyle=x,re(b.before,p),v=b.lines,a&&v.length&&(this._drawColorBox(s,e,w,g,i),d=Math.max(h.lineHeight,l)),k=0,I=v.length;k<I;++k)p(v[k]),d=h.lineHeight;re(b.after,p)}f=0,d=h.lineHeight,re(this.afterBody,p),e.y-=r}drawFooter(e,s,i){const n=this.footer,r=n.length;let o,a;if(r){const l=Qs(i.rtl,this.x,this.width);for(e.x=Sn(this,i.footerAlign,i),e.y+=i.footerMarginTop,s.textAlign=l.textAlign(i.footerAlign),s.textBaseline="middle",o=Ue(i.footerFont),s.fillStyle=i.footerColor,s.font=o.string,a=0;a<r;++a)s.fillText(n[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,s,i,n){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Xs(n.cornerRadius);s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,s.lineWidth=n.borderWidth,s.beginPath(),s.moveTo(a+h,l),o==="top"&&this.drawCaret(e,s,i,n),s.lineTo(a+c-d,l),s.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(e,s,i,n),s.lineTo(a+c,l+u-g),s.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,s,i,n),s.lineTo(a+f,l+u),s.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&r==="left"&&this.drawCaret(e,s,i,n),s.lineTo(a,l+h),s.quadraticCurveTo(a,l,a+h,l),s.closePath(),s.fill(),n.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,i=this.$animations,n=i&&i.x,r=i&&i.y;if(n||r){const o=wi[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=cc(this,e),l=Object.assign({},o,this._size),c=uc(s,e,l),u=hc(e,l,c,s);(n._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(s);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=dt(s.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,n,s),dh(e,s.textDirection),r.y+=o.top,this.drawTitle(r,e,s),this.drawBody(r,e,s),this.drawFooter(r,e,s),fh(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const i=this._active,n=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Kn(i,n),o=this._positionChanged(n,s);(r||o)&&(this._active=n,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,i=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,r=this._active||[],o=this._getActiveElements(e,r,s,i),a=this._positionChanged(o,e),l=s||!Kn(o,r)||a;return l&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),l}_getActiveElements(e,s,i,n){const r=this.options;if(e.type==="mouseout")return[];if(!n)return s.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,s){const{caretX:i,caretY:n,options:r}=this,o=wi[r.position].call(this,e,s);return o!==!1&&(i!==o.x||n!==o.y)}}var Ov={id:"tooltip",_element:gc,positioners:wi,afterInit(t,e,s){s&&(t.tooltip=new gc({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ch},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Ev=(t,e,s,i)=>(typeof e=="string"?(s=t.push(e)-1,i.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function Av(t,e,s,i){const n=t.indexOf(e);if(n===-1)return Ev(t,e,s,i);const r=t.lastIndexOf(e);return n!==r?s:n}const Cv=(t,e)=>t===null?null:ct(Math.round(t),0,e);function pc(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Pv extends ri{static id="category";static defaults={ticks:{callback:pc}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const i=this.getLabels();for(const{index:n,label:r}of s)i[n]===r&&i.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(le(e))return null;const i=this.getLabels();return s=isFinite(s)&&i[s]===e?s:Av(i,e,se(s,e),this._addedLabels),Cv(s,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),s||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const e=this.min,s=this.max,i=this.options.offset,n=[];let r=this.getLabels();r=e===0&&s===r.length-1?r:r.slice(e,s+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=s;o++)n.push({value:o});return n}getLabelForValue(e){return pc.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Rv(t,e){const s=[],{bounds:n,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=r||1,g=u-1,{min:p,max:m}=e,b=!le(o),x=!le(a),v=!le(c),w=(m-p)/(h+1);let k=yl((m-p)/g/f)*f,C,I,j,U;if(k<1e-14&&!b&&!x)return[{value:p},{value:m}];U=Math.ceil(m/k)-Math.floor(p/k),U>g&&(k=yl(U*k/g/f)*f),le(l)||(C=Math.pow(10,l),k=Math.ceil(k*C)/C),n==="ticks"?(I=Math.floor(p/k)*k,j=Math.ceil(m/k)*k):(I=p,j=m),b&&x&&r&&R_((a-o)/r,k/1e3)?(U=Math.round(Math.min((a-o)/k,u)),k=(a-o)/U,I=o,j=a):v?(I=b?o:I,j=x?a:j,U=c-1,k=(j-I)/U):(U=(j-I)/k,Pn(U,Math.round(U),k/1e3)?U=Math.round(U):U=Math.ceil(U));const K=Math.max(vl(k),vl(I));C=Math.pow(10,le(l)?K:l),I=Math.round(I*C)/C,j=Math.round(j*C)/C;let q=0;for(b&&(d&&I!==o?(s.push({value:o}),I<o&&q++,Pn(Math.round((I+q*k)*C)/C,o,mc(o,w,t))&&q++):I<o&&q++);q<U;++q){const Y=Math.round((I+q*k)*C)/C;if(x&&Y>a)break;s.push({value:Y})}return x&&d&&j!==a?s.length&&Pn(s[s.length-1].value,a,mc(a,w,t))?s[s.length-1].value=a:s.push({value:a}):(!x||j===a)&&s.push({value:j}),s}function mc(t,e,{horizontal:s,minRotation:i}){const n=xs(i),r=(s?Math.sin(n):Math.cos(n))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class Iv extends ri{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return le(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:i}=this.getUserBounds();let{min:n,max:r}=this;const o=l=>n=s?n:l,a=l=>r=i?r:l;if(e){const l=es(n),c=es(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(n===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(n-l)}this.min=n,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:i}=e,n;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),s=s||11),s&&(n=Math.min(s,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},r=this._range||this,o=Rv(n,r);return e.bounds==="ticks"&&I_(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let s=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const n=(i-s)/Math.max(e.length-1,1)/2;s-=n,i+=n}this._startValue=s,this._endValue=i,this._valueRange=i-s}getLabelForValue(e){return sh(e,this.chart.options.locale,this.options.ticks.format)}}class Mv extends Iv{static id="linear";static defaults={ticks:{callback:ih.formatters.numeric}};determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=tt(e)?e:0,this.max=tt(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,i=xs(this.options.ticks.minRotation),n=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,r.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const wr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fe=Object.keys(wr);function _c(t,e){return t-e}function bc(t,e){if(le(e))return null;const s=t._adapter,{parser:i,round:n,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),tt(o)||(o=typeof i=="string"?s.parse(o,i):s.parse(o)),o===null?null:(n&&(o=n==="week"&&(Yn(r)||r===!0)?s.startOf(o,"isoWeek",r):s.startOf(o,n)),+o)}function yc(t,e,s,i){const n=Fe.length;for(let r=Fe.indexOf(t);r<n-1;++r){const o=wr[Fe[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-e)/(a*o.size))<=i)return Fe[r]}return Fe[n-1]}function Dv(t,e,s,i,n){for(let r=Fe.length-1;r>=Fe.indexOf(s);r--){const o=Fe[r];if(wr[o].common&&t._adapter.diff(n,i,o)>=e-1)return o}return Fe[s?Fe.indexOf(s):0]}function jv(t){for(let e=Fe.indexOf(t)+1,s=Fe.length;e<s;++e)if(wr[Fe[e]].common)return Fe[e]}function vc(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:i,hi:n}=Zo(s,e),r=s[i]>=e?s[i]:s[n];t[r]=!0}}function $v(t,e,s,i){const n=t._adapter,r=+n.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+n.add(a,1,i))l=s[a],l>=0&&(e[l].major=!0);return e}function wc(t,e,s){const i=[],n={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],n[a]=o,i.push({value:a,major:!1});return r===0||!s?i:$v(t,i,n,s)}class xc extends ri{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const i=e.time||(e.time={}),n=this._adapter=new Qb._date(e.adapters.date);n.init(s),Ri(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:bc(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,i=e.time.unit||"day";let{min:n,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(n=Math.min(n,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=tt(n)&&!isNaN(n)?n:+s.startOf(Date.now(),i),r=tt(r)&&!isNaN(r)?r:+s.endOf(Date.now(),i)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],i=e[e.length-1]),{min:s,max:i}}buildTicks(){const e=this.options,s=e.time,i=e.ticks,n=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,o=this.max,a=F_(n,r,o);return this._unit=s.unit||(i.autoSkip?yc(s.minUnit,this.min,this.max,this._getLabelCapacity(r)):Dv(this,a.length,s.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:jv(this._unit),this.initOffsets(n),e.reverse&&a.reverse(),wc(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,i=0,n,r;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?s=1-n:s=(this.getDecimalForValue(e[1])-n)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=ct(s,0,o),i=ct(i,0,o),this._offsets={start:s,end:i,factor:1/(s+1+i)}}_generate(){const e=this._adapter,s=this.min,i=this.max,n=this.options,r=n.time,o=r.unit||yc(r.minUnit,s,i,this._getLabelCapacity(s)),a=se(n.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Yn(l)||l===!0,u={};let h=s,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,s,o)>1e5*a)throw new Error(s+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=n.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)vc(u,d,g);return(d===i||n.bounds==="ticks"||f===1)&&vc(u,d,g),Object.keys(u).sort(_c).map(p=>+p)}getLabelForValue(e){const s=this._adapter,i=this.options.time;return i.tooltipFormat?s.format(e,i.tooltipFormat):s.format(e,i.displayFormats.datetime)}format(e,s){const n=this.options.time.displayFormats,r=this._unit,o=s||n[r];return this._adapter.format(e,o)}_tickFormatFunction(e,s,i,n){const r=this.options,o=r.ticks.callback;if(o)return fe(o,[e,s,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[s],f=c&&h&&d&&d.major;return this._adapter.format(e,n||(f?h:u))}generateTickLabels(e){let s,i,n;for(s=0,i=e.length;s<i;++s)n=e[s],n.label=this._tickFormatFunction(n.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+i)*s.factor)}getValueForPixel(e){const s=this._offsets,i=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,i=this.ctx.measureText(e).width,n=xs(this.isHorizontal()?s.maxRotation:s.minRotation),r=Math.cos(n),o=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const s=this.options.time,i=s.displayFormats,n=i[s.unit]||i.millisecond,r=this._tickFormatFunction(e,0,wc(this,[e],this._majorUnit),n),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],s,i;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(s=0,i=n.length;s<i;++s)e=e.concat(n[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,i;if(e.length)return e;const n=this.getLabels();for(s=0,i=n.length;s<i;++s)e.push(bc(this,n[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Xu(e.sort(_c))}}function kn(t,e,s){let i=0,n=t.length-1,r,o,a,l;s?(e>=t[i].pos&&e<=t[n].pos&&({lo:i,hi:n}=So(t,"pos",e)),{pos:r,time:a}=t[i],{pos:o,time:l}=t[n]):(e>=t[i].time&&e<=t[n].time&&({lo:i,hi:n}=So(t,"time",e)),{time:r,pos:a}=t[i],{time:o,pos:l}=t[n]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class o0 extends xc{static id="timeseries";static defaults=xc.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=kn(s,this.min),this._tableRange=kn(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:i}=this,n=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=s&&c<=i&&n.push(c);if(n.length<2)return[{time:s,pos:0},{time:i,pos:1}];for(o=0,a=n.length;o<a;++o)u=n[o+1],l=n[o-1],c=n[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,s=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(s)||i.length===1)&&i.push(s),i.sort((n,r)=>n-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),i=this.getLabelTimestamps();return s.length&&i.length?e=this.normalize(s.concat(i)):e=s.length?s:i,e=this._cache.all=e,e}getDecimalForValue(e){return(kn(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,i=this.getDecimalForPixel(e)/s.factor-s.end;return kn(this._table,i*this._tableRange+this._minPos,!0)}}const Ph={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},Lv={ariaLabel:{type:String},ariaDescribedby:{type:String}},Nv={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...Ph,...Lv},Fv=Eu[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function $s(t){return Yi(t)?Z(t):t}function Bv(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return Yi(e)?new Proxy(t,{}):t}function Uv(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function Rh(t,e){t.labels=e}function Ih(t,e,s){const i=[];t.datasets=e.map(n=>{const r=t.datasets.find(o=>o[s]===n[s]);return!r||!n.data||i.includes(r)?{...n}:(i.push(r),Object.assign(r,n),r)})}function Hv(t,e){const s={labels:[],datasets:[]};return Rh(s,t.labels),Ih(s,t.datasets,e),s}const Wv=su({props:Nv,setup(t,e){let{expose:s,slots:i}=e;const n=Ne(null),r=qc(null);s({chart:r});const o=()=>{if(!n.value)return;const{type:c,data:u,options:h,plugins:d,datasetIdKey:f}=t,g=Hv(u,f),p=Bv(g,u);r.value=new vr(n.value,{type:c,data:p,options:{...h},plugins:d})},a=()=>{const c=Z(r.value);c&&(t.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},t.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(t.updateMode)};return ur(o),Ho(a),En([()=>t.options,()=>t.data],(c,u)=>{let[h,d]=c,[f,g]=u;const p=Z(r.value);if(!p)return;let m=!1;if(h){const b=$s(h),x=$s(f);b&&b!==x&&(Uv(p,b),m=!0)}if(d){const b=$s(d.labels),x=$s(g.labels),v=$s(d.datasets),w=$s(g.datasets);b!==x&&(Rh(p.config.data,b),m=!0),v&&v!==w&&(Ih(p.config.data,v,t.datasetIdKey),m=!0)}m&&Fo(()=>{l(p)})},{deep:!0}),()=>co("canvas",{role:"img","aria-label":t.ariaLabel,"aria-describedby":t.ariaDescribedby,ref:n},[co("p",{},[i.default?i.default():""])])}});function zv(t,e){return vr.register(e),su({props:Ph,setup(s,i){let{expose:n}=i;const r=qc(null),o=a=>{r.value=a?.chart};return n({chart:r}),()=>co(Wv,Fv({ref:o},{type:t,...s}))}})}const Vv=zv("bar",Xb),qv={__name:"MealChart",props:{total:Object,goal:Object,proteinGram:Number,fatGram:Number,carbGram:Number},setup(t){vr.register(Ov,bv,dv,Pv,Mv);const e=t,s=at(()=>({labels:["Protein(g)","Fat(g)","Carb(g)"],datasets:[{label:"",backgroundColor:"#4caf50",data:[e.total.protein,e.total.fat,e.total.carb]},{label:"",backgroundColor:"#2196f3",data:[e.proteinGram,e.fatGram,e.carbGram]}]})),i={indexAxis:"y",responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{beginAtZero:!0},y:{beginAtZero:!0}}};return(n,r)=>(oe(),Fn(ys(Vv),{data:s.value,options:i},null,8,["data"]))}},Kv={class:"login"},Gv={key:0,class:"loginform"},Jv={key:1},Yv={class:"header"},Xv={class:"main-contents"},Qv={class:"card"},Zv={class:"added-meals"},e0={key:0},t0={__name:"App",setup(t){const e=Ne(""),s=Ne(!1),i=Ne(!1),n=()=>{i.value=!i.value},r=Ne(!1),o=Ne(!1),a=()=>{r.value=!r.value},l=()=>{localStorage.setItem("goal",JSON.stringify(u.value)),alert(""),i.value=!1},c=()=>{e.value&&(localStorage.setItem("username",e.value),s.value=!0)};ur(()=>{const v=localStorage.getItem("username");v&&(e.value=v,s.value=!0);const w=localStorage.getItem("goal");w&&(u.value=JSON.parse(w));const k=localStorage.getItem("meals");k&&(g.value=JSON.parse(k))});const u=Ne({calorie:2e3,ratioProtein:30,ratioFat:20,ratioCarb:50}),h=at(()=>Math.round(u.value.calorie*u.value.ratioProtein/100/4)),d=at(()=>Math.round(u.value.calorie*u.value.ratioFat/100/9)),f=at(()=>Math.round(u.value.calorie*u.value.ratioCarb/100/4)),g=Ne([]),p=Ne({name:"",calorie:0,protein:0,fat:0,carb:0}),m=v=>{!v||!v.name||g.value.push({...v})},b=at(()=>g.value.reduce((v,w)=>(v.calorie+=Number(w.calorie),v.protein+=Number(w.protein),v.fat+=Number(w.fat),v.carb+=Number(w.carb),v),{calorie:0,protein:0,fat:0,carb:0})),x=()=>{g.value=[],localStorage.removeItem("meals"),p.value={name:"",calorie:0,protein:0,fat:0,carb:0}};return(v,w)=>(oe(),ge("main",null,[$("div",Kv,[s.value?(oe(),ge("div",Jv,[$("div",Yv,[$("h1",null,"Welcome "+J(e.value)+" ",1)]),$("div",Xv,[$("button",{onClick:n},J(i.value?"":""),1),i.value?(oe(),Fn(ag,{key:0,goal:u.value,onSave:l},null,8,["goal"])):Gs("",!0),w[4]||(w[4]=$("h2",null," ",-1)),$("div",{class:"meal-buttons"},[$("button",{onClick:a},""),$("button",{onClick:x,class:"reset-btn"},"")]),r.value?(oe(),Fn(Qm,{key:1,onAdd:m,onClose:w[1]||(w[1]=k=>r.value=!1)})):Gs("",!0),w[5]||(w[5]=$("h2",null," ",-1)),$("div",Qv,[$("p",null,"Calories: "+J(b.value.calorie)+" / "+J(u.value.calorie),1),$("p",null,"Protein: "+J(b.value.protein.toFixed(1))+" / "+J(h.value.toFixed(1)),1),$("p",null,"Fat: "+J(b.value.fat.toFixed(1))+" / "+J(d.value.toFixed(1)),1),$("p",null,"Carb: "+J(b.value.carb.toFixed(1))+" / "+J(f.value.toFixed(1)),1)]),w[6]||(w[6]=$("h2",null," ",-1)),Be(qv,{total:b.value,goal:u.value,proteinGram:h.value,fatGram:d.value,carbGram:f.value},null,8,["total","goal","proteinGram","fatGram","carbGram"]),$("div",Zv,[$("button",{onClick:w[2]||(w[2]=k=>o.value=!o.value)},J(o.value?" ":" "),1),o.value?(oe(),ge("ul",e0,[(oe(!0),ge(Oe,null,vs(g.value,(k,C)=>(oe(),ge("li",{key:C},J(k.name)+" - "+J(k.calorie)+"kcal | P"+J(k.protein.toFixed(1))+" F"+J(k.fat.toFixed(1))+" C"+J(k.carb.toFixed(1)),1))),128))])):Gs("",!0)])])])):(oe(),ge("div",Gv,[w[3]||(w[3]=$("h2",null,"",-1)),ot($("input",{"onUpdate:modelValue":w[0]||(w[0]=k=>e.value=k),placeholder:"Name"},null,512),[[Ns,e.value]]),$("button",{onClick:c},"Start")]))])]))}},s0=qo(t0,[["__scopeId","data-v-5d68d931"]]);Yf(s0).mount("#app");
